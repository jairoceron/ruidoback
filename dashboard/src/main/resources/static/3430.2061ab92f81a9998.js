"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[3430],{16174:(A,O,t)=>{t.d(O,{eY:()=>H});var e=t(60305),d=t(19554),R=t(61274),c=t(3878),C=(t(26436),t(27001),t(67474),t(36320),t(40150),t(94345),t(82705),t(13006)),T=(t(48082),t(66505)),_=t(28644);function z(f,a,h){const u={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return a&&h&&(u.width=a,u.height=h),new C.Z(f,u)}class H extends T.s{constructor(a=null,h,u=!0){super(),this.requestRenderOnSourceChangedEnabled=u,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=h,this.source=a,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(a){this._height=a}get source(){return this._source}set source(a){this._source=a,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(a){this._width=a}beforeRender(a){super.beforeRender(a),this.updateTexture(a.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,R.c)()}}setTransform(a){const h=(0,d.b)(this.transforms.dvs),[u,U]=a.toScreenNoRotation([0,0],[this.x,this.y]),P=this.resolution/this.pixelRatio/a.resolution,E=P*this.width,W=P*this.height,n=Math.PI*this.rotation/180;(0,d.c)(h,h,(0,c.f)(u,U)),(0,d.c)(h,h,(0,c.f)(E/2,W/2)),(0,d.r)(h,h,-n),(0,d.c)(h,h,(0,c.f)(-E/2,-W/2)),(0,d.j)(h,h,(0,c.f)(E,W)),(0,d.m)(this.transforms.dvs,a.displayViewMat3,h)}setSamplingProfile(a){this._texture&&(a.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(a.samplingMode))}bind(a,h){this._texture&&a.bindTexture(this._texture,h)}updateTexture(a){var h;if(!this.stage)return null==(h=this._texture)||h.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?z(a,this.sourceWidth,this.sourceHeight):z(a));const u=this.source;if(u){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(f=u)&&"render"in f)if(u instanceof _.Z){const U=u.getRenderedRasterPixels();this._texture.setData((0,e.pC)(U)?U.renderedRasterPixels:null)}else this._texture.setData(function(f){const a=document.createElement("canvas");return a.width=f.width,a.height=f.height,f.render(a.getContext("2d")),a}(u));else(function(f){return f&&!("render"in f)})(u)&&this._texture.setData(u);this.ready()}else this._texture.setData(null);var f}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},7109:(A,O,t)=>{t.d(O,{c:()=>c});var e=t(56109),d=t(38963),R=t(91099);class c extends R.Z{get requiresDedicatedFBO(){return this.children.some(x=>"additive"===x.blendFunction)}prepareRenderPasses(x){const D=x.registerRenderPass({name:"bitmap",brushes:[e.U.bitmap],target:()=>this.children,drawPhase:d.jx.MAP});return[...super.prepareRenderPasses(x),D]}}},28644:(A,O,t)=>{t.d(O,{Z:()=>d});var e=t(60305);class d{constructor(c,i,x){this.pixelBlock=c,this.extent=i,this.originalPixelBlock=x}get width(){return(0,e.pC)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,e.pC)(this.pixelBlock)?this.pixelBlock.height:0}render(c){const i=this.pixelBlock;if((0,e.Wi)(i))return;const x=this.filter({pixelBlock:i});if((0,e.Wi)(x.pixelBlock))return;const D=x.pixelBlock.getAsRGBA(),B=c.createImageData(x.pixelBlock.width,x.pixelBlock.height);B.data.set(D),c.putImageData(B,0,0)}getRenderedRasterPixels(){const c=this.filter({pixelBlock:this.pixelBlock});return(0,e.Wi)(c.pixelBlock)?null:{width:c.pixelBlock.width,height:c.pixelBlock.height,renderedRasterPixels:new Uint8Array(c.pixelBlock.getAsRGBA().buffer)}}}},70297:(A,O,t)=>{t.d(O,{y:()=>n});var e=t(60046),d=t(76011),R=t(55208),c=t(97467),i=t(9077),y=(t(67474),t(57025),t(33870),t(42442)),S=t(29729),b=t(54792);let C=class extends b.wq{};C=(0,e._)([(0,y.j)("esri.views.layers.support.ClipArea")],C);var T,m=C;let _=T=class extends m{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new T({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],_.prototype,"left",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],_.prototype,"right",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],_.prototype,"top",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],_.prototype,"bottom",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],_.prototype,"version",null),_=T=(0,e._)([(0,y.j)("esri.views.layers.support.ClipRect")],_);var a,I=_,Z=(t(73513),t(40485)),z=t(52917),H=t(82059),f=t(70393);const h={base:Z.Z,key:"type",typeMap:{extent:H.Z,polygon:f.Z}};let u=a=class extends m{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new a({geometry:this.geometry.clone()})}};(0,e._)([(0,i.Cb)({types:h,json:{read:z.im,write:!0}})],u.prototype,"geometry",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],u.prototype,"version",null),u=a=(0,e._)([(0,y.j)("esri.views.layers.support.Geometry")],u);var U=u;let P=class extends m{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,i.Cb)({type:[[[Number]]],json:{write:!0}})],P.prototype,"path",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],P.prototype,"version",null),P=(0,e._)([(0,y.j)("esri.views.layers.support.Path")],P);const W=d.Z.ofType({key:"type",base:m,typeMap:{rect:I,path:P,geometry:U}}),n=s=>{let p=class extends s{constructor(){super(...arguments),this.clips=new W,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var l;this.container||(this.container=new S.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,c.S1)(this,"suspended",r=>{this.container&&(this.container.visible=!r),this.view&&!r&&this.updateRequested&&this.view.requestUpdate()},!0),(0,c.S1)(this,["layer.opacity","container"],()=>{var r,o;this.container&&(this.container.opacity=null!=(r=null==(o=this.layer)?void 0:o.opacity)?r:1)},!0),(0,c.S1)(this,["layer.blendMode"],r=>{this.container&&(this.container.blendMode=r)},!0),(0,c.S1)(this,["layer.effect"],r=>{this.container&&(this.container.effect=r)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(l=this.view)&&l.whenLayerView?this.view.whenLayerView(this.layer).then(r=>{r!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(l){let r=!0;const o=this.layer,v=o.minScale,M=o.maxScale;if(null!=v&&null!=M){let g=!v,j=!M;!g&&l<=v&&(g=!0),!j&&l>=M&&(j=!0),r=g&&j}return r}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(l){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",l),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(l))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,e._)([(0,i.Cb)({type:W,set(l){const r=(0,R.Z)(l,this._get("clips"),W);this._set("clips",r)}})],p.prototype,"clips",void 0),(0,e._)([(0,i.Cb)()],p.prototype,"moving",void 0),(0,e._)([(0,i.Cb)()],p.prototype,"attached",void 0),(0,e._)([(0,i.Cb)()],p.prototype,"container",void 0),(0,e._)([(0,i.Cb)()],p.prototype,"suspended",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],p.prototype,"updateParameters",void 0),(0,e._)([(0,i.Cb)()],p.prototype,"updateRequested",void 0),(0,e._)([(0,i.Cb)()],p.prototype,"updating",null),(0,e._)([(0,i.Cb)()],p.prototype,"view",void 0),p=(0,e._)([(0,y.j)("esri.views.2d.layers.LayerView2D")],p),p}},79821:(A,O,t)=>{t.d(O,{Z:()=>W});var e=t(61921),d=t(60046),R=t(64859),c=t(12523),i=t(9077),y=(t(67474),t(57025),t(33870),t(42442)),S=t(82059),b=t(13638),C=t(89096),m=t(31818);const T=Math.PI/180;var H=t(16174),f=t(54231),a=t(6525);const h=(0,b.Ue)(),u=[0,0],U=new a.Z(0,0,0,0);let E=class extends R.Z{constructor(n){var s;super(n),s=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,c.Ds)(function(){var p=(0,e.Z)(function*(l,r){if(!l.stationary||s.destroyed)return null;const o=l.state,v=(0,C.C5)(o.spatialReference),M=s.hidpi?l.pixelRatio:1,g=s.imageNormalizationSupported&&o.worldScreenWidth&&o.worldScreenWidth<o.size[0];g?(u[0]=o.worldScreenWidth,u[1]=o.size[1]):s.imageRotationSupported?(u[0]=o.size[0],u[1]=o.size[1]):function(n,s){const p=function(n){return n*T}(s.rotation),l=Math.abs(Math.cos(p)),r=Math.abs(Math.sin(p)),[o,v]=s.size;n[0]=Math.round(v*r+o*l),n[1]=Math.round(v*l+o*r)}(u,o);const j=Math.floor(u[0]*M)>s.imageMaxWidth||Math.floor(u[1]*M)>s.imageMaxHeight,V=!s.imageNormalizationSupported&&v&&(o.extent.xmin<v.valid[0]||o.extent.xmax>v.valid[1]),F=s.imageRotationSupported?o.rotation:0;if(j||V){let L=Math.min(s.imageMaxWidth,s.imageMaxHeight);V&&(L=Math.min(o.worldScreenWidth,L)),s._imagePromise=s._tiledExport(o,L,F,M,r)}else s._imagePromise=s._singleExport(o,u,g?o.paddedViewState.center:o.center,o.resolution,F,M,r);return s._imagePromise.then(function(){var L=(0,e.Z)(function*(N){if(s._imagePromise=null,!s.destroyed){s.bitmaps=null!=N?N:[];for(const w of s.container.children)N.includes(w)||w.fadeOut().then(()=>{w.remove()});for(const w of N)s.container.addChild(w),w.fadeIn()}});return function(N){return L.apply(this,arguments)}}()).catch(L=>{throw s._imagePromise=null,L})});return function(l,r){return p.apply(this,arguments)}}(),5e3)}destroy(){this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}updateExports(n){for(const s of this.container.children){if(!s.visible||!s.stage)return;n(s),s.invalidateTexture(),s.requestRender()}}_export(n,s,p,l,r,o){var v=this;return(0,e.Z)(function*(){const M=yield v.fetchSource(n,Math.floor(s*r),Math.floor(p*r),{rotation:l,pixelRatio:r,signal:o}),g=new H.eY(M,"additive");return g.x=n.xmin,g.y=n.ymax,g.resolution=n.width/s,g.rotation=l,g.pixelRatio=r,g})()}_singleExport(n,s,p,l,r,o,v){var M=this;return(0,e.Z)(function*(){!function(n,s,p,l){const[r,o]=s,[v,M]=l,g=.5*p;n[0]=r-g*v,n[1]=o-g*M,n[2]=r+g*v,n[3]=o+g*M}(h,p,l,s);const g=new S.Z(h[0],h[1],h[2],h[3],n.spatialReference);return[yield M._export(g,s[0],s[1],r,o,v)]})()}_tiledExport(n,s,p,l,r){const o=m.Z.create({size:s,spatialReference:n.spatialReference,scales:[n.scale]}),v=new f.Z(o),M=v.getTileCoverage(n);if(!M)return null;const g=[];return M.forEach((j,G,V,Y)=>{U.set(j,G,V,Y),v.getTileBounds(h,U);const F=new S.Z(h[0],h[1],h[2],h[3],n.spatialReference);g.push(this._export(F,s,s,p,l,r))}),Promise.all(g)}};(0,d._)([(0,i.Cb)()],E.prototype,"_imagePromise",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"bitmaps",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"container",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"fetchSource",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"hidpi",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"imageMaxWidth",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"imageMaxHeight",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"imageRotationSupported",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"imageNormalizationSupported",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"requestUpdate",void 0),(0,d._)([(0,i.Cb)()],E.prototype,"updating",null),E=(0,d._)([(0,y.j)("esri.views.2d.layers.support.ExportStrategy")],E);var W=E},59989:(A,O,t)=>{t.d(O,{Z:()=>T});var e=t(60046),d=t(64859),R=t(77624),c=t(10882),i=t(21511),x=t(33870),D=t(60305),B=t(73763),y=t(9077),C=(t(67474),t(57025),t(42442));let m=class extends((0,c.p)((0,i.I)((0,B.v)(R.Z.EventedMixin(d.Z))))){constructor(_){super(_),this.layer=null,this.parent=null}initialize(){this.when().catch(_=>{if("layerview:create-error"!==_.name){const I=this.layer&&this.layer.id||"no id",K=this.layer&&this.layer.title||"no title";throw x.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${K}', id: '${I}')`,_),_}})}get fullOpacity(){return(0,D.Pt)(this.get("layer.opacity"),1)*(0,D.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get("layer.visible")}set visible(_){void 0!==_?this._override("visible",_):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const _=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(_.viewNotReady=!0),this.layer&&this.layer.loaded||(_.layerNotLoaded=!0),this.visible||(_.layerInvisible=!0),_}isUpdating(){return!1}};(0,e._)([(0,y.Cb)()],m.prototype,"fullOpacity",null),(0,e._)([(0,y.Cb)()],m.prototype,"layer",void 0),(0,e._)([(0,y.Cb)()],m.prototype,"parent",void 0),(0,e._)([(0,y.Cb)({readOnly:!0})],m.prototype,"suspended",null),(0,e._)([(0,y.Cb)({readOnly:!0})],m.prototype,"suspendInfo",null),(0,e._)([(0,y.Cb)({readOnly:!0})],m.prototype,"legendEnabled",null),(0,e._)([(0,y.Cb)({type:Boolean,readOnly:!0})],m.prototype,"updating",null),(0,e._)([(0,y.Cb)({readOnly:!0})],m.prototype,"updatingProgress",null),(0,e._)([(0,y.Cb)()],m.prototype,"visible",null),m=(0,e._)([(0,C.j)("esri.views.layers.LayerView")],m);var T=m},72619:(A,O,t)=>{t.d(O,{y:()=>y});var e=t(60046),d=t(33870),R=t(12523),c=t(97467),i=t(9077),B=(t(67474),t(57025),t(42442));const y=S=>{let b=class extends S{initialize(){this.handles.add((0,c.on)(this,"layer","refresh",()=>{this.doRefresh().catch(C=>{(0,R.D_)(C)||d.Z.getLogger(this.declaredClass).error(C)})}),"RefreshableLayerView")}};return(0,e._)([(0,i.Cb)()],b.prototype,"layer",void 0),b=(0,e._)([(0,B.j)("esri.layers.mixins.RefreshableLayerView")],b),b}}}]);