"use strict";var St=Object.defineProperty,ft=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,dt=(I,D,g)=>D in I?St(I,D,{enumerable:!0,configurable:!0,writable:!0,value:g}):I[D]=g,Z=(I,D)=>{for(var g in D||(D={}))Mt.call(D,g)&&dt(I,g,D[g]);if(ft)for(var g of ft(D))Pt.call(D,g)&&dt(I,g,D[g]);return I};(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[730],{94345:(I,D,g)=>{g.d(D,{b:()=>h,l:()=>C,o:()=>y});var N,U={exports:{}};void 0!==(N=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(U.exports=N);var p,C=U.exports,v={exports:{}};void 0!==(p=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(v.exports=p);var T,y=v.exports,S={exports:{}};void 0!==(T=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(S.exports=T);var h=S.exports},26436:(I,D,g)=>{g.d(D,{Z:()=>y});var N=g(33870),U=g(89868),R=g(36320),C=g(40150);const v=N.Z.getLogger("esri.views.webgl.BufferObject");class y{constructor(h,u,p,T,A){this._context=h,this.bufferType=u,this.usage=p,this._glName=null,this._size=-1,this._indexType=void 0,h.instanceCounter.increment(C._g.Buffer,this),this._glName=this._context.gl.createBuffer(),(0,R.zu)(this._context.gl),T&&this.setData(T,A)}static createIndex(h,u,p,T){return new y(h,34963,u,p,T)}static createVertex(h,u,p){return new y(h,34962,u,p)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){var h;null!=(h=this._context)&&h.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(C._g.Buffer,this),this._context=null):this._glName&&v.warn("Leaked WebGL buffer object")}setData(h,u){if(!h)return;if("number"==typeof h){if(h<0&&v.error("Buffer size cannot be negative!"),34963===this.bufferType&&u)switch(this._indexType=u,this._size=h,u){case 5123:h*=2;break;case 5125:h*=4}}else{let A=h.byteLength;(0,U.Uc)(h)&&(A/=2,this._indexType=5123),(0,U.ZY)(h)&&(A/=4,this._indexType=5125),this._size=A}const p=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const T=this._context.gl;T.bufferData(this.bufferType,h,this.usage),(0,R.zu)(T),this._context.bindVAO(p)}setSubData(h,u=0,p=0,T=h.byteLength){if(!h)return;(u<0||u>=this._size)&&v.error("offset is out of range!");let A=u,n=p,o=T,_=h.byteLength;(0,U.Uc)(h)&&(_/=2,A*=2,n*=2,o*=2),(0,U.ZY)(h)&&(_/=4,A*=4,n*=4,o*=4),void 0===T&&(T=_-1),p>=T&&v.error("end must be bigger than start!"),u+p-T>this._size&&v.error("An attempt to write beyond the end of the buffer!");const l=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const m=this._context.gl,d=ArrayBuffer.isView(h)?h.buffer:h,E=0===n&&o===h.byteLength?d:d.slice(n,o);m.bufferSubData(this.bufferType,A,E),(0,R.zu)(m),this._context.bindVAO(l)}}},27001:(I,D,g)=>{g.d(D,{Z:()=>h});var N=g(33870),U=g(36320),R=g(40150),C=g(81530),v=g(13006),y=g(30070);const S=N.Z.getLogger("esri.views.webgl.FrameBufferObject");class h{constructor(n,o,_,l){if(this._context=n,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc=Z({},o),n.instanceCounter.increment(R._g.Framebuffer,this),_){Array.isArray(_)||(_=[_]);for(let M=0;M<_.length;++M){var m,d;const O=_[M];let W;u(O)?(W=O.descriptor,this._colorAttachments.set(36064+M,O)):(W=O,this._colorAttachments.set(36064+M,new v.Z(n,O))),0!==(null==(m=this._desc)?void 0:m.colorTarget)&&2!==(null==(d=this._desc)?void 0:d.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateColorAttachmentPoint(36064+M),this._validateTextureDimensions(W,this._desc)}}if(l instanceof C.Z){var E;const M=null!=(E=this._desc.depthStencilTarget)?E:3;2===M?this._stencilAttachment=l:1===M||3===M?this._depthAttachment=l:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),T(l.descriptor,this._desc)}else if(l){let M;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),u(l)?(this._depthStencilTexture=l,M=l.descriptor):this._depthStencilTexture=new v.Z(this._context,l),this._validateTextureDimensions(M,this._desc)}}dispose(){if(!this._desc)return;const n=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(n),this._context.instanceCounter.decrement(R._g.Framebuffer,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const n=this._colorAttachments.get(36064);return n&&u(n)?n:null}get colorAttachment(){return this._colorAttachments.get(36064)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width}get height(){return this._desc.height}get gpuMemoryUsage(){return(0,y.un)(this.colorAttachment)+(0,y.un)(this.depthStencilAttachment)}getColorTexture(n){const o=this._colorAttachments.get(n);return o&&u(o)?o:null}framebufferTexture2D(n,o,_=36064,l=3553,m=0){o.framebufferTexture2D(o.FRAMEBUFFER,_,l,n,m)}attachColorTexture(n,o=36064){n&&(this._validateColorAttachmentPoint(o),this._validateTextureDimensions(n.descriptor,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(n.glName,this._context.gl,o)),this._colorAttachments.set(o,n))}detachColorTexture(n=36064){const o=this._colorAttachments.get(n);if(u(o)){const _=o;return this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,n)),this._colorAttachments.delete(n),_}}attachDepthStencilTexture(n){if(!n)return;const o=n.descriptor;34041!==o.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==o.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(o,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(n.glName,this._context.gl,R.Lu)),this._depthStencilTexture=n}detachDepthStencilTexture(){const n=this._depthStencilTexture;return n&&this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,R.Lu)),this._depthStencilTexture=null,n}attachDepthStencilBuffer(n){if(!n)return;const o=n.descriptor;if(34041!==o.internalFormat&&33189!==o.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),T(o,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===o.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);const _=this._context.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,1===this._desc.depthStencilTarget?_.DEPTH_ATTACHMENT:_.DEPTH_STENCIL_ATTACHMENT,_.RENDERBUFFER,n.glName)}this._depthAttachment=n}detachDepthStencilBuffer(){const n=this._context.gl,o=this._depthAttachment;return o&&this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,null)),this._depthAttachment=null,o}detachAll(){this.detachColorTexture(),this.detachDepthStencilBuffer(),this.detachDepthStencilTexture()}copyToTexture(n,o,_,l,m,d,E){(n<0||o<0||m<0||d<0)&&console.error("Offsets cannot be negative!"),(_<=0||l<=0)&&console.error("Copy width and height must be greater than zero!");const M=this._desc,O=E.descriptor;3553!==E.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(n+_>M.width||o+l>M.height||m+_>O.width||d+l>O.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const W=this._context,K=W.bindTexture(E,v.Z.TEXTURE_UNIT_FOR_UPDATES);W.bindFramebuffer(this),W.gl.copyTexSubImage2D(3553,0,m,d,n,o,_,l),W.bindTexture(K,v.Z.TEXTURE_UNIT_FOR_UPDATES)}readPixels(n,o,_,l,m,d,E){(_<=0||l<=0)&&console.error("Copy width and height must be greater than zero!"),E||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(n,o,_,l,m,d,E)}resize(n,o){const _=this._desc;if(_.width!==n||_.height!==o){if(!this._initialized)return _.width=n,_.height=o,this._colorAttachments.forEach(l=>{l&&l.resize(n,o)}),void(this._depthStencilTexture&&this._depthStencilTexture.resize(n,o));_.width=n,_.height=o,this._colorAttachments.forEach(l=>{l&&l.resize(n,o)}),null!=this._depthStencilTexture?this._depthStencilTexture.resize(n,o):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(n,o),this._stencilAttachment&&this._stencilAttachment.resize(n,o)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(n=3553){var o,_,l,m;const d=this._context.gl;if(this._initialized)return void d.bindFramebuffer(d.FRAMEBUFFER,this.glName);this._glName&&d.deleteFramebuffer(this._glName);const E=this._context,M=d.createFramebuffer(),O=this._desc,W=null!=(o=O.colorTarget)?o:1,K=null!=(_=O.width)?_:1,$=null!=(l=O.height)?l:1;if(d.bindFramebuffer(d.FRAMEBUFFER,M),0===this._colorAttachments.size)if(0===W)this._colorAttachments.set(36064,function(A,n,o){return new v.Z(A,{target:o,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:n.width,height:n.height})}(E,O,2===this.descriptor.colorTarget?34067:3553));else{const B=new C.Z(E,{internalFormat:32854,width:K,height:$});this._colorAttachments.set(36064,B)}this._colorAttachments.forEach((B,q)=>{B&&(u(B)?this.framebufferTexture2D(B.glName,d,q,n):d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,B.glName))});const J=null!=(m=O.depthStencilTarget)?m:0;switch(J){case 1:case 3:this._depthAttachment||(this._depthAttachment=new C.Z(E,{internalFormat:1===O.depthStencilTarget?33189:34041,width:K,height:$})),d.framebufferRenderbuffer(d.FRAMEBUFFER,1===J?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new C.Z(E,{internalFormat:36168,width:K,height:$})),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.STENCIL_ATTACHMENT,d.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(E.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new v.Z(E,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:K,height:$})),this.framebufferTexture2D(this._depthStencilTexture.glName,d,d.DEPTH_STENCIL_ATTACHMENT,n)}(0,U.CG)()&&d.checkFramebufferStatus(d.FRAMEBUFFER)!==d.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=M,this._initialized=!0}_disposeColorAttachments(){this._colorAttachments.forEach((n,o)=>{if(u(n))this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,this._context.gl,o)),n.dispose();else if(n instanceof WebGLRenderbuffer){const _=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),_.framebufferRenderbuffer(_.FRAMEBUFFER,o,_.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(n)}}),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const n=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null),this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this.framebufferTexture2D(null,n,n.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}_validateTextureDimensions(n,o){3553!==n.target&&34067!==n.target&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),void 0!==o.width&&o.width>=0&&void 0!==o.height&&o.height>=0?o.width===n.width&&o.height===n.height||console.error("Color attachment texture must match the framebuffer's!"):(o.width=n.width,o.height=n.height)}_validateColorAttachmentPoint(n){if(-1===h._MAX_COLOR_ATTACHMENTS){const _=this._context.capabilities.drawBuffers;h._MAX_COLOR_ATTACHMENTS=_?this._context.gl.getParameter(_.MAX_COLOR_ATTACHMENTS):1}const o=n-36064;o+1>h._MAX_COLOR_ATTACHMENTS&&S.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${o+1}. Implementation supports up to ${h._MAX_COLOR_ATTACHMENTS} color attachments`)}}function u(A){return"type"in A&&"texture"===A.type}function T(A,n){void 0!==n.width&&n.width>=0&&void 0!==n.height&&n.height>=0?n.width===A.width&&n.height===A.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(n.width=A.width,n.height=A.height)}h._MAX_COLOR_ATTACHMENTS=-1},25558:(I,D,g)=>{g.d(D,{$:()=>ht}),g(67474);var U=g(60305),R=g(36320),C=g(40150),v=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],y=g(94345),S=999,O=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function $(i){return function(i){var t=function(){var i,t,r,e=0,f=0,a=S,c=[],P=[],b=1,z=0,w=0,j=!1,X=!1,H="";return function(L){return P=[],null!==L?function(L){var Q;for(e=0,r=(H+=L).length;i=H[e],e<r;){switch(Q=e,a){case 0:e="/"===i&&"*"===t?(c.push(i),V(c.join("")),a=S,e+1):(c.push(i),t=i,e+1);break;case 1:case 2:e=ut();break;case 3:e=vt();break;case 4:e="."===i||/[eE]/.test(i)?(c.push(i),a=5,t=i,e+1):"x"===i&&1===c.length&&"0"===c[0]?(a=11,c.push(i),t=i,e+1):/[^\d]/.test(i)?(V(c.join("")),a=S,e):(c.push(i),t=i,e+1);break;case 11:e=/[^a-fA-F0-9]/.test(i)?(V(c.join("")),a=S,e):(c.push(i),t=i,e+1);break;case 5:"f"===i&&(c.push(i),t=i,e+=1),e=/[eE]/.test(i)||"-"===i&&/[eE]/.test(t)?(c.push(i),t=i,e+1):/[^\d]/.test(i)?(V(c.join("")),a=S,e):(c.push(i),t=i,e+1);break;case 9999:e=Dt();break;case 9:e=/[^\s]/g.test(i)?(V(c.join("")),a=S,e):(c.push(i),t=i,e+1);break;case S:c=c.length?[]:c,e="/"===t&&"*"===i?(w=f+e-1,a=0,t=i,e+1):"/"===t&&"/"===i?(w=f+e-1,a=1,t=i,e+1):"#"===i?(a=2,w=f+e,e):/\s/.test(i)?(a=9,w=f+e,e):(j=/\d/.test(i),X=/[^\w_]/.test(i),w=f+e,a=j?4:X?3:9999,e)}Q!==e&&("\n"===H[Q]?(z=0,++b):++z)}return f+=e,H=H.slice(e),P}(L.replace?L.replace(/\r\n/g,"\n"):L):(c.length&&V(c.join("")),a=10,V("(eof)"),P)};function V(L){L.length&&P.push({type:O[a],data:L,position:w,line:b,column:z})}function ut(){return"\r"!==i&&"\n"!==i||"\\"===t?(c.push(i),t=i,e+1):(V(c.join("")),a=S,e)}function vt(){if("."===t&&/\d/.test(i))return a=5,e;if("/"===t&&"*"===i)return a=0,e;if("/"===t&&"/"===i)return a=1,e;if("."===i&&c.length){for(;ct(c););return a=5,e}if(";"===i||")"===i||"("===i){if(c.length)for(;ct(c););return V(i),a=S,e+1}var L=2===c.length&&"="!==i;if(/[\w_\d\s]/.test(i)||L){for(;ct(c););return a=S,e}return c.push(i),t=i,e+1}function ct(L){for(var Q,it,_t=0;;){if(Q=y.o.indexOf(L.slice(0,L.length+_t).join("")),it=y.o[Q],-1===Q){if(_t--+L.length>0)continue;it=L.slice(0,1).join("")}return V(it),w+=it.length,(c=c.slice(it.length)).length}}function Dt(){if(/[^\d\w_]/.test(i)){var L=c.join("");return a=y.l.indexOf(L)>-1?8:y.b.indexOf(L)>-1?7:6,V(c.join("")),a=S,e}return c.push(i),t=i,e+1}}(),r=[];return(r=r.concat(t(i))).concat(t(null))}(i)}const B=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function rt(i,t){for(let r=t-1;r>=0;r--){const e=i[r];if("whitespace"!==e.type&&"block-comment"!==e.type){if("keyword"!==e.type)break;if("attribute"===e.data||"in"===e.data)return!0}}return!1}function Y(i,t,r,e){e=e||r;for(const f of i)if("ident"===f.type&&f.data===r)return e in t?t[e]++:t[e]=0,Y(i,t,e+"_"+t[e],e);return r}function tt(i,t,r="afterVersion"){function e(b,z){for(let w=z;w<b.length;w++){const j=b[w];if("operator"===j.type&&";"===j.data)return w}return null}const a={data:"\n",type:"whitespace"},c=b=>b<i.length&&/[^\r\n]$/.test(i[b].data);let P=function(b){let z=-1,w=0,j=-1;for(let X=0;X<b.length;X++){const H=b[X];if("preprocessor"===H.type&&(H.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++w:H.data.match(/\#endif\s*.*/)&&--w),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===H.type&&/^#version/.test(H.data)&&(j=Math.max(j,X)),"afterPrecision"===r&&"keyword"===H.type&&"precision"===H.data){const V=e(b,X);if(null===V)throw new Error("precision statement not followed by any semicolons!");j=Math.max(j,V)}z<j&&0===w&&(z=X)}return z+1}(i);c(P-1)&&i.splice(P++,0,a);for(const b of t)i.splice(P++,0,b);c(P-1)&&c(P)&&i.splice(P,0,a)}function at(i,t,r,e="lowp"){tt(i,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:e},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function nt(i,t,r,e,f="lowp"){tt(i,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:e.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:f},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function lt(i,t){let r,e,f=-1;for(let a=t;a<i.length;a++){const c=i[a];if("operator"===c.type&&("["===c.data&&(r=a),"]"===c.data)){e=a;break}"integer"===c.type&&(f=parseInt(c.data,10))}return r&&e&&i.splice(r,e-r+1),f}class ht{constructor(t,r,e,f){this._context=t,this._locations=f,this._vShader=null,this._fShader=null,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===r.length&&console.error("Shaders source should not be empty!"),this._vShader=ot(this._context,35633,r),this._fShader=ot(this._context,35632,e),this._vShader&&this._fShader||console.error("Error loading shaders!");const a=this._context.gl,c=a.createProgram();a.attachShader(c,this._vShader),a.attachShader(c,this._fShader),f.forEach((P,b)=>a.bindAttribLocation(c,P,b)),a.linkProgram(c),(0,R.CG)()&&!a.getProgramParameter(c,a.LINK_STATUS)&&console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(c,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(c)),this._glName=c,this._context.instanceCounter.increment(C._g.Program,this)}get glName(){return this._glName}dispose(){const t=this._context.gl;this._vShader&&(t.deleteShader(this._vShader),this._vShader=null),this._fShader&&(t.deleteShader(this._fShader),this._fShader=null),this._glName&&(t.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(C._g.Program,this))}_getUniformLocation(t){return void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this._glName,t)),this._nameToUniformLocation[t]}hasUniform(t){return null!==this._getUniformLocation(t)}setUniform1i(t,r){const e=this._nameToUniform1[t];(void 0===e||r!==e)&&(this._context.useProgram(this),this._context.gl.uniform1i(this._getUniformLocation(t),r),this._nameToUniform1[t]=r)}setUniform1iv(t,r){const e=this._nameToUniform1v[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform1iv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform1v[t]=Array.from(r):F(r,e))}setUniform2iv(t,r){const e=this._nameToUniform2[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform2iv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform2[t]=Array.from(r):F(r,e))}setUniform3iv(t,r){const e=this._nameToUniform3[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform3iv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform3[t]=Array.from(r):F(r,e))}setUniform4iv(t,r){const e=this._nameToUniform4[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform4iv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform4[t]=Array.from(r):F(r,e))}setUniform1f(t,r){const e=this._nameToUniform1[t];(void 0===e||r!==e)&&(this._context.useProgram(this),this._context.gl.uniform1f(this._getUniformLocation(t),r),this._nameToUniform1[t]=r)}setUniform1fv(t,r){const e=this._nameToUniform1v[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform1fv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform1v[t]=Array.from(r):F(r,e))}setUniform2f(t,r,e){const f=this._nameToUniform2[t];(void 0===f||r!==f[0]||e!==f[1])&&(this._context.useProgram(this),this._context.gl.uniform2f(this._getUniformLocation(t),r,e),void 0===f?this._nameToUniform2[t]=[r,e]:(f[0]=r,f[1]=e))}setUniform2fv(t,r){const e=this._nameToUniform2[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform2fv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform2[t]=Array.from(r):F(r,e))}setUniform3f(t,r,e,f){const a=this._nameToUniform3[t];(void 0===a||r!==a[0]||e!==a[1]||f!==a[2])&&(this._context.useProgram(this),this._context.gl.uniform3f(this._getUniformLocation(t),r,e,f),void 0===a?this._nameToUniform3[t]=[r,e,f]:(a[0]=r,a[1]=e,a[2]=f))}setUniform3fv(t,r){const e=this._nameToUniform3[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform3fv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform3[t]=Array.from(r):F(r,e))}setUniform4f(t,r,e,f,a){const c=this._nameToUniform4[t];(void 0===c||r!==c[0]||e!==c[1]||f!==c[2]||a!==c[3])&&(this._context.useProgram(this),this._context.gl.uniform4f(this._getUniformLocation(t),r,e,f,a),void 0===c?this._nameToUniform4[t]=[r,e,f,a]:(c[0]=r,c[1]=e,c[2]=f,c[3]=a))}setUniform4fv(t,r){const e=this._nameToUniform4[t];G(e,r)&&(this._context.useProgram(this),this._context.gl.uniform4fv(this._getUniformLocation(t),r),void 0===e?this._nameToUniform4[t]=Array.from(r):F(r,e))}setUniformMatrix3fv(t,r,e=!1,f=!1){const a=this._nameToUniformMatrix3[t];(f?a!==r:function(i,t){return!!(0,U.Wi)(i)||(9!==i.length?G(i,t):9!==i.length||i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]||i[4]!==t[4]||i[5]!==t[5]||i[6]!==t[6]||i[7]!==t[7]||i[8]!==t[8])}(a,r))&&(this._context.useProgram(this),this._context.gl.uniformMatrix3fv(this._getUniformLocation(t),e,r),void 0===a?this._nameToUniformMatrix3[t]=Array.from(r):F(r,a))}setUniformMatrix4fv(t,r,e=!1){const f=this._nameToUniformMatrix4[t];(function(i,t){return!!(0,U.Wi)(i)||(16!==i.length?G(i,t):16!==i.length||i[0]!==t[0]||i[1]!==t[1]||i[2]!==t[2]||i[3]!==t[3]||i[4]!==t[4]||i[5]!==t[5]||i[6]!==t[6]||i[7]!==t[7]||i[8]!==t[8]||i[9]!==t[9]||i[10]!==t[10]||i[11]!==t[11]||i[12]!==t[12]||i[13]!==t[13]||i[14]!==t[14]||i[15]!==t[15])})(f,r)&&(this._context.useProgram(this),this._context.gl.uniformMatrix4fv(this._getUniformLocation(t),e,r),void 0===f?this._nameToUniformMatrix4[t]=Array.from(r):F(r,f))}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){}}function G(i,t){if((0,U.Wi)(i)||i.length!==t.length)return!0;for(let r=0;r<i.length;++r)if(i[r]!==t[r])return!0;return!1}function ot(i,t,r){const e="webgl2"===i.webglVersion?function(i,t){const r=$(i);if("300 es"===function(i,t="100",r="300 es"){const e=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const f of i)if("preprocessor"===f.type){const a=e.exec(f.data);if(a){const c=a[1].replace(/\s\s+/g," ");if(c===r)return c;if(c===t)return f.data="#version "+r,t;throw new Error("unknown glsl version: "+c)}}return i.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(r,"100","300 es"))throw new Error("shader is already glsl 300 es");let e=null,f=null;const a={},c={};for(let P=0;P<r.length;++P){const b=r[P];switch(b.type){case"keyword":35633===t&&"attribute"===b.data?b.data="in":"varying"===b.data&&(b.data=35633===t?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(b.data.trim())&&(b.data=b.data.replace(/(2D|Cube|EXT)/g,"")),35632===t&&"gl_FragColor"===b.data&&(e||(e=Y(r,a,"fragColor"),at(r,e,"vec4")),b.data=e),35632===t&&"gl_FragData"===b.data){const z=lt(r,P+1),w=Y(r,a,"fragData");nt(r,w,"vec4",z,"mediump"),b.data=w}else 35632===t&&"gl_FragDepthEXT"===b.data&&(f||(f=Y(r,a,"gl_FragDepth")),b.data=f);break;case"ident":if(v.indexOf(b.data)>=0){if(35633===t&&rt(r,P))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");b.data in c||(c[b.data]=Y(r,a,b.data)),b.data=c[b.data]}}}for(let P=r.length-1;P>=0;--P){const b=r[P];if("preprocessor"===b.type){const z=b.data.match(/\#extension\s+(.*)\:/);if(z&&z[1]&&B.indexOf(z[1].trim())>=0){const X=r[P+1];r.splice(P,X&&"whitespace"===X.type?2:1)}const w=b.data.match(/\#ifdef\s+(.*)/);w&&w[1]&&B.indexOf(w[1].trim())>=0&&(b.data="#if 1");const j=b.data.match(/\#ifndef\s+(.*)/);j&&j[1]&&B.indexOf(j[1].trim())>=0&&(b.data="#if 0")}}return function(i){return i.map(t=>"eof"!==t.type?t.data:"").join("")}(r)}(r,t):r,f=i.gl,a=f.createShader(t);return f.shaderSource(a,e),f.compileShader(a),(0,R.CG)()&&!f.getShaderParameter(a,f.COMPILE_STATUS)&&(console.error("Compile error in ".concat(35633===t?"vertex":"fragment"," shader")),console.error(f.getShaderInfoLog(a)),console.error(function(i){let t=2;return i.replace(/\n/g,()=>"\n"+function(i){return i>=1e3?i.toString():("  "+i).slice(-3)}(t++)+":")}(e)),"webgl2"===i.webglVersion&&(console.log("Shader source before transpilation:"),console.log(r))),a}function F(i,t){for(let r=0;r<i.length;++r)t[r]=i[r]}},81530:(I,D,g)=>{g.d(D,{Z:()=>U});var N=g(40150);class U{constructor(C,v){this._context=C,this._desc=v,this._context.instanceCounter.increment(N._g.Renderbuffer,this);const y=this._context.gl;this.glName=y.createRenderbuffer(),this._context.bindRenderbuffer(this),y.renderbufferStorage(y.RENDERBUFFER,v.internalFormat,v.width,v.height)}get descriptor(){return this._desc}resize(C,v){const y=this._desc;if(y.width===C&&y.height===v)return;y.width=C,y.height=v;const S=this._context.gl;this._context.bindRenderbuffer(this),S.renderbufferStorage(S.RENDERBUFFER,y.internalFormat,y.width,y.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(N._g.Renderbuffer,this),this._context=null)}}},30070:(I,D,g)=>{g.d(D,{XP:()=>v,RG:()=>S,un:()=>h,UF:()=>y,_V:()=>R}),g(67474);var U=g(60305);function R(u,p){return u.vertexBuffers[p].size/function(u){return u[0].stride}(u.layout[p])}function v(u,p,T,A,n){const o=u.gl,_=u.capabilities.instancing;u.bindBuffer(T);for(const l of A){const m=p.get(l.name);void 0===m&&console.error(`There is no location for vertex attribute '${l.name}' defined.`),l.baseInstance&&!l.divisor&&console.error(`Vertex attribute '${l.name}' uses baseInstanceOffset without divisor.`);const d=(n||(0+l.baseInstance?l.baseInstance:0))*l.stride;if(l.count<=4)o.vertexAttribPointer(m,l.count,l.type,l.normalized,l.stride,l.offset+d),o.enableVertexAttribArray(m),l.divisor>0&&_&&_.vertexAttribDivisor(m,l.divisor);else if(9===l.count)for(let E=0;E<3;E++)o.vertexAttribPointer(m+E,3,l.type,l.normalized,l.stride,l.offset+12*E+d),o.enableVertexAttribArray(m+E),l.divisor>0&&_&&_.vertexAttribDivisor(m+E,l.divisor);else if(16===l.count)for(let E=0;E<4;E++)o.vertexAttribPointer(m+E,4,l.type,l.normalized,l.stride,l.offset+16*E+d),o.enableVertexAttribArray(m+E),l.divisor>0&&_&&_.vertexAttribDivisor(m+E,l.divisor);else console.error("Unsupported vertex attribute element count: "+l.count)}}function y(u,p,T,A){const n=u.gl,o=u.capabilities.instancing;u.bindBuffer(T);for(const _ of A){const l=p.get(_.name);if(_.count<=4)n.disableVertexAttribArray(l),_.divisor&&_.divisor>0&&o&&o.vertexAttribDivisor(l,0);else if(9===_.count)for(let m=0;m<3;m++)n.disableVertexAttribArray(l+m),_.divisor&&_.divisor>0&&o&&o.vertexAttribDivisor(l+m,0);else if(16===_.count)for(let m=0;m<4;m++)n.disableVertexAttribArray(l+m),_.divisor&&_.divisor>0&&o&&o.vertexAttribDivisor(l+m,0);else console.error("Unsupported vertex attribute element count: "+_.count)}u.unbindBuffer(34962)}function S(u){switch(u){case 6406:case 6409:case 36168:case 33778:case 33779:case 37490:case 37491:case 37496:case 37497:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34837:return 12;case 34836:return 16;case 33776:case 33777:case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5}return 0}function h(u){if((0,U.Wi)(u))return 0;if("descriptor"in u)return u.glName?h(u.descriptor):0;const p=u.internalFormat||"pixelFormat"in u&&u.pixelFormat;if(!p)return 0;const T="hasMipmap"in u&&u.hasMipmap?1.3:1,A=u.width*u.height;return S(p)*A*T}},48082:(I,D,g)=>{g.d(D,{Z:()=>y});var N=g(33870),U=g(60305),R=g(40150),C=g(30070);const v=N.Z.getLogger("esri.views.webgl.VertexArrayObject");class y{constructor(h,u,p,T,A=null){this._context=h,this._locations=u,this._layout=p,this._buffers=T,this._indexBuffer=A,this._glName=null,this._initialized=!1,h.instanceCounter.increment(R._g.VAO,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce((h,u)=>h+this._buffers[u].size,(0,U.pC)(this._indexBuffer)?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(h=!0){if(this._context){if(this._glName){var u,p;const T=null==(u=this._context)||null==(p=u.capabilities)?void 0:p.vao;T?(T.deleteVertexArray(this._glName),this._glName=null):v.warn("Leaked WebGL VAO")}if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),h){for(const T in this._buffers)this._buffers[T].dispose(),delete this._buffers[T];this._indexBuffer=(0,U.O3)(this._indexBuffer)}this._context.instanceCounter.decrement(R._g.VAO,this),this._context=null}else(this._glName||h&&Object.getOwnPropertyNames(this._buffers).length>0)&&v.warn("Leaked WebGL VAO")}initialize(){if(this._initialized)return;const h=this._context.capabilities.vao;if(h){const u=h.createVertexArray();h.bindVertexArray(u),this._bindLayout(),h.bindVertexArray(null),this._glName=u}this._initialized=!0}bind(){this.initialize();const h=this._context.capabilities.vao;h?h.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:h,_layout:u,_indexBuffer:p}=this;h||v.error("Vertex buffer dictionary is empty!");const T=this._context.gl;for(const A in h){const n=h[A];n||v.error("Vertex buffer is uninitialized!");const o=u[A];o||v.error("Vertex element descriptor is empty!"),(0,C.XP)(this._context,this._locations,n,o)}(0,U.pC)(p)&&(this._context.capabilities.vao?T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,p.glName):this._context.bindBuffer(p))}unbind(){this.initialize();const h=this._context.capabilities.vao;h?h.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:h,_layout:u}=this;h||v.error("Vertex buffer dictionary is empty!");for(const p in h){const T=h[p];T||v.error("Vertex buffer is uninitialized!"),(0,C.UF)(this._context,this._locations,T,u[p])}(0,U.pC)(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}},82705:(I,D,g)=>{function N(s,x,F=32774,k=[0,0,0,0]){return{srcRgb:s,srcAlpha:s,dstRgb:x,dstAlpha:x,opRgb:F,opAlpha:F,color:{r:k[0],g:k[1],b:k[2],a:k[3]}}}function U(s,x,F,k,et=32774,i=32774,t=[0,0,0,0]){return{srcRgb:s,srcAlpha:x,dstRgb:F,dstAlpha:k,opRgb:et,opAlpha:i,color:{r:t[0],g:t[1],b:t[2],a:t[3]}}}g.d(D,{jp:()=>ot,zp:()=>v,BK:()=>S,LZ:()=>y,sm:()=>l,wK:()=>U,if:()=>N});const R={face:1029,mode:2305},C={face:1028,mode:2305},v=s=>2===s?R:1===s?C:null,y={zNear:0,zFar:1},S={r:!0,g:!0,b:!0,a:!0};function h(s){return E.intern(s)}function u(s){return O.intern(s)}function p(s){return K.intern(s)}function T(s){return J.intern(s)}function A(s){return q.intern(s)}function n(s){return Y.intern(s)}function o(s){return at.intern(s)}function _(s){return lt.intern(s)}function l(s){return ht.intern(s)}class m{constructor(x,F){this.makeKey=x,this.makeRef=F,this.interns=new Map}intern(x){if(!x)return null;const F=this.makeKey(x),k=this.interns;return k.has(F)||k.set(F,this.makeRef(x)),k.get(F)}}function d(s){return"["+s.join(",")+"]"}const E=new m(M,s=>Z({__tag:"Blending"},s));function M(s){return s?d([s.srcRgb,s.srcAlpha,s.dstRgb,s.dstAlpha,s.opRgb,s.opAlpha,s.color.r,s.color.g,s.color.b,s.color.a]):null}const O=new m(W,s=>Z({__tag:"Culling"},s));function W(s){return s?d([s.face,s.mode]):null}const K=new m($,s=>Z({__tag:"PolygonOffset"},s));function $(s){return s?d([s.factor,s.units]):null}const J=new m(B,s=>Z({__tag:"DepthTest"},s));function B(s){return s?d([s.func]):null}const q=new m(rt,s=>Z({__tag:"StencilTest"},s));function rt(s){return s?d([s.function.func,s.function.ref,s.function.mask,s.operation.fail,s.operation.zFail,s.operation.zPass]):null}const Y=new m(tt,s=>Z({__tag:"DepthWrite"},s));function tt(s){return s?d([s.zNear,s.zFar]):null}const at=new m(nt,s=>Z({__tag:"ColorWrite"},s));function nt(s){return s?d([s.r,s.g,s.b,s.a]):null}const lt=new m(st,s=>Z({__tag:"StencilWrite"},s));function st(s){return s?d([s.mask]):null}const ht=new m(function(s){return s?d([M(s.blending),W(s.culling),$(s.polygonOffset),B(s.depthTest),rt(s.stencilTest),tt(s.depthWrite),nt(s.colorWrite),st(s.stencilWrite)]):null},s=>({blending:h(s.blending),culling:u(s.culling),polygonOffset:p(s.polygonOffset),depthTest:T(s.depthTest),stencilTest:A(s.stencilTest),depthWrite:n(s.depthWrite),colorWrite:o(s.colorWrite),stencilWrite:_(s.stencilWrite)}));class ot{constructor(x){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=x}setPipeline(x){(this._pipelineInvalid||x!==this._pipeline)&&(this.setBlending(x.blending),this.setCulling(x.culling),this.setPolygonOffset(x.polygonOffset),this.setDepthTest(x.depthTest),this.setStencilTest(x.stencilTest),this.setDepthWrite(x.depthWrite),this.setColorWrite(x.colorWrite),this.setStencilWrite(x.stencilWrite),this._pipeline=x),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(x){this._blending=this.setSubState(x,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(x){this._culling=this.setSubState(x,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(x){this._polygonOffset=this.setSubState(x,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(x){this._depthTest=this.setSubState(x,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(x){this._stencilTest=this.setSubState(x,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(x){this._depthWrite=this.setSubState(x,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(x){this._colorWrite=this.setSubState(x,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(x){this._stencilWrite=this.setSubState(x,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(x,F,k,et){return(k||x!==F)&&(et(x),this._pipelineInvalid=!0),x}}}}]);