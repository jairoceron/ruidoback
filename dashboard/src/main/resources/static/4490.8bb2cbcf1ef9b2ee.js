"use strict";var se=Object.defineProperty,ie=Object.defineProperties,re=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,te=(P,m,l)=>m in P?se(P,m,{enumerable:!0,configurable:!0,writable:!0,value:l}):P[m]=l,Q=(P,m)=>{for(var l in m||(m={}))oe.call(m,l)&&te(P,l,m[l]);if(ee)for(var l of ee(m))le.call(m,l)&&te(P,l,m[l]);return P},ne=(P,m)=>ie(P,re(m));(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[4490],{84490:(P,m,l)=>{l.r(m),l.d(m,{default:()=>$});var D=l(61921),L=l(40662),A=l(22795),j=l(60305),b=l(52917),T=l(89096),M=l(90097),W=l(32620),y=l(68310),O=l(44654),R=l(54135),v=l(31378),f=l(99303),q=l(25808),N=l(26047),k=l(76009);const J={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class ${constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}load(i){var o=this;return(0,D.Z)(function*(){const a=[];yield o._checkProjection(i.spatialReference);let u=null;i.url&&(u=(yield(0,L.default)(i.url,{responseType:"json"})).data,yield(0,R.O3)(u));const p=(0,R.my)(u,{geometryType:i.geometryType}),d=i.fields||p.fields||[],_=null!=i.hasZ?i.hasZ:p.hasZ,g=p.geometryType,h=i.objectIdField||("number"===p.objectIdFieldType?p.objectIdFieldName:"OBJECTID")||"OBJECTID",F=i.spatialReference||T.Zn;let e=i.timeInfo;if("string"===p.objectIdFieldType&&a.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."}),d===p.fields&&p.unknownFields.length>0&&a.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:p.unknownFields}}),h){let s=null;d.some(E=>E.name===h&&(s=E,!0))?(s.type="esriFieldTypeOID",s.editable=!1,s.nullable=!1):d.unshift({alias:h,name:h,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const s of d){if(null==s.name&&(s.name=s.alias),null==s.alias&&(s.alias=s.name),!s.name)throw new A.Z("geojson-layer:invalid-field-name","field name is missing",{field:s});if(s.name===h&&(s.type="esriFieldTypeOID"),-1===N.v.jsonValues.indexOf(s.type))throw new A.Z("geojson-layer:invalid-field-type",`invalid type for field "${s.name}"`,{field:s})}const t={};o._requiredFields=[];for(const s of d)if("esriFieldTypeOID"!==s.type&&"esriFieldTypeGlobalID"!==s.type){s.editable=null==s.editable||!!s.editable,s.nullable=null==s.nullable||!!s.nullable;const E=(0,k.os)(s);s.nullable||void 0!==E?t[s.name]=E:o._requiredFields.push(s)}if(o._fieldsIndex=new q.Z(d),e){if(e.startTimeField){const s=o._fieldsIndex.get(e.startTimeField);s?(e.startTimeField=s.name,s.type="esriFieldTypeDate"):e.startTimeField=null}if(e.endTimeField){const s=o._fieldsIndex.get(e.endTimeField);s?(e.endTimeField=s.name,s.type="esriFieldTypeDate"):e.endTimeField=null}if(e.trackIdField){const s=o._fieldsIndex.get(e.trackIdField);s?e.trackIdField=s.name:(e.trackIdField=null,a.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:e}}))}e.startTimeField||e.endTimeField||(a.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:e}}),e=null)}const n=g?(0,v.bU)(g):null,r={warnings:a,featureErrors:[],layerDefinition:ne(Q({},J),{drawingInfo:n,templates:(0,v.Hq)(t),extent:null,geometryType:g,objectIdField:h,fields:d,hasZ:!!_,timeInfo:e})};o._queryEngine=new O.Z({fields:d,geometryType:g,hasM:!1,hasZ:_,objectIdField:h,spatialReference:F,timeInfo:e,featureStore:new W.Z({geometryType:g,hasM:!1,hasZ:_}),cacheSpatialQueries:!0}),o._createDefaultAttributes=(0,v.Dm)(t,h),o._nextObjectId=p.maxObjectId+1;const c=(0,R.lG)(u,{geometryType:g,hasZ:_,objectIdField:"number"===p.objectIdFieldType?h:null});if(!(0,T.fS)(F,T.Zn))for(const s of c)(0,j.pC)(s.geometry)&&(s.geometry=(0,M.GH)((0,y.iV)((0,M.di)(s.geometry,g,_,!1),T.Zn,F)));return o._loadInitialFeatures(r,c),r})()}applyEdits(i){var o=this;return(0,D.Z)(function*(){const{spatialReference:a,geometryType:u}=o._queryEngine;return yield Promise.all([(0,f.b)(a,u),(0,y._W)(i.adds,a),(0,y._W)(i.updates,a)]),o._applyEdits(i)})()}queryFeatures(i={},o={}){return this._queryEngine.executeQuery(i,o.signal)}queryFeatureCount(i={},o={}){return this._queryEngine.executeQueryForCount(i,o.signal)}queryObjectIds(i={},o={}){return this._queryEngine.executeQueryForIds(i,o.signal)}queryExtent(i={},o={}){return this._queryEngine.executeQueryForExtent(i,o.signal)}querySnapping(i,o={}){return this._queryEngine.executeQueryForSnapping(i,o.signal)}_loadInitialFeatures(i,o){const{featureStore:a,objectIdField:u}=this._queryEngine,p=[];for(const d of o){const _=this._createDefaultAttributes(),g=(0,f.O0)(this._fieldsIndex,_,d.attributes,this._requiredFields,!0,i.warnings);g?i.featureErrors.push(g):(this._assignObjectId(_,d.attributes,!0),d.attributes=_,d.objectId=_[u],p.push(d))}if(a.addMany(p),i.layerDefinition.extent=this._queryEngine.fullExtent,i.layerDefinition.timeInfo){const{start:d,end:_}=this._queryEngine.timeExtent;i.layerDefinition.timeInfo.timeExtent=[d,_]}return i}_applyEdits(i){const{adds:o,updates:a,deletes:u}=i,p={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(o&&o.length&&this._applyAddEdits(p,o),a&&a.length&&this._applyUpdateEdits(p,a),u&&u.length){for(const d of u)p.deleteResults.push((0,f.d1)(d));this._queryEngine.featureStore.removeManyById(u)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:p}}_applyAddEdits(i,o){const{addResults:a}=i,{geometryType:u,hasM:p,hasZ:d,objectIdField:_,spatialReference:g,featureStore:h}=this._queryEngine,F=[];for(const e of o){if(e.geometry&&u!==(0,b.Ji)(e.geometry)){a.push((0,f.av)("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),n=(0,f.O0)(this._fieldsIndex,t,e.attributes,this._requiredFields);n?a.push(n):(this._assignObjectId(t,e.attributes),e.attributes=t,null!=e.uid&&(i.uidToObjectId[e.uid]=e.attributes[_]),(0,j.pC)(e.geometry)&&(e.geometry=(0,y.iV)((0,f.og)(e.geometry,g),e.geometry.spatialReference,g)),F.push(e),a.push((0,f.d1)(e.attributes[_])))}h.addMany((0,M.Yn)([],F,u,d,p,_))}_applyUpdateEdits({updateResults:i},o){const{geometryType:a,hasM:u,hasZ:p,objectIdField:d,spatialReference:_,featureStore:g}=this._queryEngine;for(const h of o){const{attributes:F,geometry:e}=h,t=F&&F[d];if(null==t){i.push((0,f.av)(`Identifier field ${d} missing`));continue}if(!g.has(t)){i.push((0,f.av)(`Feature with object id ${t} missing`));continue}const n=(0,M.EI)(g.getFeature(t),a,p,u);if((0,j.pC)(e)){if(a!==(0,b.Ji)(e)){i.push((0,f.av)("Incorrect geometry type."));continue}n.geometry=(0,y.iV)((0,f.og)(e,_),e.spatialReference,_)}if(F){const r=(0,f.O0)(this._fieldsIndex,n.attributes,F,this._requiredFields);if(r){i.push(r);continue}}g.add((0,M.XA)(n,a,p,u,d)),i.push((0,f.d1)(t))}}_assignObjectId(i,o,a=!1){const u=this._queryEngine.objectIdField;i[u]=a&&isFinite(o[u])?o[u]:this._nextObjectId++}_checkProjection(i){return(0,D.Z)(function*(){try{yield(0,y._W)(T.Zn,i)}catch(o){throw new A.Z("geojson-layer","Projection not supported")}})()}}},54135:(P,m,l)=>{l.d(m,{lG:()=>F,q9:()=>b,my:()=>h,O3:()=>g});var D=l(22795),L=l(82535),A=l(82490);const j={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function b(e){return j[e]}function*T(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*M(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function y(e){for(const t of e)if(t.length>2)return!0;return!1}function v(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n],c=e[(n+1)%e.length];t+=r[0]*c[1]-c[0]*r[1]}return t<=0}function f(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function q(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return u(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const r of t.coordinates)u(e,r,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const r of t.coordinates){o(e,r[0],n);for(let c=1;c<r.length;c++)a(e,r[c],n)}return e}(e,t,n);case"Point":return function(e,t,n){return d(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const r=t.coordinates;o(e,r[0],n);for(let c=1;c<r.length;c++)a(e,r[c],n);return e}(e,t,n)}}function o(e,t,n){const r=f(t);!function(e){return!v(e)}(r)?u(e,r,n):p(e,r,n)}function a(e,t,n){const r=f(t);!function(e){return v(e)}(r)?u(e,r,n):p(e,r,n)}function u(e,t,n){for(const r of t)d(e,r,n);e.lengths.push(t.length)}function p(e,t,n){for(let r=t.length-1;r>=0;r--)d(e,t[r],n);e.lengths.push(t.length)}function d(e,t,n){const[r,c,s]=t;e.coords.push(r,c),n.hasZ&&e.coords.push(s||0)}function _(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function g(e){if(!e)throw new D.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new D.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,r=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!r.test(n))throw new D.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function h(e,t={}){const n=[],r=new Set,c=new Set;let s,E=!1,G=Number.NEGATIVE_INFINITY,I=null,C=!1,{geometryType:U=null}=t,V=!1;for(const w of T(e)){const{geometry:K,properties:x,id:B}=w;if((!K||(U||(U=b(K.type)),b(K.type)===U))&&(E||(E=y(M(K))),C||(C=null!=B,C&&(s=typeof B,"number"===s&&(I=Object.keys(x).filter(Z=>x[Z]===B)))),C&&"number"===s&&null!=B&&(G=Math.max(G,B),I.length>1?I=I.filter(Z=>x[Z]===B):1===I.length&&(I=x[I[0]]===B?I:[])),!V&&x)){let Z=!0;for(const S in x){if(r.has(S))continue;const Y=x[S];if(null==Y){Z=!1,c.add(S);continue}const X=_(Y);"unknown"!==X?(c.delete(S),r.add(S),n.push({name:S,alias:S,type:X})):c.add(S)}V=Z}}const z=I&&1===I.length&&I[0]||null;if(z)for(const w of n)w.name===z&&(w.type="esriFieldTypeOID");return{fields:n,geometryType:U,hasZ:E,maxObjectId:Math.max(0,G),objectIdFieldName:z,objectIdFieldType:s,unknownFields:Array.from(c)}}function F(e,t){return Array.from(function*(e,t={}){const{geometryType:n,objectIdField:r}=t;for(const s of e){var c;const{geometry:E,properties:G,id:I}=s;if(E&&b(E.type)!==n)continue;const C=G||{};let U=null!=(c=C[r])?c:null;r&&null!=I&&!C[r]&&(C[r]=U=I),yield new L.ZP(E?q(new A.Z,E,t):null,C,null,U)}}(T(e),t))}},31378:(P,m,l)=>{l.d(m,{MS:()=>W,Dm:()=>T,Hq:()=>M,bU:()=>b});var D=l(67474),L=l(85071),A=l(26729),j=l(21984);function b(y){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===y||"esriGeometryMultipoint"===y?j.I4:"esriGeometryPolyline"===y?j.ET:j.lF}}}function T(y,O){if((0,D.Z)("csp-restrictions"))return()=>Q({[O]:null},y);try{let R=`this.${O} = null;`;for(const f in y)R+=`this${f.indexOf(".")?`["${f}"]`:`.${f}`} = ${JSON.stringify(y[f])};`;const v=new Function(R);return()=>new v}catch(R){return()=>Q({[O]:null},y)}}function M(y={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,L.d9)(y)}}]}function W(y,O){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:y},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:O,supportsDelete:O,supportsEditing:O,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:O,supportsExceedsLimitStatistics:!0},query:A.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:O,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);