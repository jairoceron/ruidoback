"use strict";var Et=Object.defineProperty,Dt=Object.defineProperties,Xt=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,Rt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,xt=(K,A,O)=>A in K?Et(K,A,{enumerable:!0,configurable:!0,writable:!0,value:O}):K[A]=O,St=(K,A)=>{for(var O in A||(A={}))Rt.call(A,O)&&xt(K,O,A[O]);if(kt)for(var O of kt(A))wt.call(A,O)&&xt(K,O,A[O]);return K},vt=(K,A)=>Dt(K,Xt(A));(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[7475],{38005:(K,A,O)=>{O.d(A,{RL:()=>B,bk:()=>M,Fp:()=>ut,UV:()=>$});var pt=O(52917),mt=O(94368),ot=O(35779);function ut(a){if(!a)return null;switch(a.type){case"CIMPointSymbol":{const m=a.symbolLayers;return m&&1===m.length?ut(m[0]):null}case"CIMVectorMarker":{const m=a.markerGraphics;if(!m||1!==m.length)return null;const g=m[0];if(!g)return null;const h=g.geometry;if(!h)return null;const v=g.symbol;return!v||"CIMPolygonSymbol"!==v.type&&"CIMLineSymbol"!==v.type?null:{geom:h,asFill:"CIMPolygonSymbol"===v.type}}case"sdf":return{geom:a.geom,asFill:a.asFill}}return null}function W(a){let m=1/0,g=-1/0,h=1/0,v=-1/0;for(const S of a)for(const d of S)d[0]<m&&(m=d[0]),d[0]>g&&(g=d[0]),d[1]<h&&(h=d[1]),d[1]>v&&(v=d[1]);return[m,h,g,v]}function M(a){return a?a.rings?W(a.rings):a.paths?W(a.paths):(0,pt.YX)(a)?[a.xmin,a.ymin,a.xmax,a.ymax]:null:null}function $(a,m,g,h,v){const[S,d,b,I]=a;if(b<S||I<d)return[0,0,0];const k=b-S,N=I-d,X=Math.floor(31.5),E=(128-2*(X+1))/Math.max(k,N),w=Math.round(k*E)+2*X,G=Math.round(N*E)+2*X;let Z=1;m&&(Z=G/E/(m.ymax-m.ymin));let D=0,z=0;return h&&(v?m&&g&&m.ymax-m.ymin>0&&(D=h.x/(g*((m.xmax-m.xmin)/(m.ymax-m.ymin))),z=h.y/g):(D=h.x,z=h.y)),D=.5*(m.xmax+m.xmin)+D*(m.xmax-m.xmin),z=.5*(m.ymax+m.ymin)+z*(m.ymax-m.ymin),D-=S,z-=d,D*=E,z*=E,D+=X,z+=X,[Z,D/w-.5,-(z/G-.5)]}function B(a){const m=function(a){return a?a.rings?a.rings:a.paths?a.paths:void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax?[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]:null:null}(a.geom),g=function(a){let m=1/0,g=-1/0,h=1/0,v=-1/0;for(const S of a)for(const d of S)d[0]<m&&(m=d[0]),d[0]>g&&(g=d[0]),d[1]<h&&(h=d[1]),d[1]>v&&(v=d[1]);return new ot.Z(m,h,g-m,v-h)}(m),S=Math.floor(31.5),d=(128-2*(S+1))/Math.max(g.width,g.height),b=Math.round(g.width*d)+2*S,I=Math.round(g.height*d)+2*S,k=[];for(const x of m)if(x&&x.length>1){const L=[];for(const X of x){let[E,w]=X;E-=g.x,w-=g.y,E*=d,w*=d,E+=S-.5,w+=S-.5,L.push(a.asFill?[E,w]:[Math.round(E),Math.round(w)])}if(a.asFill){const X=L.length-1;L[0][0]===L[X][0]&&L[0][1]===L[X][1]||L.push(L[0])}k.push(L)}const N=function(a,m,g,h){const v=m*g,S=new Array(v),d=h*h+1;for(let b=0;b<v;++b)S[b]=d;for(const b of a){const I=b.length;for(let k=1;k<I;++k){const N=b[k-1],x=b[k];let L,X,E,w;N[0]<x[0]?(L=N[0],X=x[0]):(L=x[0],X=N[0]),N[1]<x[1]?(E=N[1],w=x[1]):(E=x[1],w=N[1]);let G=Math.floor(L)-h,Z=Math.floor(X)+h,D=Math.floor(E)-h,z=Math.floor(w)+h;G<0&&(G=0),Z>m&&(Z=m),D<0&&(D=0),z>g&&(z=g);const R=x[0]-N[0],yt=x[1]-N[1],ht=R*R+yt*yt;for(let F=G;F<Z;F++)for(let c=D;c<z;c++){let V,st,T=(F-N[0])*R+(c-N[1])*yt;T<0?(V=N[0],st=N[1]):T>ht?(V=x[0],st=x[1]):(T/=ht,V=N[0]+T*R,st=N[1]+T*yt);const t=(F-V)*(F-V)+(c-st)*(c-st),e=(g-c-1)*m+F;t<S[e]&&(S[e]=t)}}}for(let b=0;b<v;++b)S[b]=Math.sqrt(S[b]);return S}(k,b,I,S);return a.asFill&&function(a,m,g,h,v){for(const S of a){const d=S.length;for(let b=1;b<d;++b){const I=S[b-1],k=S[b];let N,x,L,X;I[0]<k[0]?(N=I[0],x=k[0]):(N=k[0],x=I[0]),I[1]<k[1]?(L=I[1],X=k[1]):(L=k[1],X=I[1]);let E=Math.floor(N),w=Math.floor(x)+1,G=Math.floor(L),Z=Math.floor(X)+1;E<h&&(E=h),w>m-h&&(w=m-h),G<h&&(G=h),Z>g-h&&(Z=g-h);for(let D=G;D<Z;++D){if(I[1]>D==k[1]>D)continue;const z=(g-D-1)*m;for(let R=E;R<w;++R)R<(k[0]-I[0])*(D-I[1])/(k[1]-I[1])+I[0]&&(v[z+R]=-v[z+R]);for(let R=h;R<E;++R)v[z+R]=-v[z+R]}}}}(k,b,I,S,N),[lt(N,S),b,I]}function lt(a,m){const g=2*m,h=a.length,v=new Uint8Array(4*h);for(let S=0;S<h;++S)(0,mt.I)(.5-a[S]/g,v,4*S);return v}},47475:(K,A,O)=>{O.d(A,{S:()=>st,c:()=>S});var pt=O(61921),mt=O(68322),ot=O(33870),ut=O(12788),C=O(9171),at=O(8982),J=O(79391),W=O(38005),M=O(60194),$=O(40602);const B=ot.Z.getLogger("esri.symbols.cim.cimAnalyzer");function H(t){switch(t){case"Butt":return 0;case"Square":return 2;default:return 1}}function Y(t){switch(t){case"Bevel":return 0;case"Miter":return 2;default:return 1}}function lt(t){switch(t){default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function a(t){switch(t){default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function h(t,e,r,o){let i;t[e]?i=t[e]:(i={},t[e]=i),i[r]=o}function v(t){const e=t.markerPlacement;return e&&e.angleToLine?1:0}function S(t,e,r,o){return d.apply(this,arguments)}function d(){return(d=(0,pt.Z)(function*(t,e,r,o){const i=null!=r?r:[];if(!t)return i;let u,y;const n={};if("CIMSymbolReference"!==t.type)return B.error("Expect cim type to be 'CIMSymbolReference'"),i;if(u=t.symbol,y=t.primitiveOverrides,y){const f=[];for(const p of y){const s=p.valueExpressionInfo;if(s&&e){const _=(0,at.Yi)(s.expression,e.spatialReference,e.fields).then(U=>{U&&h(n,p.primitiveName,p.propertyName,U)});f.push(_)}else null!=p.value&&h(n,p.primitiveName,p.propertyName,p.value)}yield Promise.all(f)}switch(u.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":b(u,y,n,e,i,o)}return i})).apply(this,arguments)}function b(t,e,r,o,i,u){if(!t)return;const y=t.symbolLayers;if(!y)return;let n;const f=J.B$.getSize(t);"CIMPointSymbol"===t.type&&"Map"===t.angleAlignment&&(n=1);let p=y.length;for(;p--;){const s=y[p];if(!s||!1===s.enable)continue;const l=[];switch(J.E0.findApplicableOverrides(s,e,l),s.type){case"CIMSolidFill":I(s,r,l,o,i);break;case"CIMPictureFill":k(s,r,l,o,i);break;case"CIMHatchFill":N(s,r,l,o,i);break;case"CIMGradientFill":x(s,r,l,o,i);break;case"CIMSolidStroke":L(s,r,l,o,i,"CIMPolygonSymbol"===t.type,f);break;case"CIMPictureStroke":X(s,r,l,o,i,"CIMPolygonSymbol"===t.type,f);break;case"CIMGradientStroke":E(s,r,l,o,i,"CIMPolygonSymbol"===t.type,f);break;case"CIMCharacterMarker":if(w(s,r,l,o,i))break;break;case"CIMPictureMarker":if(w(s,r,l,o,i))break;"CIMLineSymbol"===t.type&&(n=v(s)),G(s,r,l,o,i,n,f);break;case"CIMVectorMarker":if(w(s,r,l,o,i))break;"CIMLineSymbol"===t.type&&(n=v(s)),Z(s,r,l,o,i,n,f,u);break;default:B.error("Cannot analyze CIM layer",s.type)}}}function I(t,e,r,o,i){const u=t.primitiveName,y=(0,M.NO)(t.color),[n,f]=T(r,u),p=(0,C.hP)(JSON.stringify(t)+f).toString();i.push({type:"fill",templateHash:p,materialHash:n?()=>p:p,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:c(u,e,"Color",o,y,F),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t.effects})}function k(t,e,r,o,i){const u=t.primitiveName,y=t.tintColor?(0,M.NO)(t.tintColor):{r:255,g:255,b:255,a:1},[n,f]=T(r,u),p=(0,C.hP)(JSON.stringify(t)+f).toString(),s=(0,C.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();i.push({type:"fill",templateHash:p,materialHash:n?()=>s:s,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:c(u,e,"TintColor",o,y,F),height:c(u,e,"Height",o,t.height),scaleX:c(u,e,"ScaleX",o,t.scaleX),angle:c(u,e,"Rotation",o,t.rotation),offsetX:c(u,e,"OffsetX",o,t.offsetX),offsetY:c(u,e,"OffsetY",o,t.offsetY)})}function N(t,e,r,o,i){const u=["Rotation","OffsetX","OffsetY"],y=r.filter(_=>_.primitiveName!==t.primitiveName&&-1===u.indexOf(_.propertyName)),n=t.primitiveName,[f,p]=T(r,n),s=(0,C.hP)(JSON.stringify(t)+p).toString(),l=(0,C.hP)(`${t.separation}${JSON.stringify(t.lineSymbol)}`).toString();i.push({type:"fill",templateHash:s,materialHash:f?V(l,e,y,o):l,cim:t,materialOverrides:y,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:c(n,e,"Separation",o,t.separation),scaleX:1,angle:c(n,e,"Rotation",o,t.rotation),offsetX:c(n,e,"OffsetX",o,t.offsetX),offsetY:c(n,e,"OffsetY",o,t.offsetY)})}function x(t,e,r,o,i){const u=t.primitiveName,[y,n]=T(r,u),f=(0,C.hP)(JSON.stringify(t)+n).toString();i.push({type:"fill",templateHash:f,materialHash:y?V(f,e,r,o):f,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function L(t,e,r,o,i,u,y){const n=t.primitiveName,f=(0,M.NO)(t.color),p=void 0!==t.width?t.width:4,s=H(t.capStyle),l=Y(t.joinStyle),_=t.miterLimit,[U,P]=T(r,n),j=(0,C.hP)(JSON.stringify(t)+P).toString();i.push({type:"line",templateHash:j,materialHash:U?()=>j:j,cim:t,materialOverrides:null,isOutline:u,colorLocked:t.colorLocked,effects:t.effects,color:c(n,e,"Color",o,f,F),width:c(n,e,"Width",o,p),cap:c(n,e,"CapStyle",o,s),join:c(n,e,"JoinStyle",o,l),miterLimit:c(n,e,"MiterLimit",o,_),referenceWidth:y,zOrder:ht(t.name),isDashed:!1})}function X(t,e,r,o,i,u,y){const n=(0,C.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),f=t.primitiveName,p=(0,M.NO)(t.tintColor),s=void 0!==t.width?t.width:4,l=H(t.capStyle),_=Y(t.joinStyle),U=t.miterLimit,[P,j]=T(r,f),Q=(0,C.hP)(JSON.stringify(t)+j).toString();i.push({type:"line",templateHash:Q,materialHash:P?()=>n:n,cim:t,materialOverrides:null,isOutline:u,colorLocked:t.colorLocked,effects:t.effects,color:c(f,e,"TintColor",o,p,F),width:c(f,e,"Width",o,s),cap:c(f,e,"CapStyle",o,l),join:c(f,e,"JoinStyle",o,_),miterLimit:c(f,e,"MiterLimit",o,U),referenceWidth:y,zOrder:ht(t.name),isDashed:!1})}function E(t,e,r,o,i,u,y){const n=t.primitiveName,f=void 0!==t.width?t.width:4,p=H(t.capStyle),s=Y(t.joinStyle),l=t.miterLimit,[_,U]=T(r,n),P=(0,C.hP)(JSON.stringify(t)+U).toString();i.push({type:"line",templateHash:P,materialHash:_?V(P,e,r,o):P,cim:t,materialOverrides:null,isOutline:u,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},width:c(n,e,"Width",o,f),cap:c(n,e,"CapStyle",o,p),join:c(n,e,"JoinStyle",o,s),miterLimit:c(n,e,"MiterLimit",o,l),referenceWidth:y,zOrder:ht(t.name),isDashed:!1})}function w(t,e,r,o,i){const u=t.markerPlacement;if(!u||"CIMMarkerPlacementInsidePolygon"!==u.type)return!1;const y=u,n=["Rotation","OffsetX","OffsetY"],f=r.filter(_=>_.primitiveName!==t.primitiveName&&-1===n.indexOf(_.propertyName)),[p,s]=T(r,y.primitiveName),l=(0,C.hP)(JSON.stringify(t)+s).toString();return i.push({type:"fill",templateHash:l,materialHash:p?V(l,e,f,o):l,cim:t,materialOverrides:f,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:c(y.primitiveName,e,"StepY",o,y.stepY),scaleX:1,angle:c(y.primitiveName,e,"GridAngle",o,y.gridAngle),offsetX:c(y.primitiveName,e,"OffsetX",o,y.offsetX),offsetY:c(y.primitiveName,e,"OffsetY",o,y.offsetY)}),!0}function G(t,e,r,o,i,u,y){const n=t.primitiveName,f=t.size,p=t.scaleX,s=t.rotation,l=t.offsetX,_=t.offsetY,U=t.tintColor?(0,M.NO)(t.tintColor):{r:255,g:255,b:255,a:1},P=(0,C.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),[j,Q]=T(r,n),tt=(0,C.hP)(JSON.stringify(t)+Q).toString();i.push({type:"marker",templateHash:tt,materialHash:j?()=>P:P,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:!1,alignment:u,size:c(n,e,"Size",o,f),scaleX:c(n,e,"ScaleX",o,p),rotation:c(n,e,"Rotation",o,s),offsetX:c(n,e,"OffsetX",o,l),offsetY:c(n,e,"OffsetY",o,_),color:c(n,e,"TintColor",o,U,F),anchorPoint:t.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:y,sizeRatio:1,markerPlacement:t.markerPlacement})}function Z(t,e,r,o,i,u,y,n){const f=t.markerGraphics;if(!f)return;let p=0;if(t.scaleSymbolsProportionally){const s=t.frame;s&&(p=s.ymax-s.ymin)}for(const s of f)if(s){const l=s.symbol;if(!l)continue;switch(l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":z(t,s,r,e,o,i,u,y,p,n);break;case"CIMTextSymbol":D(t,s,e,r,o,i,u,y,p)}}}function D(t,e,r,o,i,u,y,n,f){J.E0.findApplicableOverrides(e,o,[]);const s=e.geometry;if(!("x"in s)||!("y"in s))return;const l=e.symbol,_=function(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}(l),U=function(t){let e="normal",r="normal";if(t){const o=t.toLowerCase();-1!==o.indexOf("italic")?e="italic":-1!==o.indexOf("oblique")&&(e="oblique"),-1!==o.indexOf("bold")?r="bold":-1!==o.indexOf("light")&&(r="lighter")}return{style:e,weight:r}}(l.fontStyleName);l.font=St({family:l.fontFamilyName,decoration:_},U);const P=t.frame,tt=t.size/f,et=t.primitiveName,it=(l.height||0)*tt,rt=l.angle||0,gt=((l.offsetX||0)+(s.x-.5*(P.xmin+P.xmax)))*tt,q=((l.offsetY||0)+(s.y-.5*(P.ymin+P.ymax)))*tt,_t=(0,M.NO)(J.B$.getFillColor(l));let Ot=(0,M.NO)(J.B$.getStrokeColor(l)),dt=J.B$.getStrokeWidth(l);dt||(Ot=(0,M.NO)(J.B$.getFillColor(l.haloSymbol)),dt=l.haloSize*tt);let ct="";for(const nt of o)nt.primitiveName===et&&void 0!==nt.value&&(ct+=`-${nt.primitiveName}-${nt.propertyName}-${JSON.stringify(nt.value)}`);const Pt=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),Mt=(0,C.hP)(JSON.stringify(e)+Pt+ct).toString();u.push({type:"text",templateHash:Mt,materialHash:()=>(0,C.hP)(JSON.stringify(l.font)).toString(),cim:l,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,alignment:y,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,fontName:l.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:c(et,r,"Size",i,it),angle:c(et,r,"Rotation",i,rt),offsetX:c(et,r,"OffsetX",i,gt),offsetY:c(et,r,"OffsetY",i,q),horizontalAlignment:lt(l.horizontalAlignment),verticalAlignment:a(l.verticalAlignment),text:c(e.primitiveName,r,"TextString",i,e.textString,M.X3,l.textCase),color:_t,outlineColor:Ot,outlineSize:dt,referenceSize:n,sizeRatio:1,markerPlacement:t.markerPlacement})}function z(t,e,r,o,i,u,y,n,f,p){const l=e.geometry;if(!l)return;const _=e.symbol.symbolLayers;if(!_)return;if(p)return void R(t,e,o,r,i,u,y,n,f);let U=_.length;for(;U--;){const P=_[U];if(P&&!1!==P.enable)switch(P.type){case"CIMSolidFill":case"CIMSolidStroke":{const j=(0,W.bk)(l);if(!j)continue;const[Q,tt,et]=(0,W.UV)(j,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),it="CIMSolidFill"===P.type,rt={type:"sdf",geom:l,asFill:it},gt=t.primitiveName,q=t.size,_t=t.rotation||0,Ot=t.offsetX,dt=t.offsetY,ct=P.primitiveName,Pt=(0,M.NO)(it?J.B$.getFillColor(P):J.B$.getStrokeColor(P)),Mt=it?{r:0,g:0,b:0,a:0}:(0,M.NO)(J.B$.getStrokeColor(P)),nt=J.B$.getStrokeWidth(P);if(!it&&!nt)break;let bt=!1,Nt="";for(const ft of r)ft.primitiveName!==ct&&ft.primitiveName!==gt||(void 0!==ft.value?Nt+=`-${ft.primitiveName}-${ft.propertyName}-${JSON.stringify(ft.value)}`:ft.valueExpressionInfo&&(bt=!0));const Lt=JSON.stringify(vt(St({},t),{markerGraphics:null})),Ct=(0,C.hP)(JSON.stringify(rt)).toString(),It={type:"marker",templateHash:(0,C.hP)(JSON.stringify(e)+JSON.stringify(P)+Lt+Nt).toString(),materialHash:bt?()=>Ct:Ct,cim:rt,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:y,anchorPoint:{x:tt,y:et},isAbsoluteAnchorPoint:!1,size:c(t.primitiveName,o,"Size",i,q),rotation:c(t.primitiveName,o,"Rotation",i,_t),offsetX:c(t.primitiveName,o,"OffsetX",i,Ot),offsetY:c(t.primitiveName,o,"OffsetY",i,dt),scaleX:1,frameHeight:f,rotateClockwise:t.rotateClockwise,referenceSize:n,sizeRatio:Q,color:c(ct,o,"Color",i,Pt,F),outlineColor:c(ct,o,"Color",i,Mt,F),outlineWidth:c(ct,o,"Width",i,nt),markerPlacement:t.markerPlacement};u.push(It);break}default:R(t,e,o,r,i,u,y,n,f)}}}function R(t,e,r,o,i,u,y,n,f){const p=function(t,e){return{type:t.type,enable:!0,name:t.name,colorLocked:t.colorLocked,primitiveName:t.primitiveName,anchorPoint:t.anchorPoint,anchorPointUnits:t.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:t.rotateClockwise,rotation:0,size:t.size,billboardMode3D:t.billboardMode3D,depth3D:t.depth3D,frame:t.frame,markerGraphics:[e],scaleSymbolsProportionally:t.scaleSymbolsProportionally,respectFrame:t.respectFrame,clippingPath:t.clippingPath,effects:t.effects}}(t,e);let s=[];const l=["Rotation","OffsetX","OffsetY"];s=o.filter(q=>q.primitiveName!==t.primitiveName||-1===l.indexOf(q.propertyName));let _="";for(const q of o)void 0!==q.value&&(_+=`-${q.primitiveName}-${q.propertyName}-${JSON.stringify(q.value)}`);const[U,P,j]=J.B$.getTextureAnchor(p),Q=t.primitiveName,tt=t.rotation||0,et=t.offsetX||0,it=t.offsetY||0,rt=(0,C.hP)(JSON.stringify(p)+_).toString(),gt={type:"marker",templateHash:rt,materialHash:0===s.length?rt:V(rt,r,s,i),cim:p,materialOverrides:s,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:y,anchorPoint:{x:U,y:P},isAbsoluteAnchorPoint:!1,size:t.size,rotation:c(Q,r,"Rotation",i,tt),offsetX:c(Q,r,"OffsetX",i,et),offsetY:c(Q,r,"OffsetY",i,it),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:f,rotateClockwise:t.rotateClockwise,referenceSize:n,sizeRatio:j/(0,ut.F2)(t.size),markerPlacement:t.markerPlacement};u.push(gt)}function ht(t){if(t&&0===t.indexOf("Level_")){const e=parseInt(t.substr(6),10);if(NaN!==e)return e}return 0}function F(t){if(!t||0===t.length)return null;const e=new mt.Z(t).toRgba();return{r:e[0],g:e[1],b:e[2],a:e[3]}}function c(t,e,r,o,i,u,y){const n=e[t];if(n){const f=n[r];if("string"==typeof f||"number"==typeof f||f instanceof Array)return u?u.call(null,f,y):f;if(null!=f&&f instanceof at.mz)return(p,s,l)=>{let _=(0,$.Z)(f,p,{$view:l},o.geometryType,s);return null!==_&&u&&(_=u.call(null,_,y)),null!==_?_:i}}return i}function V(t,e,r,o){for(const i of r)if(i.valueExpressionInfo){const u=e[i.primitiveName]&&e[i.primitiveName][i.propertyName];u instanceof at.mz&&(i.fn=(y,n,f)=>(0,$.Z)(u,y,{$view:f},o.geometryType,n))}return(i,u,y)=>{for(const n of r)n.fn&&(n.value=n.fn(i,u,y));return(0,C.hP)(t+J.E0.buildOverrideKey(r)).toString()}}function st(t,e){if(!e||0===e.length)return t;const r=JSON.parse(JSON.stringify(t));return J.E0.applyOverrides(r,e),r}function T(t,e){let r=!1,o="";for(const i of t)i.primitiveName===e&&(void 0!==i.value?o+=`-${i.primitiveName}-${i.propertyName}-${JSON.stringify(i.value)}`:i.valueExpressionInfo&&(r=!0));return[r,o]}},40602:(K,A,O)=>{O.d(A,{Z:()=>ut});var pt=O(22795),mt=O(33870),ot=O(21276);function ut(W,M,$,B,H){const Y=W.referencesGeometry()&&H?function(W,M,$){const{transform:B,hasZ:H,hasM:Y}=$;C.has(M)||C.set(M,function(W){const M={};switch(W){case"esriGeometryPoint":return($,B,H,Y)=>(0,ot.U1)(B,M,$,H,Y);case"esriGeometryPolygon":return($,B,H,Y)=>(0,ot.Ie)(B,M,$,H,Y);case"esriGeometryPolyline":return($,B,H,Y)=>(0,ot.G6)(B,M,$,H,Y);case"esriGeometryMultipoint":return($,B,H,Y)=>(0,ot.J9)(B,M,$,H,Y);default:return mt.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new pt.Z("mapview-arcade",`Unable to handle geometryType: ${W}`)),$=>$}}(M));const lt=C.get(M)(W.geometry,B,H,Y);return vt(St({},W),{geometry:lt})}(M,B,H):M,lt=W.repurposeFeature(Y);try{return W.evaluate(vt(St({},$),{$feature:lt}))}catch(a){return mt.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const C=new Map}}]);