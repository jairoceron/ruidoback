"use strict";var Ne=Object.defineProperty,$e=Object.defineProperties,He=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,$t=Math.pow,he=(ot,B,p)=>B in ot?Ne(ot,B,{enumerable:!0,configurable:!0,writable:!0,value:p}):ot[B]=p,Ht=(ot,B)=>{for(var p in B||(B={}))Je.call(B,p)&&he(ot,p,B[p]);if(pe)for(var p of pe(B))Ge.call(B,p)&&he(ot,p,B[p]);return ot},Jt=(ot,B)=>$e(ot,He(B));(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[8672],{43588:(ot,B,p)=>{p.d(B,{e:()=>Z});var O,W,b={exports:{}};O=b,void 0!==(W=function(){function Q(n,i,a){a=a||2;var l,c,h,g,_,I,V,pt=i&&i.length,tt=pt?i[0]*a:n.length,X=ft(n,0,tt,a,!0),U=[];if(!X||X.next===X.prev)return U;if(pt&&(X=function(n,i,a,l){var c,h,g,_=[];for(c=0,h=i.length;c<h;c++)(g=ft(n,i[c]*l,c<h-1?i[c+1]*l:n.length,l,!1))===g.next&&(g.steiner=!0),_.push(at(g));for(_.sort(D),c=0;c<_.length;c++)a=N(a=it(_[c],a),a.next);return a}(n,i,X,a)),n.length>80*a){l=h=n[0],c=g=n[1];for(var R=a;R<tt;R+=a)(_=n[R])<l&&(l=_),(I=n[R+1])<c&&(c=I),_>h&&(h=_),I>g&&(g=I);V=0!==(V=Math.max(h-l,g-c))?1/V:0}return G(X,U,a,l,c,V),U}function ft(n,i,a,l,c){var h,g;if(c===Lt(n,i,a,l)>0)for(h=i;h<a;h+=l)g=Et(h,n[h],n[h+1],g);else for(h=a-l;h>=i;h-=l)g=Et(h,n[h],n[h+1],g);if(g&&yt(g,g.next)){var _=g.next;xt(g),g=_}return g}function N(n,i){if(!n)return n;i||(i=n);var a,l=n;do{if(a=!1,l.steiner||!yt(l,l.next)&&0!==K(l.prev,l,l.next))l=l.next;else{var c=l.prev;if(xt(l),(l=i=c)===l.next)break;a=!0}}while(a||l!==i);return i}function G(n,i,a,l,c,h,g){if(n){!g&&h&&M(n,l,c,h);for(var _,I,V=n;n.prev!==n.next;)if(_=n.prev,I=n.next,h?T(n,l,c,h):S(n))i.push(_.i/a),i.push(n.i/a),i.push(I.i/a),xt(n),n=I.next,V=I.next;else if((n=I)===V){g?1===g?G(n=j(N(n),i,a),i,a,l,c,h,2):2===g&&$(n,i,a,l,c,h):G(N(n),i,a,l,c,h,1);break}}}function S(n){var i=n.prev,a=n,l=n.next;if(K(i,a,l)>=0)return!1;for(var c=n.next.next;c!==n.prev;){if(gt(i.x,i.y,a.x,a.y,l.x,l.y,c.x,c.y)&&K(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function T(n,i,a,l){var c=n.prev,h=n,g=n.next;if(K(c,h,g)>=0)return!1;for(var V=c.x>h.x?c.x>g.x?c.x:g.x:h.x>g.x?h.x:g.x,pt=c.y>h.y?c.y>g.y?c.y:g.y:h.y>g.y?h.y:g.y,tt=H(c.x<h.x?c.x<g.x?c.x:g.x:h.x<g.x?h.x:g.x,c.y<h.y?c.y<g.y?c.y:g.y:h.y<g.y?h.y:g.y,i,a,l),X=H(V,pt,i,a,l),U=n.prevZ,R=n.nextZ;U&&U.z>=tt&&R&&R.z<=X;){if(U!==n.prev&&U!==n.next&&gt(c.x,c.y,h.x,h.y,g.x,g.y,U.x,U.y)&&K(U.prev,U,U.next)>=0||(U=U.prevZ,R!==n.prev&&R!==n.next&&gt(c.x,c.y,h.x,h.y,g.x,g.y,R.x,R.y)&&K(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;U&&U.z>=tt;){if(U!==n.prev&&U!==n.next&&gt(c.x,c.y,h.x,h.y,g.x,g.y,U.x,U.y)&&K(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;R&&R.z<=X;){if(R!==n.prev&&R!==n.next&&gt(c.x,c.y,h.x,h.y,g.x,g.y,R.x,R.y)&&K(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function j(n,i,a){var l=n;do{var c=l.prev,h=l.next.next;!yt(c,h)&&Ut(c,l,l.next,h)&&st(c,h)&&st(h,c)&&(i.push(c.i/a),i.push(l.i/a),i.push(h.i/a),xt(l),xt(l.next),l=n=h),l=l.next}while(l!==n);return N(l)}function $(n,i,a,l,c,h){var g=n;do{for(var _=g.next.next;_!==g.prev;){if(g.i!==_.i&&St(g,_)){var I=Ct(g,_);return g=N(g,g.next),I=N(I,I.next),G(g,i,a,l,c,h),void G(I,i,a,l,c,h)}_=_.next}g=g.next}while(g!==n)}function D(n,i){return n.x-i.x}function it(n,i){var a=function(n,i){var a,l=i,c=n.x,h=n.y,g=-1/0;do{if(h<=l.y&&h>=l.next.y&&l.next.y!==l.y){var _=l.x+(h-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(_<=c&&_>g){if(g=_,_===c){if(h===l.y)return l;if(h===l.next.y)return l.next}a=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!a)return null;if(c===g)return a;var I,V=a,pt=a.x,tt=a.y,X=1/0;l=a;do{c>=l.x&&l.x>=pt&&c!==l.x&&gt(h<tt?c:g,h,pt,tt,h<tt?g:c,h,l.x,l.y)&&(I=Math.abs(h-l.y)/(c-l.x),st(l,n)&&(I<X||I===X&&(l.x>a.x||l.x===a.x&&m(a,l)))&&(a=l,X=I)),l=l.next}while(l!==V);return a}(n,i);if(!a)return i;var l=Ct(a,n),c=N(a,a.next);return N(l,l.next),i===a?c:i}function m(n,i){return K(n.prev,n,i.prev)<0&&K(i.next,n,n.next)<0}function M(n,i,a,l){var c=n;do{if(null===c.z&&(c.z=H(c.x,c.y,i,a,l)),c.prev.next!==c||c.next.prev!==c)return c.prev.next=c,c.next.prev=c,M(n,i,a,l);c.prevZ=c.prev,c.nextZ=c.next,c=c.next}while(c!==n);c.prevZ.nextZ=null,c.prevZ=null,function(n){var i,a,l,c,h,g,_,I,V=1;do{for(a=n,n=null,h=null,g=0;a;){for(g++,l=a,_=0,i=0;i<V&&(_++,l=l.nextZ);i++);for(I=V;_>0||I>0&&l;)0!==_&&(0===I||!l||a.z<=l.z)?(c=a,a=a.nextZ,_--):(c=l,l=l.nextZ,I--),h?h.nextZ=c:n=c,c.prevZ=h,h=c;a=l}h.nextZ=null,V*=2}while(g>1)}(c)}function H(n,i,a,l,c){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*c)|n<<8))|n<<4))|n<<2))|n<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-l)*c)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function at(n){var i=n,a=n;do{(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next}while(i!==n);return a}function gt(n,i,a,l,c,h,g,_){return(c-g)*(i-_)-(n-g)*(h-_)>=0&&(n-g)*(l-_)-(a-g)*(i-_)>=0&&(a-g)*(h-_)-(c-g)*(l-_)>=0}function St(n,i){return n.next.i!==i.i&&n.prev.i!==i.i&&!function(n,i){var a=n;do{if(a.i!==n.i&&a.next.i!==n.i&&a.i!==i.i&&a.next.i!==i.i&&Ut(a,a.next,n,i))return!0;a=a.next}while(a!==n);return!1}(n,i)&&(st(n,i)&&st(i,n)&&function(n,i){var a=n,l=!1,c=(n.x+i.x)/2,h=(n.y+i.y)/2;do{a.y>h!=a.next.y>h&&a.next.y!==a.y&&c<(a.next.x-a.x)*(h-a.y)/(a.next.y-a.y)+a.x&&(l=!l),a=a.next}while(a!==n);return l}(n,i)&&(K(n.prev,n,i.prev)||K(n,i.prev,i))||yt(n,i)&&K(n.prev,n,n.next)>0&&K(i.prev,i,i.next)>0)}function K(n,i,a){return(i.y-n.y)*(a.x-i.x)-(i.x-n.x)*(a.y-i.y)}function yt(n,i){return n.x===i.x&&n.y===i.y}function Ut(n,i,a,l){var c=dt(K(n,i,a)),h=dt(K(n,i,l)),g=dt(K(a,l,n)),_=dt(K(a,l,i));return c!==h&&g!==_||!(0!==c||!_t(n,a,i))||!(0!==h||!_t(n,l,i))||!(0!==g||!_t(a,n,l))||!(0!==_||!_t(a,i,l))}function _t(n,i,a){return i.x<=Math.max(n.x,a.x)&&i.x>=Math.min(n.x,a.x)&&i.y<=Math.max(n.y,a.y)&&i.y>=Math.min(n.y,a.y)}function dt(n){return n>0?1:n<0?-1:0}function st(n,i){return K(n.prev,n,n.next)<0?K(n,i,n.next)>=0&&K(n,n.prev,i)>=0:K(n,i,n.prev)<0||K(n,n.next,i)<0}function Ct(n,i){var a=new jt(n.i,n.x,n.y),l=new jt(i.i,i.x,i.y),c=n.next,h=i.prev;return n.next=i,i.prev=n,a.next=c,c.prev=a,l.next=a,a.prev=l,h.next=l,l.prev=h,l}function Et(n,i,a,l){var c=new jt(n,i,a);return l?(c.next=l.next,c.prev=l,l.next.prev=c,l.next=c):(c.prev=c,c.next=c),c}function xt(n){n.next.prev=n.prev,n.prev.next=n.next,n.next=n,n.prev=n,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function jt(n,i,a){this.i=n,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lt(n,i,a,l){for(var c=0,h=i,g=a-l;h<a;h+=l)c+=(n[g]-n[h])*(n[h+1]+n[g+1]),g=h;return c}return Q.deviation=function(n,i,a,l){var c=i&&i.length,g=Math.abs(Lt(n,0,c?i[0]*a:n.length,a));if(c)for(var _=0,I=i.length;_<I;_++)g-=Math.abs(Lt(n,i[_]*a,_<I-1?i[_+1]*a:n.length,a));var tt=0;for(_=0;_<l.length;_+=3){var X=l[_]*a,U=l[_+1]*a,R=l[_+2]*a;tt+=Math.abs((n[X]-n[R])*(n[U+1]-n[X+1])-(n[X]-n[U])*(n[R+1]-n[X+1]))}return 0===g&&0===tt?0:Math.abs((tt-g)/g)},Q.flatten=function(n){for(var i=n[0][0].length,a={vertices:[],holes:[],dimensions:i},l=0,c=0;c<n.length;c++){for(var h=0;h<n[c].length;h++)for(var g=0;g<i;g++)a.vertices.push(n[c][h][g]);c>0&&a.holes.push(l+=n[c-1].length)}return a},Q}())&&(O.exports=W);var Z=b.exports},39387:(ot,B,p)=>{p.d(B,{Z:()=>it});var $,O=p(60046),C=p(54792),W=p(85071),b=p(33870),Z=p(9077),Q=p(59559),N=(p(67474),p(42442)),G=p(57025),S=p(40990),T=p(2103),j=p(12802);const L=b.Z.getLogger("esri.geometry.support.MeshComponent");let D=$=class extends C.wq{constructor(u){super(u),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}static from(u){return(0,G.TJ)($,u)}castFaces(u){return(0,j.XQ)(u,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},L)}castMaterial(u){return(0,G.TJ)(u&&"object"==typeof u&&("metallic"in u||"roughness"in u||"metallicRoughnessTexture"in u)?T.Z:S.Z,u)}clone(){return new $({faces:(0,W.d9)(this.faces),shading:this.shading,material:(0,W.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(u,m){const M={faces:(0,W.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(u,m):null,trustSourceNormals:this.trustSourceNormals};return new $(M)}};(0,O._)([(0,Z.Cb)({json:{write:!0}})],D.prototype,"faces",void 0),(0,O._)([(0,Q.p)("faces")],D.prototype,"castFaces",null),(0,O._)([(0,Z.Cb)({type:S.Z,json:{write:!0}})],D.prototype,"material",void 0),(0,O._)([(0,Q.p)("material")],D.prototype,"castMaterial",null),(0,O._)([(0,Z.Cb)({type:String,json:{write:!0}})],D.prototype,"shading",void 0),(0,O._)([(0,Z.Cb)({type:Boolean})],D.prototype,"trustSourceNormals",void 0),D=$=(0,O._)([(0,N.j)("esri.geometry.support.MeshComponent")],D);var it=D},40990:(ot,B,p)=>{p.d(B,{Z:()=>$});var T,O=p(60046),C=p(68322),W=p(54792),b=p(60305),Z=p(9077),G=(p(67474),p(57025),p(33870),p(42442)),S=p(97190);let j=T=class extends W.wq{constructor(L){super(L),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(L,D){const it=(0,b.pC)(L)?L.get(this):null;if(it)return it;const u=new T(this.clonePropertiesWithDeduplication(D));return(0,b.pC)(L)&&L.set(this,u),u}clonePropertiesWithDeduplication(L){return{color:(0,b.pC)(this.color)?this.color.clone():null,colorTexture:(0,b.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(L):null,normalTexture:(0,b.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(L):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}};(0,O._)([(0,Z.Cb)({type:C.Z,json:{write:!0}})],j.prototype,"color",void 0),(0,O._)([(0,Z.Cb)({type:S.Z,json:{write:!0}})],j.prototype,"colorTexture",void 0),(0,O._)([(0,Z.Cb)({type:S.Z,json:{write:!0}})],j.prototype,"normalTexture",void 0),(0,O._)([(0,Z.Cb)({nonNullable:!0,json:{write:!0}})],j.prototype,"alphaMode",void 0),(0,O._)([(0,Z.Cb)({nonNullable:!0,json:{write:!0}})],j.prototype,"alphaCutoff",void 0),(0,O._)([(0,Z.Cb)({nonNullable:!0,json:{write:!0}})],j.prototype,"doubleSided",void 0),j=T=(0,O._)([(0,G.j)("esri.geometry.support.MeshMaterial")],j);var $=j},2103:(ot,B,p)=>{p.d(B,{Z:()=>$});var T,O=p(60046),C=p(68322),W=p(60305),b=p(9077),N=(p(67474),p(57025),p(33870),p(42442)),G=p(40990),S=p(97190);let j=T=class extends G.Z{constructor(L){super(L),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(L,D){const it=(0,W.pC)(L)?L.get(this):null;if(it)return it;const u=new T(this.clonePropertiesWithDeduplication(D));return(0,W.pC)(L)&&L.set(this,u),u}clonePropertiesWithDeduplication(L){return Jt(Ht({},super.clonePropertiesWithDeduplication(L)),{emissiveColor:(0,W.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,W.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(L):null,occlusionTexture:(0,W.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(L):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,W.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(L):null})}};(0,O._)([(0,b.Cb)({type:C.Z,json:{write:!0}})],j.prototype,"emissiveColor",void 0),(0,O._)([(0,b.Cb)({type:S.Z,json:{write:!0}})],j.prototype,"emissiveTexture",void 0),(0,O._)([(0,b.Cb)({type:S.Z,json:{write:!0}})],j.prototype,"occlusionTexture",void 0),(0,O._)([(0,b.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],j.prototype,"metallic",void 0),(0,O._)([(0,b.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],j.prototype,"roughness",void 0),(0,O._)([(0,b.Cb)({type:S.Z,json:{write:!0}})],j.prototype,"metallicRoughnessTexture",void 0),j=T=(0,O._)([(0,N.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],j);var $=j},97190:(ot,B,p)=>{p.d(B,{Z:()=>it});var j,O=p(60046),W=(p(67474),p(54792)),b=p(9077),Z=p(57025),ft=(p(33870),p(67424)),N=p(42442),G=p(43190),S=p(32185),T=p(90484);const $=new WeakMap;let L=0,D=j=class extends W.wq{constructor(u){super(u),this.wrap="repeat"}get url(){return this._get("url")||null}set url(u){this._set("url",u),u&&this._set("data",null)}get data(){return this._get("data")||null}set data(u){this._set("data",u),u&&this._set("url",null)}writeData(u,m,M,z){if(u instanceof HTMLImageElement){const H={type:"image-element",src:(0,S.t)(u.src,z),crossOrigin:u.crossOrigin};m[M]=H}else if(u instanceof HTMLCanvasElement){const H=u.getContext("2d").getImageData(0,0,u.width,u.height),at={type:"canvas-element",imageData:this.encodeImageData(H)};m[M]=at}else if(u instanceof HTMLVideoElement){const H={type:"video-element",src:(0,S.t)(u.src,z),autoplay:u.autoplay,loop:u.loop,muted:u.muted,crossOrigin:u.crossOrigin,preload:u.preload};m[M]=H}else{const H={type:"image-data",imageData:this.encodeImageData(u)};m[M]=H}}readData(u){switch(u.type){case"image-element":{const m=new Image;return m.src=u.src,m.crossOrigin=u.crossOrigin,m}case"canvas-element":{const m=this.decodeImageData(u.imageData),M=document.createElement("canvas");return M.width=m.width,M.height=m.height,M.getContext("2d").putImageData(m,0,0),M}case"image-data":return this.decodeImageData(u.imageData);case"video-element":{const m=document.createElement("video");return m.src=u.src,m.crossOrigin=u.crossOrigin,m.autoplay=u.autoplay,m.loop=u.loop,m.muted=u.muted,m.preload=u.preload,m}default:return}}get transparent(){const u=this.data,m=this.url;if(u instanceof HTMLCanvasElement)return this.imageDataContainsTransparent(u.getContext("2d").getImageData(0,0,u.width,u.height));if(u instanceof ImageData)return this.imageDataContainsTransparent(u);if(m){const M=m.substr(m.length-4,4).toLowerCase(),z=m.substr(0,15).toLocaleLowerCase();if(".png"===M||"data:image/png;"===z)return!0}return!1}set transparent(u){null!=u?this._override("transparent",u):this._clearOverride("transparent")}get contentHash(){const u="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",m=(M="")=>`d:${M},t:${this.transparent},w:${u}`;return null!=this.url?m(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?m(this.data.src):($.has(this.data)||$.set(this.data,++L),m($.get(this.data))):m()}clone(){const u={url:this.url,data:this.data,wrap:this.cloneWrap()};return new j(u)}cloneWithDeduplication(u){const m=u.get(this);if(m)return m;const M=this.clone();return u.set(this,M),M}cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}encodeImageData(u){let m="";for(let M=0;M<u.data.length;M++)m+=String.fromCharCode(u.data[M]);return{data:btoa(m),width:u.width,height:u.height}}decodeImageData(u){const m=atob(u.data),M=new Uint8ClampedArray(m.length);for(let z=0;z<m.length;z++)M[z]=m.charCodeAt(z);return(0,T.Jl)(M,u.width,u.height)}imageDataContainsTransparent(u){for(let m=3;m<u.data.length;m+=4)if(255!==u.data[m])return!0;return!1}static from(u){return"string"==typeof u?new j({url:u}):u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof ImageData||u instanceof HTMLVideoElement?new j({data:u}):(0,Z.TJ)(j,u)}};(0,O._)([(0,b.Cb)({type:String,json:{write:S.w}})],D.prototype,"url",null),(0,O._)([(0,b.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,b.Cb)()],D.prototype,"data",null),(0,O._)([(0,G.c)("data")],D.prototype,"writeData",null),(0,O._)([(0,ft.r)("data")],D.prototype,"readData",null),(0,O._)([(0,b.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],D.prototype,"transparent",null),(0,O._)([(0,b.Cb)({json:{write:!0}})],D.prototype,"wrap",void 0),(0,O._)([(0,b.Cb)({readOnly:!0})],D.prototype,"contentHash",null),D=j=(0,O._)([(0,N.j)("esri.geometry.support.MeshTexture")],D);var it=D},12802:(ot,B,p)=>{p.d(B,{QL:()=>T,XQ:()=>$,ZP:()=>it});var G,O=p(60046),C=p(54792),W=p(85071),b=p(33870),Z=p(9077),Q=p(59559),N=(p(67474),p(42442));const S=b.Z.getLogger("esri.geometry.support.MeshVertexAttributes");let T=G=class extends C.wq{constructor(u){super(u),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(u){return $(u,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},S)}castPosition(u){return u&&u instanceof Float32Array&&S.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),$(u,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},S)}castUv(u){return $(u,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},S)}castNormal(u){return $(u,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},S)}castTangent(u){return $(u,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},S)}clone(){const u={position:(0,W.d9)(this.position),uv:(0,W.d9)(this.uv),normal:(0,W.d9)(this.normal),tangent:(0,W.d9)(this.tangent),color:(0,W.d9)(this.color)};return new G(u)}clonePositional(){const u={position:(0,W.d9)(this.position),normal:(0,W.d9)(this.normal),tangent:(0,W.d9)(this.tangent),uv:this.uv,color:this.color};return new G(u)}};function j(u,m,M,z){const{loggerTag:H,stride:at}=m;return u.length%at!=0?(z.error(H,`Invalid array length, expected a multiple of ${at}`),new M([])):u}function $(u,m,M,z,H){if(!u)return u;if(u instanceof m)return j(u,z,m,H);for(const at of M)if(u instanceof at)return j(new m(u),z,m,H);if(Array.isArray(u))return j(new m(u),z,m,H);{const at=M.map(gt=>`'${gt.name}'`);return H.error(`Failed to set property, expected one of ${at}, but got ${u.constructor.name}`),new m([])}}function L(u,m,M){m[M]=function(u){const m=new Array(u.length);for(let M=0;M<u.length;M++)m[M]=u[M];return m}(u)}(0,O._)([(0,Z.Cb)({json:{write:L}})],T.prototype,"color",void 0),(0,O._)([(0,Q.p)("color")],T.prototype,"castColor",null),(0,O._)([(0,Z.Cb)({nonNullable:!0,json:{write:L}})],T.prototype,"position",void 0),(0,O._)([(0,Q.p)("position")],T.prototype,"castPosition",null),(0,O._)([(0,Z.Cb)({json:{write:L}})],T.prototype,"uv",void 0),(0,O._)([(0,Q.p)("uv")],T.prototype,"castUv",null),(0,O._)([(0,Z.Cb)({json:{write:L}})],T.prototype,"normal",void 0),(0,O._)([(0,Q.p)("normal")],T.prototype,"castNormal",null),(0,O._)([(0,Z.Cb)({json:{write:L}})],T.prototype,"tangent",void 0),(0,O._)([(0,Q.p)("tangent")],T.prototype,"castTangent",null),T=G=(0,O._)([(0,N.j)("esri.geometry.support.MeshVertexAttributes")],T);var it=T},18672:(ot,B,p)=>{p.r(B),p.d(B,{meshFeatureSetFromJSON:()=>We});var O=p(83459),C=p(60305),W=p(82059),b=p(61921),Z=p(60046),Q=p(22795),ft=p(14572),N=p(33870),G=p(73763),S=p(12523),T=p(9077),L=(p(67474),p(57025),p(42442)),D=p(10127),it=p(40485),u=p(27640),m=p(70393),M=p(69424),z=p(39387),H=p(95402),at=p(12802),gt=p(43588),St=p(47995),K=p(41260);function dt(t,r,e,o,s,f,d){s*=3;for(let v=0;v<f;++v){const y=t[r];o[s++]=y[0],o[s++]=y[1],o[s++]=d?y[2]:0,r+=e}return s/3}function Bt(t){return!(0,St.bu)(t,!1,!1)}var st=p(62733),Mt=p(294),Ct=p(62678);const Et=N.Z.getLogger("esri.geometry.support.meshUtils.centerAt");const a=(0,D.c)(),l=(0,D.c)();var c=p(89225);function g(){return(g=(0,b.Z)(function*(t,r,e){const{loadGLTFMesh:o}=yield(0,S.Hl)(Promise.all([p.e(6580),p.e(5312)]).then(p.bind(p,15312)),e),s=yield I(r,e),f=o(new u.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),s.url,{resolveFile:_(s),useTransform:!0,signal:(0,C.pC)(e)?e.signal:null});f.then(()=>s.dispose(),()=>s.dispose());const{vertexAttributes:d,components:v}=yield f;t.vertexAttributes=d,t.components=v})).apply(this,arguments)}function _(t){const r=(0,c.Yd)(t.url);return e=>{var o;const s=(0,c.PF)(e,r,r),f=s?s.replace(/^ *\.\//,""):null;return null!=(o=t.files.get(f))?o:e}}function I(t,r){return V.apply(this,arguments)}function V(){return(V=(0,b.Z)(function*(t,r){return t instanceof Blob?R.fromBlob(t):"string"==typeof t?new R(t):Array.isArray(t)?pt(t,r):X(t,r)})).apply(this,arguments)}function pt(t,r){return tt.apply(this,arguments)}function tt(){return tt=(0,b.Z)(function*(t,r){const e=new Map;let o=null;const s=yield(0,S.WW)(t.map(function(){var d=(0,b.Z)(function*(v){return{name:v.name,source:yield I(v instanceof Blob?v:v.source,r)}});return function(v){return d.apply(this,arguments)}}())),f=[];for(const d of s)d&&((0,S.Hc)(r)?d.source.dispose():f.push(d));(0,S.k_)(r);for(const{name:d,source:v}of f)((0,C.Wi)(o)||/\.(gltf|glb)/i.test(d))&&(o=v.url),e.set(d,v.url),v.files&&v.files.forEach((y,x)=>e.set(x,y));if((0,C.Wi)(o))throw new Q.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new R(o,()=>f.forEach(({source:d})=>d.dispose()),e)}),tt.apply(this,arguments)}function X(t,r){return U.apply(this,arguments)}function U(){return U=(0,b.Z)(function*(t,r){const{default:e}=yield(0,S.Hl)(Promise.resolve().then(p.bind(p,40662)),r),o="string"==typeof t.multipart[0]?yield Promise.all(t.multipart.map(function(){var s=(0,b.Z)(function*(f){return(yield e(f,{responseType:"array-buffer"})).data});return function(f){return s.apply(this,arguments)}}())):t.multipart;return R.fromBlob(new Blob(o))}),U.apply(this,arguments)}class R{constructor(r,e=(()=>{}),o=new Map){this.url=r,this.dispose=e,this.files=o}static fromBlob(r){const e=URL.createObjectURL(r);return new R(e,()=>URL.revokeObjectURL(e))}}var Gt=p(19554),Kt=p(25461),Vt=p(4003),et=p(6618),zt=p(16251),q=p(12015);const fe=N.Z.getLogger("esri.geometry.support.meshUtils.offset");function Xt(t,r){if(t)for(let e=0;e<t.length;e+=3)for(let o=0;o<3;o++)t[e+o]+=r[o]}const xe=(0,D.c)(),Yt=(0,Vt.c)(),Qt=(0,Kt.c)(),It={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function Wt(t,r,e){(function(t){for(let r=0;r<t.position.length;r+=3)t.position[r+2]+=.5})(t),function(t,r){if(null==r)return;const e="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];vt[0]=e[0],vt[4]=e[1],vt[8]=e[2];for(let o=0;o<t.position.length;o+=3){for(let s=0;s<3;s++)Y[s]=t.position[o+s];(0,et.t)(Y,Y,vt);for(let s=0;s<3;s++)t.position[o+s]=Y[s]}if(e[0]!==e[1]||e[1]!==e[2]){vt[0]=1/e[0],vt[4]=1/e[1],vt[8]=1/e[2];for(let o=0;o<t.normal.length;o+=3){for(let s=0;s<3;s++)Y[s]=t.normal[o+s];(0,et.t)(Y,Y,vt),(0,et.n)(Y,Y);for(let s=0;s<3;s++)t.normal[o+s]=Y[s]}}}(t,e&&e.size);const{vertexAttributes:o,transform:s}=(0,Ct.w1)(t,r,e);return{vertexAttributes:new at.ZP(Jt(Ht({},o),{uv:t.uv})),transform:s,components:[new z.Z({faces:t.faces,material:e&&e.material||null})],spatialReference:r.spatialReference}}const De={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Pe={south:0,east:1,north:2,west:3,up:4,down:5},Y=(0,D.c)(),vt=(0,Kt.c)();var kt=p(88034);const qt=N.Z.getLogger("esri.geometry.support.meshUtils.rotate");function Pt(t,r,e,o=D.Z){if(!(0,C.Wi)(t)){(0,kt.i)(wt),(0,kt.d)(wt,wt,(0,M.WH)(r),(0,M.ZZ)(r));for(let s=0;s<t.length;s+=e){for(let f=0;f<3;f++)Tt[f]=t[s+f]-o[f];(0,et.m)(Tt,Tt,wt);for(let f=0;f<3;f++)t[s+f]=Tt[f]+o[f]}}}const Tt=(0,D.c)(),te=(0,D.c)(),ee=(0,M.Ue)(),wt=(0,Vt.c)(),ne=(0,Kt.c)(),re=(0,D.c)(),oe=N.Z.getLogger("esri.geometry.support.meshUtils.scale");function se(t,r,e=D.Z){if(t)for(let o=0;o<t.length;o+=3){for(let s=0;s<3;s++)Rt[s]=t[o+s]-e[s];(0,et.a)(Rt,Rt,r);for(let s=0;s<3;s++)t[o+s]=Rt[s]+e[s]}}const Rt=(0,D.c)(),ie=(0,D.c)(),ae=(0,D.c)();var ht;const ct=N.Z.getLogger("esri.geometry.Mesh");let lt=ht=class extends(ft.Z.LoadableMixin((0,G.v)(it.Z))){constructor(t){super(t),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new at.QL,this.type="mesh"}initialize(){((0,C.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded")}get hasExtent(){return!this.loaded&&(0,C.pC)(this.external)&&(0,C.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get boundingInfo(){const t=this.vertexAttributes.position,r=this.spatialReference;if(0===t.length||this.components&&0===this.components.length)return{extent:new W.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:r}),center:new u.Z({x:0,y:0,z:0,spatialReference:r})};const e=(0,C.pC)(this.transform)?this.transform.project(t,r):t;let o=1/0,s=1/0,f=1/0,d=-1/0,v=-1/0,y=-1/0,x=0,P=0,w=0;const E=e.length,A=1/(E/3);let F=0;for(;F<E;){const ut=e[F++],k=e[F++],nt=e[F++];o=Math.min(o,ut),s=Math.min(s,k),f=Math.min(f,nt),d=Math.max(d,ut),v=Math.max(v,k),y=Math.max(y,nt),x+=A*ut,P+=A*k,w+=A*nt}return{extent:new W.Z({xmin:o,ymin:s,zmin:f,xmax:d,ymax:v,zmax:y,spatialReference:r}),center:new u.Z({x,y:P,z:w,spatialReference:r})}}get anchor(){if((0,C.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);const t=this.boundingInfo;return new u.Z({x:t.center.x,y:t.center.y,z:t.extent.zmin,spatialReference:this.spatialReference})}get origin(){return(0,C.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}get extent(){return!this.loaded&&(0,C.pC)(this.external)&&(0,C.pC)(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}addComponent(t){this.loaded?(this.components||(this.components=[]),this.components.push(z.Z.from(t)),this.notifyChange("components")):ct.error("addComponent()","Mesh must be loaded before applying operations")}removeComponent(t){if(this.loaded){if(this.components){const r=this.components.indexOf(t);if(-1!==r)return this.components.splice(r,1),void this.notifyChange("components")}ct.error("removeComponent()","Provided component is not part of the list of components")}else ct.error("removeComponent()","Mesh must be loaded before applying operations")}rotate(t,r,e,o){return(0,M.uT)(Nt.x,t,bt),(0,M.uT)(Nt.y,r,le),(0,M.uT)(Nt.z,e,ce),(0,M.qC)(bt,le,bt),(0,M.qC)(bt,ce,bt),function(t,r,e){if(!t.vertexAttributes||!t.vertexAttributes.position||0===r[3])return;const o=t.spatialReference;if((0,C.pC)(t.transform)){var s;null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&qt.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const d=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function(t,r,e){const o=(0,et.s)(Tt,e.x,e.y,e.z),s=(0,et.f)(Tt,o,t.origin);t.applyLocalInverse(s,te),t.rotation=(0,M.qC)(t.rotation,r,(0,M.Ue)()),t.applyLocalInverse(s,s),(0,et.f)(s,s,te),t.translation=(0,et.b)((0,D.c)(),t.translation,s)}(t.transform,r,d)}else{var f;const d=null!=(f=null==e?void 0:e.origin)?f:t.origin;(0,Mt.h)(t.spatialReference,e)?function(t,r,e){const o=t.spatialReference,s=(0,zt.rS)(o),f=re;(0,st.KC)(e,f,s)||(0,st.KC)(t.origin,f,s);const d=t.vertexAttributes.position,v=t.vertexAttributes.normal,y=t.vertexAttributes.tangent,x=new Float64Array(d.length),P=(0,C.pC)(v)?new Float32Array(v.length):null,w=(0,C.pC)(y)?new Float32Array(y.length):null;(0,st.Bm)(s,f,wt,s),(0,Gt.f)(ne,wt);const E=ee;(0,et.t)((0,M.ZZ)(ee),(0,M.ZZ)(r),ne),E[3]=r[3],(0,q.XO)(d,o,x),(0,C.pC)(v)&&(0,q.Iz)(v,d,x,o,P),(0,C.pC)(y)&&(0,q.wi)(y,d,x,o,w),Pt(x,E,3,f),(0,q.To)(x,d,o),(0,C.pC)(v)&&(Pt(P,E,3),(0,q.Yk)(P,d,x,o,v)),(0,C.pC)(y)&&(Pt(w,E,4),(0,q.M2)(w,d,x,o,y)),t.vertexAttributesChanged()}(t,r,d):function(t,r,e){const o=re;if(!(0,st.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,qt.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}Pt(t.vertexAttributes.position,r,3,o),Pt(t.vertexAttributes.normal,r,3),Pt(t.vertexAttributes.tangent,r,4),t.vertexAttributesChanged()}(t,r,d)}}(this,bt,o),this}offset(t,r,e,o){return this.loaded?(Ft[0]=t,Ft[1]=r,Ft[2]=e,function(t,r,e){t.vertexAttributes&&t.vertexAttributes.position&&((0,C.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&fe.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function(t,r){const e=t.origin;t.origin=(0,et.b)((0,D.c)(),e,r)}(t.transform,r)):(0,Mt.h)(t.spatialReference,e)?function(t,r){const e=t.spatialReference,o=t.vertexAttributes.position,s=t.vertexAttributes.normal,f=t.vertexAttributes.tangent,d=new Float64Array(o.length),v=(0,C.pC)(s)?new Float32Array(s.length):null,y=(0,C.pC)(f)?new Float32Array(f.length):null,x=t.extent.center,P=xe;(0,st.Bm)(e,[x.x,x.y,x.z],Yt,(0,zt.rS)(e)),(0,Gt.f)(Qt,Yt),(0,et.t)(P,r,Qt),(0,q.XO)(o,e,d),(0,C.pC)(s)&&(0,q.Iz)(s,o,d,e,v),(0,C.pC)(f)&&(0,q.wi)(f,o,d,e,y),Xt(d,P),(0,q.To)(d,o,e),(0,C.pC)(s)&&(0,q.Yk)(v,o,d,e,s),(0,C.pC)(f)&&(0,q.M2)(y,o,d,e,f),t.vertexAttributesChanged()}(t,r):function(t,r){Xt(t.vertexAttributes.position,r),t.vertexAttributesChanged()}(t,r))}(this,Ft,o),this):(ct.error("offset()","Mesh must be loaded before applying operations"),this)}scale(t,r){return this.loaded?(function(t,r,e){if(!t.vertexAttributes||!t.vertexAttributes.position)return;const o=t.spatialReference;if((0,C.pC)(t.transform)){var s;null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&oe.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const f=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function(t,r,e){const o=(0,et.s)(Rt,e.x,e.y,e.z),s=(0,et.f)(Rt,o,t.origin);t.applyLocalInverse(s,ie);const f=(0,et.a)((0,D.c)(),t.scale,r);t.scale=f,t.applyLocalInverse(s,s),(0,et.f)(s,s,ie),t.translation=(0,et.b)((0,D.c)(),t.translation,s)}(t.transform,r,f)}else{const f=(0,Mt.h)(t.spatialReference,e),d=e&&e.origin||t.origin;f?function(t,r,e){const o=t.spatialReference,s=(0,zt.rS)(o),f=ae;(0,st.KC)(e,f,s)||(0,st.KC)(t.origin,f,s);const d=t.vertexAttributes.position,v=t.vertexAttributes.normal,y=t.vertexAttributes.tangent,x=new Float64Array(d.length),P=(0,C.pC)(v)?new Float32Array(v.length):null,w=(0,C.pC)(y)?new Float32Array(y.length):null;(0,q.XO)(d,o,x),(0,C.pC)(v)&&(0,q.Iz)(v,d,x,o,P),(0,C.pC)(y)&&(0,q.wi)(y,d,x,o,w),se(x,r,f),(0,q.To)(x,d,o),(0,C.pC)(v)&&(0,q.Yk)(P,d,x,o,v),(0,C.pC)(y)&&(0,q.M2)(w,d,x,o,y),t.vertexAttributesChanged()}(t,r,d):function(t,r,e){const o=ae;if(!(0,st.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,oe.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}se(t.vertexAttributes.position,r,o),t.vertexAttributesChanged()}(t,r,d)}}(this,t,r),this):(ct.error("scale()","Mesh must be loaded before applying operations"),this)}centerAt(t,r){return this.loaded?(function(t,r,e){var o;if(!t.vertexAttributes||!t.vertexAttributes.position)return;const s=null!=(o=null==e?void 0:e.origin)?o:t.origin;(0,C.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&Et.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function(t,r,e){const d=t.origin;t.origin=[d[0]+(r.x-e.x),d[1]+(r.y-e.y),d[2]+(r.hasZ&&e.hasZ?r.z-e.z:0)]}(t.transform,r,s)):(0,Mt.h)(t.spatialReference,e)?function(t,r,e){const o=(0,Ct.FF)(t.vertexAttributes,e,{geographic:!0}),{position:s,normal:f,tangent:d}=(0,Ct.iv)(o,r,{geographic:!0});t.vertexAttributes.position=s,t.vertexAttributes.normal=f,t.vertexAttributes.tangent=d,t.vertexAttributesChanged()}(t,r,s):function(t,r,e){const o=l,s=a;if((0,st.KC)(r,s,t.spatialReference)){if(!(0,st.KC)(e,o,t.spatialReference)){const f=t.origin;o[0]=f.x,o[1]=f.y,o[2]=f.z,Et.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}(function(t,r,e){if(t)for(let o=0;o<t.length;o+=3)for(let s=0;s<3;s++)t[o+s]+=r[s]-e[s]})(t.vertexAttributes.position,s,o),t.vertexAttributesChanged()}else Et.error(`Failed to project centerAt location (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid})`)}(t,r,s)}(this,t,r),this):(ct.error("centerAt()","Mesh must be loaded before applying operations"),this)}load(t){return(0,C.pC)(this.external)&&this.addResolvingPromise(function(t,r,e){return g.apply(this,arguments)}(this,this.external.source,t)),Promise.resolve(this)}clone(){const t=this.components?new Map:null,r=this.components?new Map:null,e={components:this.components?this.components.map(o=>o.cloneWithDeduplication(t,r)):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,C.pC)(this.transform)?this.transform.clone():null,external:(0,C.pC)(this.external)?{source:this.external.source,extent:(0,C.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new ht(e)}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var r=this;return(0,b.Z)(function*(){const{toBinaryGLTF:e}=yield p.e(1983).then(p.bind(p,31983));return e(r,t)})()}static createBox(t,r){if(!(t instanceof u.Z))return ct.error(".createBox()","expected location to be a Point instance"),null;const e=new ht(Wt(function(){const{faceDescriptions:t,faceVertexOffsets:r,uvScales:e}=De,o=4*t.length,s=new Float64Array(3*o),f=new Float32Array(3*o),d=new Float32Array(2*o),v=new Uint32Array(2*t.length*3);let y=0,x=0,P=0,w=0;for(let E=0;E<t.length;E++){const A=t[E],F=y/3;for(const k of r)v[w++]=F+k;const ut=A.corners;for(let k=0;k<4;k++){const nt=ut[k];let J=0;d[P++]=.25*e[k][0]+A.uvOrigin[0],d[P++]=A.uvOrigin[1]-.25*e[k][1];for(let rt=0;rt<3;rt++)0!==A.axis[rt]?(s[y++]=.5*A.axis[rt],f[x++]=A.axis[rt]):(s[y++]=.5*nt[J++],f[x++]=0)}}return{position:s,normal:f,uv:d,faces:v}}(),t,r));return r&&r.imageFace&&"all"!==r.imageFace?function(t,r){const e=t.components[0],o=e.faces,s=Pe[r],f=6*s,d=new Uint32Array(6),v=new Uint32Array(o.length-6);let y=0,x=0;for(let P=0;P<o.length;P++)P>=f&&P<f+6?d[y++]=o[P]:v[x++]=o[P];if((0,C.pC)(t.vertexAttributes.uv)){const P=new Float32Array(t.vertexAttributes.uv),w=4*s*2,E=[0,1,1,1,1,0,0,0];for(let A=0;A<E.length;A++)P[w+A]=E[A];t.vertexAttributes.uv=P}return t.components=[new z.Z({faces:d,material:e.material}),new z.Z({faces:v})],t}(e,r.imageFace):e}static createSphere(t,r){return t instanceof u.Z?new ht(Wt(function(t=0){const r=Math.round(8*$t(2,t)),e=2*r,o=(r-1)*(e+1)+2*e,s=new Float64Array(3*o),f=new Float32Array(3*o),d=new Float32Array(2*o),v=new Uint32Array((r-1)*e*2*3);let y=0,x=0,P=0,w=0;for(let E=0;E<=r;E++){const A=E/r*Math.PI+.5*Math.PI,F=Math.cos(A),ut=Math.sin(A);Y[2]=ut;const k=0===E||E===r,nt=k?e-1:e;for(let J=0;J<=nt;J++){const rt=J/nt*2*Math.PI;Y[0]=-Math.sin(rt)*F,Y[1]=Math.cos(rt)*F;for(let mt=0;mt<3;mt++)s[y]=.5*Y[mt],f[y]=Y[mt],++y;d[x++]=(J+(k?.5:0))/e,d[x++]=E/r,0!==E&&J!==e&&(E!==r&&(v[P++]=w,v[P++]=w+1,v[P++]=w-e),1!==E&&(v[P++]=w,v[P++]=w-e,v[P++]=w-e-1)),w++}}return{position:s,normal:f,uv:d,faces:v}}(r&&r.densificationFactor||0),t,r)):(ct.error(".createSphere()","expected location to be a Point instance"),null)}static createCylinder(t,r){return t instanceof u.Z?new ht(Wt(function(t=0){const e=Math.round(16*$t(2,t)),o=4*(e+1)+2*e,s=new Float64Array(3*o),f=new Float32Array(3*o),d=new Float32Array(2*o),v=new Uint32Array(4*e*3);let y=0,x=0,P=0,w=0,E=0;for(let A=0;A<=5;A++){const F=0===A||5===A,ut=A<=1||A>=4,k=2===A||4===A,nt=F?e-1:e;for(let J=0;J<=nt;J++){const rt=J/nt*2*Math.PI,mt=F?0:.5;Y[0]=mt*Math.sin(rt),Y[1]=mt*-Math.cos(rt),Y[2]=A<=2?.5:-.5;for(let Zt=0;Zt<3;Zt++)s[y++]=Y[Zt],f[x++]=ut?2===Zt?A<=1?1:-1:0:2===Zt?0:Y[Zt]/mt;d[P++]=(J+(F?.5:0))/e,d[P++]=A<=1?1*A/3:A<=3?1*(A-2)/3+1/3:1*(A-4)/3+2/3,k||0===A||J===e||(5!==A&&(v[w++]=E,v[w++]=E+1,v[w++]=E-e),1!==A&&(v[w++]=E,v[w++]=E-e,v[w++]=E-e-1)),E++}}return{position:s,normal:f,uv:d,faces:v}}(r&&r.densificationFactor||0),t,r)):(ct.error(".createCylinder()","expected location to be a Point instance"),null)}static createPlane(t,r){return t instanceof u.Z?new ht(Wt(function(t){const r=It.facingAxisOrderSwap[t],e=It.position,o=It.normal,s=new Float64Array(e.length),f=new Float32Array(o.length);let d=0;for(let v=0;v<4;v++){const y=d;for(let x=0;x<3;x++){const P=r[x],w=Math.abs(P)-1,E=P>=0?1:-1;s[d]=e[y+w]*E,f[d]=o[y+w]*E,d++}}return{position:s,normal:f,uv:new Float32Array(It.uv),faces:new Uint32Array(It.faces)}}(r&&r.facing||"up"),t,r)):(ct.error(".createPlane()","expected location to be a Point instance"),null)}static createFromPolygon(t,r){if(!(t instanceof m.Z))return ct.error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;const e=function(t){const r=function(t,r,e){const o=t.length,s=new Array(o),f=new Array(o),d=new Array(o);let v=0,y=0,x=0,P=0;for(let A=0;A<o;++A)P+=t[A].length;const w=new Float64Array(3*P);let E=0;for(let A=o-1;A>=0;A--){const F=t[A],ut=Bt(F);if(ut&&1!==o)s[v++]=F;else{let k=F.length;for(let J=0;J<v;++J)k+=s[J].length;const nt={index:E,pathLengths:new Array(v+1),count:k,holeIndices:new Array(v)};nt.pathLengths[0]=F.length,F.length>0&&(d[x++]={index:E,count:F.length}),E=ut?dt(F,F.length-1,-1,w,E,F.length,r):dt(F,0,1,w,E,F.length,r);for(let J=0;J<v;++J){const rt=s[J];nt.holeIndices[J]=E,nt.pathLengths[J+1]=rt.length,rt.length>0&&(d[x++]={index:E,count:rt.length}),E=dt(rt,0,1,w,E,rt.length,r)}v=0,nt.count>0&&(f[y++]=nt)}}for(let A=0;A<v;++A){const F=s[A];F.length>0&&(d[x++]={index:E,count:F.length}),E=dt(F,0,1,w,E,F.length,r)}return y<o&&(f.length=y),x<o&&(d.length=x),{position:w,polygons:f,outlines:d}}(t.rings,t.hasZ),e=[];let o=0,s=0;for(const v of r.polygons){const x=v.index,P=new Float64Array(r.position.buffer,3*x*r.position.BYTES_PER_ELEMENT,3*v.count),w=v.holeIndices.map(A=>A-x),E=new Uint32Array((0,gt.e)(P,w,3));e.push({position:P,faces:E}),o+=P.length,s+=E.length}const f=function(t,r,e){if(1===t.length)return t[0];const o=new Float64Array(r),s=new Uint32Array(e);let f=0,d=0,v=0;for(const y of t){for(let x=0;x<y.position.length;x++)o[f++]=y.position[x];for(let x=0;x<y.faces.length;x++)s[d++]=y.faces[x]+v;v=f/3}return{position:o,faces:s}}(e,o,s),d=(0,K.d)(f.position.buffer,6,{originalIndices:f.faces});return f.position=new Float64Array(d.buffer),f.faces=d.indices,f}(t);return new ht({vertexAttributes:new at.QL({position:e.position}),components:[new z.Z({faces:e.faces,shading:"flat",material:r&&r.material||null})],spatialReference:t.spatialReference})}static createFromGLTF(t,r,e){return(0,b.Z)(function*(){if(!(t instanceof u.Z))throw ct.error(".createfromGLTF()","expected location to be a Point instance"),new Q.Z("invalid-input","Expected location to be a Point instance");const{loadGLTFMesh:o}=yield(0,S.Hl)(Promise.all([p.e(6580),p.e(5312)]).then(p.bind(p,15312)),e);return new ht(yield o(t,r,e))})()}static createWithExternalSource(t,r,e){var o,s,f;const d=null!=(o=null==e?void 0:e.extent)?o:null,v=null!=(s=null==e?void 0:e.transform.clone())?s:new H.Z;return v.origin=[t.x,t.y,null!=(f=t.z)?f:0],new ht({external:{source:r,extent:d},transform:v,spatialReference:t.spatialReference})}static createIncomplete(t,r){var e,o;const s=null!=(e=null==r?void 0:r.transform.clone())?e:new H.Z;s.origin=[t.x,t.y,null!=(o=t.z)?o:0];const d=new ht({transform:s,spatialReference:t.spatialReference});return d.addResolvingPromise(Promise.reject(new Q.Z("mesh-incomplete","Mesh resources are not complete"))),d}};(0,Z._)([(0,T.Cb)({type:[z.Z],json:{write:!0}})],lt.prototype,"components",void 0),(0,Z._)([(0,T.Cb)({type:H.Z,json:{write:!0}})],lt.prototype,"transform",void 0),(0,Z._)([(0,T.Cb)({constructOnly:!0})],lt.prototype,"external",void 0),(0,Z._)([(0,T.Cb)({readOnly:!0})],lt.prototype,"hasExtent",null),(0,Z._)([(0,T.Cb)({readOnly:!0})],lt.prototype,"boundingInfo",null),(0,Z._)([(0,T.Cb)({readOnly:!0})],lt.prototype,"anchor",null),(0,Z._)([(0,T.Cb)({readOnly:!0})],lt.prototype,"origin",null),(0,Z._)([(0,T.Cb)({readOnly:!0,json:{read:!1}})],lt.prototype,"extent",null),(0,Z._)([(0,T.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],lt.prototype,"hasZ",void 0),(0,Z._)([(0,T.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],lt.prototype,"hasM",void 0),(0,Z._)([(0,T.Cb)({type:at.QL,nonNullable:!0,json:{write:!0}})],lt.prototype,"vertexAttributes",void 0),lt=ht=(0,Z._)([(0,L.j)("esri.geometry.Mesh")],lt);const Nt={x:(0,D.f)(1,0,0),y:(0,D.f)(0,1,0),z:(0,D.f)(0,0,1)},bt=(0,M.Ue)(),le=(0,M.Ue)(),ce=(0,M.Ue)(),Ft=(0,D.c)();var ue=lt,Ue=p(51201);function We(t,r,e){const o=e.features;e.features=[],delete e.geometryType;const s=Ue.default.fromJSON(e);s.geometryType="mesh";const f=s.spatialReference,d=(0,C.Wi)(t.outFields)||!t.outFields.length?()=>({}):function(t){return({attributes:r})=>{if(!r)return{};if(!t)return r;for(const e in r)t.has(e)||delete r[e];return r}}(t.outFields.includes("*")?null:new Set(t.outFields));for(const v of o){const y=Se(v,f,r);(0,C.pC)(y)&&s.features.push(new O.Z({geometry:y,attributes:d(v)}))}return s}function Se(t,r,e){const{status:o,source:s}=function(t){if(!t.assetMappings)return{status:0};const r=[],e=new Map;for(const o of t.assetMappings){const s=o.seqNo,f=o.assetName,d=o.assetURL,v=o.conversionStatus;if("FAILED"===v)return{status:0};if("COMPLETED"!==v)return{status:1};if(null==s)r.push({name:f,source:d});else{const y=e.get(f);let x;y?x=y.multipart:(x=[],r.push({name:f,source:{multipart:x}}),e.set(f,{multipart:x})),x[s]=d}}return{status:2,source:r}}(t);if(0===o)return null;const f=function({attributes:t},r,{transformFieldRoles:e}){return new u.Z({x:t[e.originX],y:t[e.originY],z:t[e.originZ],spatialReference:r})}(t,r,e),d=W.Z.fromJSON(t.geometry);d.spatialReference=r;const v=function({attributes:t,assetMappings:r},{transformFieldRoles:e}){var o;return new H.Z({translation:[t[e.translationX],t[e.translationY],t[e.translationZ]],rotation:(0,M.uT)([t[e.rotationX],t[e.rotationY],t[e.rotationZ]],t[e.rotationDeg]),scale:[t[e.scaleX],t[e.scaleY],t[e.scaleZ]],geographic:!(null!=(o=r.flags)&&o.includes("PROJECT_VERTICES"))})}(t,e);return 1===o?ue.createIncomplete(f,{extent:d,transform:v}):ue.createWithExternalSource(f,s,{extent:d,transform:v})}}}]);