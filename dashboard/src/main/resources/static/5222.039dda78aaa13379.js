"use strict";var br=Object.defineProperty,vr=Object.defineProperties,Sr=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,ot=(V,D,c)=>D in V?br(V,D,{enumerable:!0,configurable:!0,writable:!0,value:c}):V[D]=c,T=(V,D)=>{for(var c in D||(D={}))xr.call(D,c)&&ot(V,c,D[c]);if(st)for(var c of st(D))Pr.call(D,c)&&ot(V,c,D[c]);return V},$=(V,D)=>vr(V,Sr(D));(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[5222,9453],{37221:(V,D,c)=>{c.d(D,{Z:()=>U});var v=c(60046),y=c(9836),j=c(54792),d=c(9077),L=(c(67474),c(57025),c(33870),c(42442));const Q=new y.Xn({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let J=class extends j.wq{constructor(pe){super(pe),this.description=null,this.type=null}};(0,v._)([(0,d.Cb)({type:String,json:{write:!0}})],J.prototype,"description",void 0),(0,v._)([(0,d.Cb)({type:String,json:{read:Q.read,write:Q.write}})],J.prototype,"type",void 0),J=(0,v._)([(0,L.j)("esri.rest.support.GPMessage")],J);var U=J},45222:(V,D,c)=>{c.r(D),c.d(D,{default:()=>hr});var v=c(61921),y=c(60046),j=c(9836),d=c(9077),O=(c(67474),c(57025)),L=(c(33870),c(42442)),Q=c(4380),J=c(57711),U=c(40662),pe=c(22795),re=c(60305),E=c(12788),W=c(89225),lt=c(70393),H=c(46921),Ae=c(64859),Ze=c(82059),ke=c(56703);let F=class extends Ae.Z{constructor(){super(...arguments),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}};(0,y._)([(0,d.Cb)({type:ke.Z})],F.prototype,"outSpatialReference",void 0),(0,y._)([(0,d.Cb)({type:Ze.Z})],F.prototype,"processExtent",void 0),(0,y._)([(0,d.Cb)({type:ke.Z})],F.prototype,"processSpatialReference",void 0),(0,y._)([(0,d.Cb)({nonNullable:!0})],F.prototype,"returnFeatureCollection",void 0),(0,y._)([(0,d.Cb)({nonNullable:!0})],F.prototype,"returnM",void 0),(0,y._)([(0,d.Cb)({nonNullable:!0})],F.prototype,"returnZ",void 0),F=(0,y._)([(0,L.j)("esri/rest/geoprocessor/GPOptions")],F),F.from=(0,O.se)(F);var ye=F,ut=c(62354),$e=c(12656),B=c(54792);let R=class extends B.wq{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};(0,y._)([(0,d.Cb)({type:Ze.Z})],R.prototype,"extent",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"height",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"href",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"opacity",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"rotation",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"scale",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"visible",void 0),(0,y._)([(0,d.Cb)()],R.prototype,"width",void 0),R=(0,y._)([(0,L.j)("esri.layer.support.MapImage")],R);var ze=R,z=c(38953);let Y=class extends B.wq{constructor(e){super(e),this.itemId=null,this.url=null}};(0,y._)([(0,d.Cb)({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],Y.prototype,"itemId",void 0),(0,y._)([(0,d.Cb)({type:String,json:{write:!0}})],Y.prototype,"url",void 0),Y=(0,y._)([(0,L.j)("esri.rest.support.DataFile")],Y);var de=Y,fe=c(51201);const We=new j.Xn({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});let q=class extends B.wq{constructor(e){super(e),this.distance=0,this.units=null}};(0,y._)([(0,d.Cb)({json:{write:!0}})],q.prototype,"distance",void 0),(0,y._)([(0,d.Cb)({json:{read:We.read,write:We.write}})],q.prototype,"units",void 0),q=(0,y._)([(0,L.j)("esri/rest/support/LinearUnit")],q);var Be=q;const Ke=new j.Xn({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});let ee=class extends B.wq{constructor(e){super(e),this.dataType=null,this.value=null}};(0,y._)([(0,d.Cb)({json:{read:Ke.read,write:Ke.write}})],ee.prototype,"dataType",void 0),(0,y._)([(0,d.Cb)()],ee.prototype,"value",void 0),ee=(0,y._)([(0,L.j)("esri.rest.support.ParameterValue")],ee);var ct=ee;let K=class extends B.wq{constructor(e){super(e),this.format=null,this.itemId=null,this.url=null}};(0,y._)([(0,d.Cb)()],K.prototype,"format",void 0),(0,y._)([(0,d.Cb)({json:{read:{source:"itemID"},write:{target:"itemID"}}})],K.prototype,"itemId",void 0),(0,y._)([(0,d.Cb)()],K.prototype,"url",void 0),K=(0,y._)([(0,L.j)("esri/rest/support/RasterData")],K);var Xe=K;function Qe(e,r,t,n,a){return me.apply(this,arguments)}function me(){return(me=(0,v.Z)(function*(e,r,t,n,a){const i={},s={},u=[];return pt(n,u,i),(0,ut.aX)(u).then(o=>{const{outSpatialReference:l,processExtent:m,processSpatialReference:h,returnFeatureCollection:f,returnM:P,returnZ:b}=t,{path:x}=(0,z.en)(e);for(const C in i){const _=i[C];s[C]=o.slice(_[0],_[1])}const p=l?l.wkid||l:null,w=h?h.wkid||h:null,g="execute"===r?{returnFeatureCollection:f||void 0,returnM:P||void 0,returnZ:b||void 0}:null,S=ne($(T(T(T({},m?{context:{extent:m,outSR:p,processSR:w}}:{"env:outSR":p,"env:processSR":w}),n),g),{f:"json"}),null,s),N=$(T({},a),{query:S});return(0,U.default)(`${x}/${r}`,N)})})).apply(this,arguments)}function pt(e,r,t){for(const n in e){const a=e[n];if(a&&"object"==typeof a&&a instanceof fe.default){const{features:i}=a;t[n]=[r.length,r.length+i.length],i.forEach(s=>{r.push(s.geometry)})}}}function ge(e){const r=e.dataType,t=ct.fromJSON(e);switch(r){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return t;case"GPDate":t.value=new Date(t.value);break;case"GPDataFile":t.value=de.fromJSON(t.value);break;case"GPLinearUnit":t.value=Be.fromJSON(t.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":t.value=e.value.url?de.fromJSON(t.value):fe.default.fromJSON(t.value);break;case"GPRasterData":case"GPRasterDataLayer":{const n=e.value.mapImage;t.value=n?ze.fromJSON(n):Xe.fromJSON(t.value);break}case"GPField":t.value=$e.Z.fromJSON(t.value);break;case"GPMultiValue:GPDate":t.value=t.value.map(a=>new Date(a));break;case"GPMultiValue:GPDataFile":t.value=t.value.map(n=>de.fromJSON(n));break;case"GPMultiValue:GPLinearUnit":t.value=t.value.map(n=>Be.fromJSON(n));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":t.value=t.value.map(n=>fe.default.fromJSON(n));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":t.value=t.value.map(n=>n?ze.fromJSON(n):Xe.fromJSON(t.value));break;case"GPMultiValue:GPField":t.value=t.value.map(n=>$e.Z.fromJSON(n))}return t}function ne(e,r,t){for(const n in e){const a=e[n];Array.isArray(a)?e[n]=JSON.stringify(a.map(i=>ne({item:i},!0).item)):a instanceof Date&&(e[n]=a.getTime())}return(0,z.cv)(e,r,t)}var He=c(37221);function yt(e,r,t,n){return he.apply(this,arguments)}function he(){return(he=(0,v.Z)(function*(e,r,t,n){return Qe(e,"execute",t=ye.from(t||{}),r,n).then(a=>{const s=a.data.messages||[];return{results:(a.data.results||[]).map(ge),messages:s.map(u=>He.Z.fromJSON(u))}})})).apply(this,arguments)}var ie,be=c(12523);const dt=new j.Xn({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});let Z=ie=class extends B.wq{constructor(e){super(e),this.jobId=null,this.jobStatus=null,this.messages=null,this.requestOptions=null,this.sourceUrl=null,this._timer=null}cancelJob(e){const{jobId:r,sourceUrl:t}=this,{path:n}=(0,z.en)(t),a=$(T(T({},this.requestOptions),e),{query:{f:"json"}});return this._clearTimer(),(0,U.default)(`${n}/jobs/${r}/cancel`,a).then(i=>{const s=ie.fromJSON(i.data);return this.messages=s.messages,this.jobStatus=s.jobStatus,this})}destroy(){clearInterval(this._timer)}checkJobStatus(e){const{path:r}=(0,z.en)(this.sourceUrl),t=$(T(T({},this.requestOptions),e),{query:{f:"json"}});return(0,U.default)(`${r}/jobs/${this.jobId}`,t).then(({data:a})=>{const i=ie.fromJSON(a);return this.messages=i.messages,this.jobStatus=i.jobStatus,this})}fetchResultData(e,r,t){r=ye.from(r||{});const{returnFeatureCollection:n,returnM:a,returnZ:i,outSpatialReference:s}=r,{path:u}=(0,z.en)(this.sourceUrl),o=ne({returnFeatureCollection:n,returnM:a,returnZ:i,outSR:s,returnType:"data",f:"json"},null),l=$(T(T({},this.requestOptions),t),{query:o});return(0,U.default)(`${u}/jobs/${this.jobId}/results/${e}`,l).then(h=>ge(h.data))}fetchResultImage(e,r,t){const{path:n}=(0,z.en)(this.sourceUrl),i=ne($(T({},r.toJSON()),{f:"json"})),s=$(T(T({},this.requestOptions),t),{query:i});return(0,U.default)(`${n}/jobs/${this.jobId}/results/${e}`,s).then(o=>ge(o.data))}fetchResultMapImageLayer(){var e=this;return(0,v.Z)(function*(){const{path:r}=(0,z.en)(e.sourceUrl),t=r.indexOf("/GPServer/"),n=`${r.substring(0,t)}/MapServer/jobs/${e.jobId}`;return new((yield Promise.all([c.e(3394),c.e(8592)]).then(c.bind(c,58382))).default)({url:n})})()}waitForJobCompletion(e={}){var r=this;return(0,v.Z)(function*(){const{interval:t=1e3,signal:n,statusCallback:a}=e;return new Promise((i,s)=>{(0,be.fu)(n,()=>{r._clearTimer(),s((0,be.zE)())}),r._clearTimer();const u=setInterval(()=>{r._timer||s((0,be.zE)()),r.checkJobStatus(r.requestOptions).then(o=>{const{jobStatus:l}=o;switch(r.jobStatus=l,l){case"job-succeeded":r._clearTimer(),i(r);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":a&&a(r);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":r._clearTimer(),s(r)}})},t);r._timer=u})})()}_clearTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}};(0,y._)([(0,d.Cb)()],Z.prototype,"jobId",void 0),(0,y._)([(0,d.Cb)({json:{read:dt.read}})],Z.prototype,"jobStatus",void 0),(0,y._)([(0,d.Cb)({type:[He.Z]})],Z.prototype,"messages",void 0),(0,y._)([(0,d.Cb)()],Z.prototype,"requestOptions",void 0),(0,y._)([(0,d.Cb)({json:{write:!0}})],Z.prototype,"sourceUrl",void 0),Z=ie=(0,y._)([(0,L.j)("esri.rest.support.JobInfo")],Z);var ft=Z;function mt(e,r,t,n){return ve.apply(this,arguments)}function ve(){return(ve=(0,v.Z)(function*(e,r,t,n){return t=ye.from(t||{}),Qe(e,"submitJob",t,r,n).then(a=>{const i=ft.fromJSON(a.data);return i.sourceUrl=e,i})})).apply(this,arguments)}const ae=new j.Xn({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"}),gt=(ae.fromJSON.bind(ae),ae.toJSON.bind(ae)),se=new j.Xn({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),ht=(se.fromJSON.bind(se),se.toJSON.bind(se)),Se="simple-marker",Ye="simple-line";function Pt(e,r){const{graphic:t,renderer:n,symbol:a}=r,i=a.type;if("text"===i||"shield-label-symbol"===i||!("visualVariables"in n)||!n.visualVariables)return;const s=n.getVisualVariablesForType("size"),u=n.getVisualVariablesForType("color"),o=n.getVisualVariablesForType("opacity"),l=n.getVisualVariablesForType("rotation"),m=s[0],h=u[0],f=o[0],P=l[0];if(m){const x=(0,H.getSize)(m,t,{shape:i===Se?a.style:null});null!=x&&(i===Se?e.size=(0,E.Wz)(x):"picture-marker"===i?(e.width=(0,E.Wz)(x),e.height=(0,E.Wz)(x)):i===Ye?e.width=(0,E.Wz)(x):e.outline&&(e.outline.width=(0,E.Wz)(x)))}if(h){const b=(0,H.getColor)(h,t);(b&&i===Se||i===Ye||"simple-fill"===i)&&(e.color=b?b.toJSON():void 0)}if(f){const b=(0,H.getOpacity)(f,t);null!=b&&e.color&&(e.color[3]=Math.round(255*b))}P&&(e.angle=-(0,H.getRotationAngle)(n,t))}function Mt(e,r=15){const t=e.canvas.width,n=e.canvas.height,a=e.getImageData(0,0,t,n).data;let i,s,u,o,l,m;e:for(s=n;s--;)for(i=t;i--;)if(a[4*(t*s+i)+3]>r){m=s;break e}if(!m)return null;e:for(i=t;i--;)for(s=m+1;s--;)if(a[4*(t*s+i)+3]>r){l=i;break e}e:for(i=0;i<=l;++i)for(s=m+1;s--;)if(a[4*(t*s+i)+3]>r){u=i;break e}e:for(s=0;s<=m;++s)for(i=u;i<=l;++i)if(a[4*(t*s+i)+3]>r){o=s;break e}return{x:u,y:o,width:l-u,height:m-o}}function It(e,r){const t=e.allLayerViews.items;if(r===e.scale)return t.filter(a=>!a.suspended);const n=new Array;for(const a of t)jt(a.parent)&&!n.includes(a.parent)||!a.visible||r&&"isVisibleAtScale"in a&&!a.isVisibleAtScale(r)||n.push(a);return n}function Lt(e){return e&&"bing-maps"===e.type}function Ot(e){return e&&"csv"===e.type}function Gt(e){return e&&"feature"===e.type}function Ct(e){return e&&"geojson"===e.type}function _t(e){return e&&"graphics"===e.type}function Vt(e){return e&&"group"===e.type}function jt(e){return e&&"esri.views.2d.layers.GroupLayerView2D"===e.declaredClass}function Et(e){return e&&"imagery"===e.type}function Jt(e){return e&&"kml"===e.type}function Ft(e){return e&&"map-image"===e.type}function Rt(e){return e&&"map-notes"===e.type}function Nt(e){return e&&"open-street-map"===e.type}function Ut(e){return e&&"stream"===e.type}function At(e){return e&&"tile"===e.type}function Zt(e){return e&&"vector-tile"===e.type}function kt(e){return e&&"web-tile"===e.type}function $t(e){return e&&"wms"===e.type}function zt(e){return e&&"wmts"===e.type}let G=class extends Ae.Z{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.label=null,this.layout="map-only",this.layoutOptions=null,this.outScale=0,this.scalePreserved=!0,this.showLabels=!0}};(0,y._)([(0,d.Cb)()],G.prototype,"attributionVisible",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"exportOptions",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"forceFeatureAttributes",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"format",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"label",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"layout",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"layoutOptions",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"outScale",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"scalePreserved",void 0),(0,y._)([(0,d.Cb)()],G.prototype,"showLabels",void 0),G=(0,y._)([(0,L.j)("esri.rest.support.PrintTemplate")],G);var Wt=G,Bt=c(4169),Kt=c(19453);const et={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},tt=new j.Xn({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),Xt=new j.Xn({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),te=new Map;function xe(){return(xe=(0,v.Z)(function*(e,r,t){const n=Te(e);let a=te.get(n);return Promise.resolve().then(()=>a?{data:a.gpMetadata}:(a={gpServerUrl:n,is11xService:!1,legendLayerNameMap:[],legendLayers:[]},(0,U.default)(n,{query:{f:"json"}}))).then(i=>(a.gpMetadata=i.data,a.cimVersion=a.gpMetadata.cimVersion,a.is11xService=!!a.cimVersion,te.set(n,a),rt(r,a))).then(i=>{const s=it(a);let u;const o=l=>"sync"===s?l.results&&l.results[0]&&l.results[0].value:u.fetchResultData("Output_File",null,t).then(m=>m.value);return"async"===s?mt(e,i,null,t).then(l=>(u=l,l.waitForJobCompletion({interval:r.updateDelay}).then(o))):yt(e,i,null,t).then(o)})})).apply(this,arguments)}function rt(e,r){return we.apply(this,arguments)}function we(){return(we=(0,v.Z)(function*(e,r){r=r||{is11xService:!1,legendLayerNameMap:[],legendLayers:[]};const t=e.template||new Wt;null==t.showLabels&&(t.showLabels=!0);const n=t.exportOptions;let a;const i=ht(t.layout);n&&(a={dpi:n.dpi},"map_only"===i.toLowerCase()||""===i)&&(a.outputSize=[n.width,n.height]);const s=t.layoutOptions;let u;if(s){let h,f;"Miles"===s.scalebarUnit||"Kilometers"===s.scalebarUnit?(h="Kilometers",f="Miles"):"Meters"!==s.scalebarUnit&&"Feet"!==s.scalebarUnit||(h="Meters",f="Feet"),u={titleText:s.titleText,authorText:s.authorText,copyrightText:s.copyrightText,customTextElements:s.customTextElements,scaleBarOptions:{metricUnit:tt.toJSON(h),metricLabel:et[h],nonMetricUnit:tt.toJSON(f),nonMetricLabel:et[f]}}}let o=null;s&&s.legendLayers&&(o=s.legendLayers.map(h=>{r.legendLayerNameMap[h.layerId]=h.title;const f={id:h.layerId};return h.subLayerIds&&(f.subLayerIds=h.subLayerIds),f}));const l=yield Ht(e,t,r);if(l.operationalLayers){const h=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),f=/[\u0600-\u06FF]/,P=x=>{const p=x.text,w=x.font,g=w&&w.family&&w.family.toLowerCase();p&&w&&("arial"===g||"arial unicode ms"===g)&&(w.family=h.test(p)?"Arial Unicode MS":"Arial","normal"!==w.style&&f.test(p)&&(w.family="Arial Unicode MS"))},b=()=>{throw new pe.Z("print-task:cim-symbol-unsupported","CIMSymbol is not supported by a print service published from ArcMap")};l.operationalLayers.forEach(x=>{var p,w,g;null!=(p=x.featureCollection)&&p.layers?x.featureCollection.layers.forEach(S=>{var N,C,_,at;if(null!=(N=S.layerDefinition)&&null!=(C=N.drawingInfo)&&null!=(_=C.renderer)&&_.symbol){const k=S.layerDefinition.drawingInfo.renderer;"esriTS"===k.symbol.type?P(k.symbol):"CIMSymbolReference"!==k.symbol.type||r.is11xService||b()}null!=(at=S.featureSet)&&at.features&&S.featureSet.features.forEach(k=>{k.symbol&&("esriTS"===k.symbol.type?P(k.symbol):"CIMSymbolReference"!==k.symbol.type||r.is11xService||b())})}):!r.is11xService&&null!=(w=x.layerDefinition)&&null!=(g=w.drawingInfo)&&g.renderer&&JSON.stringify(x.layerDefinition.drawingInfo.renderer).includes('"type":"CIMSymbolReference"')&&b()})}e.outSpatialReference&&(l.mapOptions.spatialReference=e.outSpatialReference.toJSON()),Object.assign(l,{exportOptions:a,layoutOptions:u||{}}),Object.assign(l.layoutOptions,{legendOptions:{operationalLayers:null!=o?o:r.legendLayers.slice()}}),r.legendLayers.length=0,te.set(r.gpServerUrl,r);const m={Web_Map_as_JSON:JSON.stringify(l),Format:gt(t.format),Layout_Template:i};return e.extraParameters&&Object.assign(m,e.extraParameters),m})).apply(this,arguments)}function Ht(e,r,t){return De.apply(this,arguments)}function De(){return(De=(0,v.Z)(function*(e,r,t){const n=e.view;let a=n.spatialReference;const i={operationalLayers:yield Yt(n,r,t)};let s=t.ssExtent||e.extent||n.extent;if(a&&a.isWrappable&&(s=s.clone()._normalize(!0),a=s.spatialReference),i.mapOptions={extent:s&&s.toJSON(),spatialReference:a&&a.toJSON(),showAttribution:r.attributionVisible},t.ssExtent=null,n.background&&(i.background=n.background.toJSON()),n.rotation&&(i.mapOptions.rotation=-n.rotation),r.scalePreserved&&(i.mapOptions.scale=r.outScale||n.scale),n.timeExtent){const u=(0,re.pC)(n.timeExtent.start)?n.timeExtent.start.getTime():null,o=(0,re.pC)(n.timeExtent.end)?n.timeExtent.end.getTime():null;i.mapOptions.time=[u,o]}return i})).apply(this,arguments)}function Te(e){let r=e;const t=r.lastIndexOf("/GPServer/");return t>0&&(r=r.slice(0,t+9)),r}function Yt(e,r,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,v.Z)(function*(e,r,t){const n=[],a={layerView:null,printTemplate:r,view:e};let i=0;r.scalePreserved&&(i=r.outScale||e.scale);const s=It(e,i);for(const u of s){const o=u.layer;if(!o.loaded||Vt(o))continue;let l;a.layerView=u,l=Lt(o)?qt(o):Ot(o)?yield er(o,a,t):Gt(o)?yield tr(o,a,t):Ct(o)?yield rr(o,a,t):_t(o)?yield nr(o,a,t):Et(o)?ir(o,t):Jt(o)?yield ar(o,a,t):Ft(o)?sr(o,a,t):Rt(o)?yield or(a,t):Nt(o)?{type:"OpenStreetMap"}:Ut(o)?yield ur(o,a,t):At(o)?cr(o):Zt(o)?yield pr(o,a,t):kt(o)?yr(o):$t(o)?dr(o):zt(o)?fr(o):yield je(o,a,t),l&&(Array.isArray(l)?n.push(...l):(l.id=o.id,l.title=t.legendLayerNameMap[o.id]||o.title,l.opacity=o.opacity,l.minScale=o.minScale||0,l.maxScale=o.maxScale||0,n.push(l)))}if(i&&n.forEach(u=>{u.minScale=0,u.maxScale=0}),e.graphics&&e.graphics.length){const u=yield A(null,e.graphics,r,t);u&&n.push(u)}return n})).apply(this,arguments)}function qt(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}}function er(e,r,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,v.Z)(function*(e,r,t){t.legendLayers&&t.legendLayers.push({id:e.id});const n=r.layerView,a=r.printTemplate;let i;return!t.is11xService||n.filter?A(e,yield ue(n),a,t):(i={type:"CSV"},e.write(i,{origin:"web-map"}),delete i.popupInfo,delete i.layerType,i.showLabels=a.showLabels&&e.labelsVisible,i)})).apply(this,arguments)}function A(e,r,t,n){return Le.apply(this,arguments)}function Le(){return(Le=(0,v.Z)(function*(e,r,t,n){let a;const i={layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}},s={layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}},u={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}},o={layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}},l={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}};if(l.layerDefinition.name="textLayer",delete l.layerDefinition.drawingInfo,e){if("esri.layers.FeatureLayer"===e.declaredClass||"esri.layers.StreamLayer"===e.declaredClass?i.layerDefinition.name=s.layerDefinition.name=u.layerDefinition.name=o.layerDefinition.name=n.legendLayerNameMap[e.id]||e.get("arcgisProps.title")||e.title:"esri.layers.GraphicsLayer"===e.declaredClass&&(r=e.graphics.items),e.renderer){const g=e.renderer.toJSON();i.layerDefinition.drawingInfo.renderer=g,s.layerDefinition.drawingInfo.renderer=g,u.layerDefinition.drawingInfo.renderer=g,o.layerDefinition.drawingInfo.renderer=g}if(t.showLabels&&e.labelsVisible&&"function"==typeof e.write){var m,h;const g=null==(m=e.write({},{origin:"web-map"}).layerDefinition)||null==(h=m.drawingInfo)?void 0:h.labelingInfo;g&&(a=!0,i.layerDefinition.drawingInfo.labelingInfo=g,s.layerDefinition.drawingInfo.labelingInfo=g,u.layerDefinition.drawingInfo.labelingInfo=g,o.layerDefinition.drawingInfo.labelingInfo=g)}}let f;null!=e&&e.renderer||a||(delete i.layerDefinition.drawingInfo,delete s.layerDefinition.drawingInfo,delete u.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo);const P=null==e?void 0:e.fieldsIndex,b=null==e?void 0:e.renderer;if(P){if(b&&"function"==typeof b.collectRequiredFields){const S=new Set;yield b.collectRequiredFields(S,P),f=Array.from(S)}const g=P.fields.map(S=>S.toJSON());i.layerDefinition.fields=g,s.layerDefinition.fields=g,u.layerDefinition.fields=g,o.layerDefinition.fields=g}const x=r&&r.length;let p;for(let g=0;g<x;g++){const S=r[g]||r.getItemAt(g);if(!1===S.visible||!S.geometry||(p=S.toJSON(),p.hasOwnProperty("popupTemplate")&&delete p.popupTemplate,p.geometry&&p.geometry.z&&delete p.geometry.z,p.symbol&&p.symbol.outline&&"esriCLS"===p.symbol.outline.type&&!n.is11xService))continue;!n.is11xService&&p.symbol&&p.symbol.outline&&p.symbol.outline.color&&p.symbol.outline.color[3]&&(p.symbol.outline.color[3]=255);const N=e&&e.renderer&&("valueExpression"in e.renderer&&e.renderer.valueExpression||"hasVisualVariables"in e.renderer&&e.renderer.hasVisualVariables());if(!p.symbol&&e&&e.renderer&&N&&!n.is11xService){const C=e.renderer,_=yield C.getSymbolAsync(S);if(!_)continue;p.symbol=_.toJSON(),"hasVisualVariables"in C&&C.hasVisualVariables()&&Pt(p.symbol,{renderer:C,graphic:S,symbol:_})}if(p.symbol&&(p.symbol.angle||delete p.symbol.angle,ce(p.symbol)?p.symbol=yield le(p.symbol,n):p.symbol.text&&delete p.attributes),(!t||!t.forceFeatureAttributes)&&f&&f.length){const C={};f.forEach(_=>{p.attributes&&p.attributes.hasOwnProperty(_)&&(C[_]=p.attributes[_])}),p.attributes=C}"polygon"===S.geometry.type?i.featureSet.features.push(p):"polyline"===S.geometry.type?s.featureSet.features.push(p):"point"===S.geometry.type?p.symbol&&p.symbol.text?l.featureSet.features.push(p):u.featureSet.features.push(p):"multipoint"===S.geometry.type?o.featureSet.features.push(p):"extent"===S.geometry.type&&(p.geometry=lt.Z.fromExtent(S.geometry).toJSON(),i.featureSet.features.push(p))}const w=[i,s,o,u,l].filter(g=>g.featureSet.features.length>0);for(const g of w){const S=g.featureSet.features.every(N=>N.symbol);!S||t&&t.forceFeatureAttributes||g.featureSet.features.forEach(N=>{delete N.attributes}),S&&delete g.layerDefinition.drawingInfo,g.layerDefinition.drawingInfo&&g.layerDefinition.drawingInfo.renderer&&(yield nt(g.layerDefinition.drawingInfo.renderer,n))}return w.length?{featureCollection:{layers:w},showLabels:a}:null})).apply(this,arguments)}function tr(e,r,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,v.Z)(function*(e,r,t){var n,a;let i;t.legendLayers&&t.legendLayers.push({id:e.id});const s=e.renderer;if(e.featureReduction||s&&"dot-density"===s.type&&(!t.is11xService||parseFloat(t.cimVersion)<2.6))return je(e,r,t);const u=r.layerView,{printTemplate:o,view:l}=r,m=s&&("valueExpression"in s&&s.valueExpression||"hasVisualVariables"in s&&s.hasVisualVariables()),h="feature-layer"!==(null==(n=e.source)?void 0:n.type)&&"ogc-feature"!==(null==(a=e.source)?void 0:a.type);if(!t.is11xService&&m||e.featureReduction||u.filter||h||!s||"field"in s&&null!=s.field&&("string"!=typeof s.field||!e.getField(s.field))){const x=yield ue(u);i=yield A(e,x,o,t)}else{var f,P;if(i={id:(b=e.write()).id,title:b.title,opacity:b.opacity,minScale:b.minScale,maxScale:b.maxScale,url:b.url,layerType:b.layerType,customParameters:b.customParameters,layerDefinition:b.layerDefinition},i.showLabels=o.showLabels&&e.labelsVisible,oe(i,e),null!=(f=i.layerDefinition)&&null!=(P=f.drawingInfo)&&P.renderer&&(delete i.layerDefinition.minScale,delete i.layerDefinition.maxScale,yield nt(i.layerDefinition.drawingInfo.renderer,t),"visualVariables"in s&&s.visualVariables&&s.visualVariables[0])){const p=s.visualVariables[0];if("size"===p.type&&p.maxSize&&"number"!=typeof p.maxSize&&p.minSize&&"number"!=typeof p.minSize){const w=(0,H.getSizeRangeAtScale)(p,l.scale);i.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=w.minSize,i.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=w.maxSize}}const x=(0,Kt.cx)(u);x&&(i.layerDefinition||(i.layerDefinition={}),i.layerDefinition.definitionExpression=i.layerDefinition.definitionExpression?`(${i.layerDefinition.definitionExpression}) AND (${x})`:x)}var b;return i})).apply(this,arguments)}function rr(e,r,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,v.Z)(function*(e,{layerView:r,printTemplate:t},n){return n.legendLayers&&n.legendLayers.push({id:e.id}),A(e,yield ue(r),t,n)})).apply(this,arguments)}function nr(e,r,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,v.Z)(function*(e,{printTemplate:r},t){return A(e,null,r,t)})).apply(this,arguments)}function ir(e,r){r.legendLayers&&r.legendLayers.push({id:e.id});const t={layerType:(n=e.write()).layerType,customParameters:n.customParameters};var n;if(t.bandIds=e.bandIds,t.compressionQuality=e.compressionQuality,t.format=e.format,t.interpolation=e.interpolation,(e.mosaicRule||e.definitionExpression)&&(t.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(r.is11xService)e.renderingRule&&(t.renderingRule=e.renderingRule.toJSON()),e.renderer&&(t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{const a=e.exportImageServiceParameters.combineRendererWithRenderingRule();a&&(t.renderingRule=a.toJSON())}return oe(t,e),t}function ar(e,r,t){return _e.apply(this,arguments)}function _e(){return(_e=(0,v.Z)(function*(e,r,t){const n=r.printTemplate;if(t.is11xService){const a={type:"kml"};return e.write(a,{origin:"web-map"}),delete a.layerType,a.url=(0,W.Fv)(e.url),a}{const a=[],i=r.layerView;i.allVisibleMapImages.forEach((o,l)=>{const m={id:`${e.id}_image${l}`,type:"image",title:e.id,minScale:e.minScale||0,maxScale:e.maxScale||0,opacity:e.opacity,extent:o.extent};"data:image/png;base64,"===o.href.substr(0,22)?m.imageData=o.href.substr(22):m.url=o.href,a.push(m)});const s=[...i.allVisiblePoints.items,...i.allVisiblePolylines.items,...i.allVisiblePolygons.items],u=T({id:e.id},yield A(null,s,n,t));return a.push(u),a}})).apply(this,arguments)}function sr(e,{view:r},t){let n;const a={id:e.id,subLayerIds:[]};let i=[];const s=r.scale,u=l=>{if(l.visible&&(0===s||(0===l.minScale||s<=l.minScale)&&(0===l.maxScale||s>=l.maxScale)))if(l.sublayers)l.sublayers.forEach(u);else{const P=l.toExportImageJSON();i.unshift({id:l.id,name:l.title,layerDefinition:{drawingInfo:P.drawingInfo,definitionExpression:P.definitionExpression,source:P.source}}),a.subLayerIds.push(l.id)}};var o;return e.sublayers&&e.sublayers.forEach(u),i.length&&(i=i.map(({id:l,name:m,layerDefinition:h})=>({id:l,name:m,layerDefinition:h})),n={layerType:(o=e.write()).layerType,customParameters:o.customParameters},n.layers=i,n.visibleLayers=e.capabilities.exportMap.supportsDynamicLayers?void 0:a.subLayerIds,oe(n,e),t.legendLayers.push(a)),n}function or(e,r){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,v.Z)(function*({layerView:e,printTemplate:r},t){const n=[],a=e.layer;if((0,re.pC)(a.featureCollections))for(const i of a.featureCollections){const s=yield A(i,i.source,r,t);s&&n.push(...s.featureCollection.layers)}else if((0,re.pC)(a.sublayers))for(const i of a.sublayers){const s=yield A(null,i.graphics,r,t);s&&n.push(...s.featureCollection.layers)}return{featureCollection:{layers:n}}})).apply(this,arguments)}function je(e,r,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,v.Z)(function*(e,{printTemplate:r,view:t},n){const a={type:"image"},i={format:"png",ignoreBackground:!0,layers:[e],rotation:0},s=n.ssExtent||t.extent.clone();let u=96,o=!0,l=!0;if(r.exportOptions){const f=r.exportOptions;f.dpi>0&&(u=f.dpi),f.width>0&&(o=f.width%2==t.width%2),f.height>0&&(l=f.height%2==t.height%2)}if("map-only"===r.layout&&r.scalePreserved&&(!r.outScale||r.outScale===t.scale)&&96===u&&(!o||!l)&&(i.area={x:0,y:0,width:t.width,height:t.height},o||(i.area.width-=1),l||(i.area.height-=1),!n.ssExtent)){const f=t.toMap((0,E.vW)(i.area.width,i.area.height));s.ymin=f.y,s.xmax=f.x,n.ssExtent=s}a.extent=s.clone()._normalize(!0).toJSON();const m=yield t.takeScreenshot(i),{data:h}=(0,W.sJ)(m.dataUrl);return a.imageData=h,a})).apply(this,arguments)}function ur(e,r,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,v.Z)(function*(e,{layerView:r,printTemplate:t},n){return n.legendLayers&&n.legendLayers.push({id:e.id}),A(e,yield ue(r),t,n)})).apply(this,arguments)}function cr(e){const r={layerType:(t=e.write()).layerType,customParameters:t.customParameters};var t;return oe(r,e),r}function pr(e,r,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,v.Z)(function*(e,r,t){if(t.is11xService&&e.serviceUrl&&e.styleUrl){const n=J.id&&J.id.findCredential(e.styleUrl),a=J.id&&J.id.findCredential(e.serviceUrl);if(!n&&!a||"2.1.0"!==t.cimVersion){const i={type:"VectorTileLayer"};return i.styleUrl=(0,W.Fv)(e.styleUrl),n&&(i.token=n.token),a&&a.token!==i.token&&(i.additionalTokens=[{url:e.serviceUrl,token:a.token}]),i}}return je(e,r,t)})).apply(this,arguments)}function yr(e){const r={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(r.subDomains=e.subDomains),r}function dr(e){let r;const t=[],n=a=>{a.visible&&(a.sublayers?a.sublayers.forEach(n):a.name&&t.unshift(a.name))};return e.sublayers&&e.sublayers.forEach(n),t.length&&(r={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:t,url:(0,W.Fv)(e.url),version:e.version}),r}function fr(e){const r=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:r.imageFormat,layer:r.id,style:r.styleId,tileMatrixSet:r.tileMatrixSetId,url:(0,W.Fv)(e.url)}}function oe(e,r){if(r.url)if(e.url=(0,W.Fv)(e.url||r.url),"apiKey"in r&&r.apiKey)e.token=r.apiKey;else if(Q.Z.apiKey&&(0,Bt.r)(r.url))e.token=Q.Z.apiKey;else{var t,n;e.token=null==(t=J.id)||null==(n=t.findCredential(r.url))?void 0:n.token}}function le(e,r){return Re.apply(this,arguments)}function Re(){return(Re=(0,v.Z)(function*(e,r){r.canvas||(r.canvas=document.createElement("canvas"));const t=1024;r.canvas.width=t,r.canvas.height=t;const n=r.canvas.getContext("2d");let a,i;if(e.path){var s;const u=new Path2D(e.path);u.closePath(),n.fillStyle=Array.isArray(e.color)?`rgba(${e.color[0]},${e.color[1]},${e.color[2]},${e.color[3]/255})`:"rgb(0,0,0)",n.fill(u);const o=Mt(n);if(!o)return null;n.clearRect(0,0,t,t);const l=(0,E.F2)(e.size)/Math.max(o.width,o.height);n.scale(l,l);const m=t/l;if(n.translate(m/2-o.width/2-o.x,m/2-o.height/2-o.y),Array.isArray(e.color)&&n.fill(u),null!=(s=e.outline)&&s.width&&Array.isArray(e.outline.color)){const b=e.outline;n.lineWidth=(0,E.F2)(b.width)/l,n.lineJoin="round",n.strokeStyle=`rgba(${b.color[0]},${b.color[1]},${b.color[2]},${b.color[3]/255})`,n.stroke(u),o.width+=n.lineWidth,o.height+=n.lineWidth}o.width*=l,o.height*=l;const P=n.getImageData(512-o.width/2,512-o.height/2,Math.ceil(o.width),Math.ceil(o.height));a=P.width,i=P.height,n.canvas.width=a,n.canvas.height=i,n.putImageData(P,0,0)}else{const u="image/svg+xml"===e.contentType?"data:image/svg+xml;base64,"+e.imageData:e.url,o=(yield(0,U.default)(u,{responseType:"image"})).data;a=(0,E.F2)(e.width),i=(0,E.F2)(e.height),n.canvas.width=a,n.canvas.height=i,n.drawImage(o,0,0,n.canvas.width,n.canvas.height)}return{type:"esriPMS",imageData:n.canvas.toDataURL("image/png").substr(22),angle:e.angle,contentType:"image/png",height:(0,E.Wz)(i),width:(0,E.Wz)(a),xoffset:e.xoffset,yoffset:e.yoffset}})).apply(this,arguments)}function nt(e,r){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,v.Z)(function*(e,r){const t=e.type;if("simple"===t&&ce(e.symbol))e.symbol=yield le(e.symbol,r);else if("uniqueValue"===t||"classBreaks"===t){ce(e.defaultSymbol)&&(e.defaultSymbol=yield le(e.defaultSymbol,r));const n=e["uniqueValue"===t?"uniqueValueInfos":"classBreakInfos"];if(n)for(const a of n)ce(a.symbol)&&(a.symbol=yield le(a.symbol,r))}})).apply(this,arguments)}function ue(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,v.Z)(function*(e){return e.queryFeatures(e.createQuery()).then(r=>r.features)})).apply(this,arguments)}function it(e){return e.gpMetadata&&e.gpMetadata.executionType?Xt.fromJSON(e.gpMetadata.executionType):"sync"}function ce(e){return e&&(e.path||"image/svg+xml"===e.contentType||e.url&&e.url.endsWith(".svg"))}var mr=c(72528);const gr=new j.Xn({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"});let X=class extends mr.Z{constructor(...e){super(...e),this._gpMetadata=null,this.updateDelay=1e3}get mode(){return this._gpMetadata&&this._gpMetadata.executionType?gr.fromJSON(this._gpMetadata.executionType):"sync"}execute(e,r){return e&&(e.updateDelay=this.updateDelay),function(e,r,t){return xe.apply(this,arguments)}(this.url,e,T(T({},this.requestOptions),r))}_getGpPrintParams(e){var r=this;return(0,v.Z)(function*(){const t=Te(r.url),n=te.get(t);return rt(e,n)})()}};(0,y._)([(0,d.Cb)()],X.prototype,"_gpMetadata",void 0),(0,y._)([(0,d.Cb)({readOnly:!0})],X.prototype,"mode",null),(0,y._)([(0,d.Cb)()],X.prototype,"updateDelay",void 0),X=(0,y._)([(0,L.j)("esri.tasks.PrintTask")],X);var hr=X},19453:(V,D,c)=>{function v(M){var O;const I=M.layer;return"floorInfo"in I&&null!=(O=I.floorInfo)&&O.floorField&&"floors"in M.view?d(M.view.floors,I.floorInfo.floorField):null}function y(M,O){var I;return"floorInfo"in O&&null!=(I=O.floorInfo)&&I.floorField?d(M,O.floorInfo.floorField):null}function j(M,O){const{definitionExpression:I}=O;return M?I?`(${I}) AND (${M})`:M:I}function d(M,O){if(null==M||!M.length)return null;const I=M.filter(L=>""!==L).map(L=>`'${L}'`);return I.push("''"),`${O} IN (${I.join(",")}) OR ${O} IS NULL`}c.d(D,{Hp:()=>j,cx:()=>v,ff:()=>y})}}]);