"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[6765],{96765:(T,E,t)=>{t.r(E),t.d(E,{createLabelFunction:()=>L,formatField:()=>h});var v=t(61921),D=t(22795),g=t(33870),p=t(60285),O=t(7667),M=t(76009),m=t(46926),P=t(8982);const b=g.Z.getLogger("esri.layers.support.labelFormatUtils"),y={type:"simple",evaluate:()=>null},C={getAttribute:(n,r)=>n.field(r)};function L(n,r,e){return c.apply(this,arguments)}function c(){return(c=(0,v.Z)(function*(n,r,e){if(!n||!n.symbol)return y;const o=n.where,s=(0,m.hV)(n),d=o?yield t.e(1122).then(t.bind(t,41122)):null;let i;if("arcade"===s.type){const a=yield(0,P.WW)(s.expression,e,r);i={type:"arcade",evaluate(u){try{const l=a.evaluate({$feature:"attributes"in u?a.repurposeFeature(u):a.repurposeAdapter(u)});if(null!=l)return l.toString()}catch(l){b.error(new D.Z("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:u,expression:s}))}return null},needsHydrationToEvaluate:()=>null==(0,m.el)(s.expression)}}else i={type:"simple",evaluate:a=>s.expression.replace(/{[^}]*}/g,u=>{const l=u.slice(1,-1),_=r.get(l);if(!_)return u;let f=null;return"attributes"in a?a&&a.attributes&&(f=a.attributes[_.name]):f=a.field(_.name),null==f?"":h(f,_)})};if(o){let a;try{a=d.WhereClause.create(o,r)}catch(l){return y}const u=i.evaluate;i.evaluate=l=>a.testFeature(l,"attributes"in l?void 0:C)?u(l):null}return i})).apply(this,arguments)}function h(n,r){if(null==n)return"";const e=r.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const s=n;for(const d of e.codedValues)if(d.code===s)return d.name}else if("range"===e.type){const s=+n,i="range"in e?e.range[1]:e.maxValue;if(("range"in e?e.range[0]:e.minValue)<=s&&s<=i)return e.name}let o=n;return"date"===r.type||"esriFieldTypeDate"===r.type?o=(0,p.p6)(o,(0,p.Ze)("short-date")):(0,M.H7)(r)&&(o=(0,O.uf)(+o)),o||""}}}]);