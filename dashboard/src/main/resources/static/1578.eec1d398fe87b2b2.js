"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[1578],{71578:(W,m,t)=>{t.r(m),t.d(m,{default:()=>L});var e=t(60046),C=t(83459),M=t(38886),_=t(76011),s=t(97467),T=(t(9077),t(67474),t(57025),t(33870),t(42442)),O=t(66771),g=t(38750),o=t(51201),E=t(70297),i=t(561),u=t(8940),U=t(59989);let P=class extends((0,E.y)(U.Z)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(r,l){if(this.suspended||!this.graphicsViews.length)return Promise.resolve(null);const v=this.graphicsViews.reverse().map(p=>p.hitTest(r,l));return Promise.all(v).then(p=>p.filter((h,D)=>(h&&(h.popupTemplate=this._popupTemplates.get(this.graphicsViews[D]),h.layer=this.layer,h.sourceLayer=this.layer),!!h))[0]||null)}update(r){if(this.graphicsViews)for(const l of this.graphicsViews)l.processUpdate(r)}attach(){this.layer.featureCollections.forEach(r=>{const l=o.default.fromJSON(r.featureSet),v=new(_.Z.ofType(C.Z))(l.features);let p;if(this._graphicsViewMap[l.geometryType])p=this._graphicsViewMap[l.geometryType],p.graphics.addMany(v);else{const h=r.layerDefinition.drawingInfo,D=r.popupInfo?M.Z.fromJSON(r.popupInfo):null,y=(0,g.im)(h.renderer);p=new u.Z({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:v,renderer:y,container:new i.Z(this.view.featuresTilingScheme)}),this._graphicsViewMap[l.geometryType]=p,this._popupTemplates.set(p,D),"polygon"!==l.geometryType||this.layer.polygonSymbol?"polyline"!==l.geometryType||this.layer.lineSymbol?"point"!==l.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=y.symbol):this.layer.lineSymbol=y.symbol:this.layer.polygonSymbol=y.symbol,this.graphicsViews.push(p),this.container.addChild(p.container)}}),this.handles.add([(0,s.S1)(this.layer,"polygonSymbol",r=>{this._graphicsViewMap.polygon.renderer=new O.Z({symbol:r})}),(0,s.S1)(this.layer,"lineSymbol",r=>{this._graphicsViewMap.polyline.renderer=new O.Z({symbol:r})}),(0,s.S1)(this.layer,"pointSymbol",r=>{this._graphicsViewMap.point.renderer=new O.Z({symbol:r})})])}detach(){this.container.removeAllChildren();for(const r of this.graphicsViews)r.destroy();this.graphicsViews.length=0}moveStart(){}moveEnd(){}viewChange(){for(const r of this.graphicsViews)r.viewChange()}};P=(0,e._)([(0,T.j)("esri.views.2d.layers.GeoRSSLayerView2D")],P);var L=P},70297:(W,m,t)=>{t.d(m,{y:()=>V});var e=t(60046),C=t(76011),M=t(55208),_=t(97467),s=t(9077),a=(t(67474),t(57025),t(33870),t(42442)),T=t(29729),O=t(54792);let g=class extends O.wq{};g=(0,e._)([(0,a.j)("esri.views.layers.support.ClipArea")],g);var E,o=g;let i=E=class extends o{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new E({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,s.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"left",void 0),(0,e._)([(0,s.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"right",void 0),(0,e._)([(0,s.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"top",void 0),(0,e._)([(0,s.Cb)({type:[Number,String],json:{write:!0}})],i.prototype,"bottom",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],i.prototype,"version",null),i=E=(0,e._)([(0,a.j)("esri.views.layers.support.ClipRect")],i);var v,u=i,P=(t(73513),t(40485)),L=t(52917),r=t(82059),l=t(70393);const p={base:P.Z,key:"type",typeMap:{extent:r.Z,polygon:l.Z}};let h=v=class extends o{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new v({geometry:this.geometry.clone()})}};(0,e._)([(0,s.Cb)({types:p,json:{read:L.im,write:!0}})],h.prototype,"geometry",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],h.prototype,"version",null),h=v=(0,e._)([(0,a.j)("esri.views.layers.support.Geometry")],h);var D=h;let y=class extends o{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,s.Cb)({type:[[[Number]]],json:{write:!0}})],y.prototype,"path",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],y.prototype,"version",null),y=(0,e._)([(0,a.j)("esri.views.layers.support.Path")],y);const S=C.Z.ofType({key:"type",base:o,typeMap:{rect:u,path:y,geometry:D}}),V=Z=>{let d=class extends Z{constructor(){super(...arguments),this.clips=new S,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var c;this.container||(this.container=new T.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,_.S1)(this,"suspended",n=>{this.container&&(this.container.visible=!n),this.view&&!n&&this.updateRequested&&this.view.requestUpdate()},!0),(0,_.S1)(this,["layer.opacity","container"],()=>{var n,R;this.container&&(this.container.opacity=null!=(n=null==(R=this.layer)?void 0:R.opacity)?n:1)},!0),(0,_.S1)(this,["layer.blendMode"],n=>{this.container&&(this.container.blendMode=n)},!0),(0,_.S1)(this,["layer.effect"],n=>{this.container&&(this.container.effect=n)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(c=this.view)&&c.whenLayerView?this.view.whenLayerView(this.layer).then(n=>{n!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(c){let n=!0;const R=this.layer,I=R.minScale,w=R.maxScale;if(null!=I&&null!=w){let A=!I,B=!w;!A&&c<=I&&(A=!0),!B&&c>=w&&(B=!0),n=A&&B}return n}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(c){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",c),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(c))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,e._)([(0,s.Cb)({type:S,set(c){const n=(0,M.Z)(c,this._get("clips"),S);this._set("clips",n)}})],d.prototype,"clips",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"moving",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"attached",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"container",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"suspended",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],d.prototype,"updateParameters",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"updateRequested",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"updating",null),(0,e._)([(0,s.Cb)()],d.prototype,"view",void 0),d=(0,e._)([(0,a.j)("esri.views.2d.layers.LayerView2D")],d),d}},59989:(W,m,t)=>{t.d(m,{Z:()=>E});var e=t(60046),C=t(64859),M=t(77624),_=t(10882),s=t(21511),j=t(33870),f=t(60305),b=t(73763),a=t(9077),g=(t(67474),t(57025),t(42442));let o=class extends((0,_.p)((0,s.I)((0,b.v)(M.Z.EventedMixin(C.Z))))){constructor(i){super(i),this.layer=null,this.parent=null}initialize(){this.when().catch(i=>{if("layerview:create-error"!==i.name){const u=this.layer&&this.layer.id||"no id",U=this.layer&&this.layer.title||"no title";throw j.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${U}', id: '${u}')`,i),i}})}get fullOpacity(){return(0,f.Pt)(this.get("layer.opacity"),1)*(0,f.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get("layer.visible")}set visible(i){void 0!==i?this._override("visible",i):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const i=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(i.viewNotReady=!0),this.layer&&this.layer.loaded||(i.layerNotLoaded=!0),this.visible||(i.layerInvisible=!0),i}isUpdating(){return!1}};(0,e._)([(0,a.Cb)()],o.prototype,"fullOpacity",null),(0,e._)([(0,a.Cb)()],o.prototype,"layer",void 0),(0,e._)([(0,a.Cb)()],o.prototype,"parent",void 0),(0,e._)([(0,a.Cb)({readOnly:!0})],o.prototype,"suspended",null),(0,e._)([(0,a.Cb)({readOnly:!0})],o.prototype,"suspendInfo",null),(0,e._)([(0,a.Cb)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,e._)([(0,a.Cb)({type:Boolean,readOnly:!0})],o.prototype,"updating",null),(0,e._)([(0,a.Cb)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,e._)([(0,a.Cb)()],o.prototype,"visible",null),o=(0,e._)([(0,g.j)("esri.views.layers.LayerView")],o);var E=o}}]);