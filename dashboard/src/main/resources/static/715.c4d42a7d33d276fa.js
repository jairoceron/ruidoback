"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[715],{16174:(C,g,t)=>{t.d(g,{eY:()=>U});var e=t(60305),l=t(19554),P=t(61274),a=t(3878),c=(t(26436),t(27001),t(67474),t(36320),t(40150),t(94345),t(82705),t(13006)),O=(t(48082),t(66505)),h=t(28644);function b(m,n,p){const v={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return n&&p&&(v.width=n,v.height=p),new c.Z(m,v)}class U extends O.s{constructor(n=null,p,v=!0){super(),this.requestRenderOnSourceChangedEnabled=v,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=p,this.source=n,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(n){this._height=n}get source(){return this._source}set source(n){this._source=n,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(n){this._width=n}beforeRender(n){super.beforeRender(n),this.updateTexture(n.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,P.c)()}}setTransform(n){const p=(0,l.b)(this.transforms.dvs),[v,T]=n.toScreenNoRotation([0,0],[this.x,this.y]),f=this.resolution/this.pixelRatio/n.resolution,I=f*this.width,x=f*this.height,A=Math.PI*this.rotation/180;(0,l.c)(p,p,(0,a.f)(v,T)),(0,l.c)(p,p,(0,a.f)(I/2,x/2)),(0,l.r)(p,p,-A),(0,l.c)(p,p,(0,a.f)(-I/2,-x/2)),(0,l.j)(p,p,(0,a.f)(I,x)),(0,l.m)(this.transforms.dvs,n.displayViewMat3,p)}setSamplingProfile(n){this._texture&&(n.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(n.samplingMode))}bind(n,p){this._texture&&n.bindTexture(this._texture,p)}updateTexture(n){var p;if(!this.stage)return null==(p=this._texture)||p.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?b(n,this.sourceWidth,this.sourceHeight):b(n));const v=this.source;if(v){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(m=v)&&"render"in m)if(v instanceof h.Z){const T=v.getRenderedRasterPixels();this._texture.setData((0,e.pC)(T)?T.renderedRasterPixels:null)}else this._texture.setData(function(m){const n=document.createElement("canvas");return n.width=m.width,n.height=m.height,m.render(n.getContext("2d")),n}(v));else(function(m){return m&&!("render"in m)})(v)&&this._texture.setData(v);this.ready()}else this._texture.setData(null);var m}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},40729:(C,g,t)=>{t.d(g,{s:()=>s});var e=t(13638),l=t(61274),P=t(16174),a=t(96620);class r extends a.I{constructor(i,c,d,O,h,M=null){super(i,c,d,O,h),this.bitmap=new P.eY(M,"standard",!1),this.bitmap.coordScale=[O,h],this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(i){super.beforeRender(i),this.bitmap.beforeRender(i)}afterRender(i){super.afterRender(i),this.bitmap.afterRender(i)}set stencilRef(i){this.bitmap.stencilRef=i}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:(0,l.c)(),tileMat3:(0,l.c)()}}setTransform(i,c){super.setTransform(i,c),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}var _=t(56109),y=t(38963),u=t(79337);class s extends u.Z{get requiresDedicatedFBO(){return this.children.some(i=>"additive"===i.bitmap.blendFunction)}createTile(i){const c=this._tileInfoView.getTileBounds((0,e.Ue)(),i),[d,O]=this._tileInfoView.tileInfo.size;return new r(i,c[0],c[3],d,O)}destroyTile(){}prepareRenderPasses(i){const c=i.registerRenderPass({name:"bitmap (tile)",brushes:[_.U.bitmap],target:()=>this.children.map(d=>d.bitmap),drawPhase:y.jx.MAP});return[...super.prepareRenderPasses(i),c]}doRender(i){this.visible&&i.drawPhase===y.jx.MAP&&super.doRender(i)}}},28644:(C,g,t)=>{t.d(g,{Z:()=>l});var e=t(60305);class l{constructor(a,r,_){this.pixelBlock=a,this.extent=r,this.originalPixelBlock=_}get width(){return(0,e.pC)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,e.pC)(this.pixelBlock)?this.pixelBlock.height:0}render(a){const r=this.pixelBlock;if((0,e.Wi)(r))return;const _=this.filter({pixelBlock:r});if((0,e.Wi)(_.pixelBlock))return;const y=_.pixelBlock.getAsRGBA(),u=a.createImageData(_.pixelBlock.width,_.pixelBlock.height);u.data.set(y),a.putImageData(u,0,0)}getRenderedRasterPixels(){const a=this.filter({pixelBlock:this.pixelBlock});return(0,e.Wi)(a.pixelBlock)?null:{width:a.pixelBlock.width,height:a.pixelBlock.height,renderedRasterPixels:new Uint8Array(a.pixelBlock.getAsRGBA().buffer)}}}},79337:(C,g,t)=>{t.d(g,{Z:()=>y});var e=t(67474),l=t(38963),P=t(91099),a=t(86932),r=t(3953);const _=(u,s)=>u.key.level-s.key.level!=0?u.key.level-s.key.level:u.key.row-s.key.row!=0?u.key.row-s.key.row:u.key.col-s.key.col;class y extends P.Z{constructor(s){super(),this._tileInfoView=s}get requiresDedicatedFBO(){return!1}renderChildren(s){this.sortChildren(_),this.setStencilReference(),super.renderChildren(s)}createRenderParams(s){const{state:o}=s,i=super.createRenderParams(s);return i.requiredLevel=this._tileInfoView.getClosestInfoForScale(o.scale).level,i.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(o.scale),i}prepareRenderPasses(s){const o=super.prepareRenderPasses(s);return o.push(s.registerRenderPass({name:"stencil",brushes:[r.Z],drawPhase:l.jx.DEBUG|l.jx.MAP|l.jx.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,e.Z)("esri-tiles-debug")&&o.push(s.registerRenderPass({name:"tileInfo",brushes:[a.Z],drawPhase:l.jx.DEBUG,target:()=>this.children})),o}getStencilTarget(){return this.children}updateTransforms(s){for(const o of this.children){const i=this._tileInfoView.getTileResolution(o.key);o.setTransform(s,i)}}setStencilReference(){let s=1;for(const o of this.children)o.stencilRef=s++}}},96620:(C,g,t)=>{t.d(g,{I:()=>a});var e=t(19554),l=t(66505),P=t(6525);class a extends l.s{constructor(_,y,u,s,o,i=s,c=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new P.Z(_),this.x=y,this.y=u,this.width=s,this.height=o,this.rangeX=i,this.rangeY=c}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(_,y){const u=y/(_.resolution*_.pixelRatio),s=this.transforms.tileMat3,[o,i]=_.toScreenNoRotation([0,0],[this.x,this.y]);(0,e.s)(s,this.width/this.rangeX*u,0,0,0,this.height/this.rangeY*u,0,o,i,1),(0,e.m)(this.transforms.dvs,_.displayViewMat3,s)}}},61793:(C,g,t)=>{t.d(g,{Y:()=>u});var e=t(60046),_=(t(9077),t(67474),t(57025),t(33870),t(42442)),y=t(40729);const u=s=>{let o=class extends s{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new y.s(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}};return o=(0,e._)([(0,_.j)("esri.views.2d.layers.BitmapTileLayerView2D")],o),o}},70297:(C,g,t)=>{t.d(g,{y:()=>A});var e=t(60046),l=t(76011),P=t(55208),a=t(97467),r=t(9077),s=(t(67474),t(57025),t(33870),t(42442)),o=t(29729),i=t(54792);let c=class extends i.wq{};c=(0,e._)([(0,s.j)("esri.views.layers.support.ClipArea")],c);var O,d=c;let h=O=class extends d{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new O({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"left",void 0),(0,e._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"right",void 0),(0,e._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"top",void 0),(0,e._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"bottom",void 0),(0,e._)([(0,r.Cb)({readOnly:!0})],h.prototype,"version",null),h=O=(0,e._)([(0,s.j)("esri.views.layers.support.ClipRect")],h);var n,M=h,L=(t(73513),t(40485)),b=t(52917),U=t(82059),m=t(70393);const p={base:L.Z,key:"type",typeMap:{extent:U.Z,polygon:m.Z}};let v=n=class extends d{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new n({geometry:this.geometry.clone()})}};(0,e._)([(0,r.Cb)({types:p,json:{read:b.im,write:!0}})],v.prototype,"geometry",void 0),(0,e._)([(0,r.Cb)({readOnly:!0})],v.prototype,"version",null),v=n=(0,e._)([(0,s.j)("esri.views.layers.support.Geometry")],v);var T=v;let f=class extends d{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,r.Cb)({type:[[[Number]]],json:{write:!0}})],f.prototype,"path",void 0),(0,e._)([(0,r.Cb)({readOnly:!0})],f.prototype,"version",null),f=(0,e._)([(0,s.j)("esri.views.layers.support.Path")],f);const x=l.Z.ofType({key:"type",base:d,typeMap:{rect:M,path:f,geometry:T}}),A=V=>{let D=class extends V{constructor(){super(...arguments),this.clips=new x,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var R;this.container||(this.container=new o.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,a.S1)(this,"suspended",E=>{this.container&&(this.container.visible=!E),this.view&&!E&&this.updateRequested&&this.view.requestUpdate()},!0),(0,a.S1)(this,["layer.opacity","container"],()=>{var E,B;this.container&&(this.container.opacity=null!=(E=null==(B=this.layer)?void 0:B.opacity)?E:1)},!0),(0,a.S1)(this,["layer.blendMode"],E=>{this.container&&(this.container.blendMode=E)},!0),(0,a.S1)(this,["layer.effect"],E=>{this.container&&(this.container.effect=E)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(R=this.view)&&R.whenLayerView?this.view.whenLayerView(this.layer).then(E=>{E!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(R){let E=!0;const B=this.layer,W=B.minScale,K=B.maxScale;if(null!=W&&null!=K){let w=!W,S=!K;!w&&R<=W&&(w=!0),!S&&R>=K&&(S=!0),E=w&&S}return E}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(R){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",R),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(R))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,e._)([(0,r.Cb)({type:x,set(R){const E=(0,P.Z)(R,this._get("clips"),x);this._set("clips",E)}})],D.prototype,"clips",void 0),(0,e._)([(0,r.Cb)()],D.prototype,"moving",void 0),(0,e._)([(0,r.Cb)()],D.prototype,"attached",void 0),(0,e._)([(0,r.Cb)()],D.prototype,"container",void 0),(0,e._)([(0,r.Cb)()],D.prototype,"suspended",void 0),(0,e._)([(0,r.Cb)({readOnly:!0})],D.prototype,"updateParameters",void 0),(0,e._)([(0,r.Cb)()],D.prototype,"updateRequested",void 0),(0,e._)([(0,r.Cb)()],D.prototype,"updating",null),(0,e._)([(0,r.Cb)()],D.prototype,"view",void 0),D=(0,e._)([(0,s.j)("esri.views.2d.layers.LayerView2D")],D),D}},59989:(C,g,t)=>{t.d(g,{Z:()=>O});var e=t(60046),l=t(64859),P=t(77624),a=t(10882),r=t(21511),_=t(33870),y=t(60305),u=t(73763),s=t(9077),c=(t(67474),t(57025),t(42442));let d=class extends((0,a.p)((0,r.I)((0,u.v)(P.Z.EventedMixin(l.Z))))){constructor(h){super(h),this.layer=null,this.parent=null}initialize(){this.when().catch(h=>{if("layerview:create-error"!==h.name){const M=this.layer&&this.layer.id||"no id",j=this.layer&&this.layer.title||"no title";throw _.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${j}', id: '${M}')`,h),h}})}get fullOpacity(){return(0,y.Pt)(this.get("layer.opacity"),1)*(0,y.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get("layer.visible")}set visible(h){void 0!==h?this._override("visible",h):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const h=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(h.viewNotReady=!0),this.layer&&this.layer.loaded||(h.layerNotLoaded=!0),this.visible||(h.layerInvisible=!0),h}isUpdating(){return!1}};(0,e._)([(0,s.Cb)()],d.prototype,"fullOpacity",null),(0,e._)([(0,s.Cb)()],d.prototype,"layer",void 0),(0,e._)([(0,s.Cb)()],d.prototype,"parent",void 0),(0,e._)([(0,s.Cb)({readOnly:!0})],d.prototype,"suspended",null),(0,e._)([(0,s.Cb)({readOnly:!0})],d.prototype,"suspendInfo",null),(0,e._)([(0,s.Cb)({readOnly:!0})],d.prototype,"legendEnabled",null),(0,e._)([(0,s.Cb)({type:Boolean,readOnly:!0})],d.prototype,"updating",null),(0,e._)([(0,s.Cb)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,e._)([(0,s.Cb)()],d.prototype,"visible",null),d=(0,e._)([(0,c.j)("esri.views.layers.LayerView")],d);var O=d},72619:(C,g,t)=>{t.d(g,{y:()=>s});var e=t(60046),l=t(33870),P=t(12523),a=t(97467),r=t(9077),u=(t(67474),t(57025),t(42442));const s=o=>{let i=class extends o{initialize(){this.handles.add((0,a.on)(this,"layer","refresh",()=>{this.doRefresh().catch(c=>{(0,P.D_)(c)||l.Z.getLogger(this.declaredClass).error(c)})}),"RefreshableLayerView")}};return(0,e._)([(0,r.Cb)()],i.prototype,"layer",void 0),i=(0,e._)([(0,u.j)("esri.layers.mixins.RefreshableLayerView")],i),i}}}]);