"use strict";var it=Object.defineProperty,q=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,tt=(M,u,t)=>u in M?it(M,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):M[u]=t,F=(M,u)=>{for(var t in u||(u={}))rt.call(u,t)&&tt(M,t,u[t]);if(q)for(var t of q(u))at.call(u,t)&&tt(M,t,u[t]);return M};(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[6190],{16174:(M,u,t)=>{t.d(u,{eY:()=>B});var i=t(60305),c=t(19554),f=t(61274),_=t(3878),V=(t(26436),t(27001),t(67474),t(36320),t(40150),t(94345),t(82705),t(13006)),I=(t(48082),t(66505)),h=t(28644);function S(E,r,d){const p={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return r&&d&&(p.width=r,p.height=d),new V.Z(E,p)}class B extends I.s{constructor(r=null,d,p=!0){super(),this.requestRenderOnSourceChangedEnabled=p,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=d,this.source=r,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(r){this._height=r}get source(){return this._source}set source(r){this._source=r,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(r){this._width=r}beforeRender(r){super.beforeRender(r),this.updateTexture(r.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:(0,f.c)()}}setTransform(r){const d=(0,c.b)(this.transforms.dvs),[p,x]=r.toScreenNoRotation([0,0],[this.x,this.y]),R=this.resolution/this.pixelRatio/r.resolution,U=R*this.width,m=R*this.height,K=Math.PI*this.rotation/180;(0,c.c)(d,d,(0,_.f)(p,x)),(0,c.c)(d,d,(0,_.f)(U/2,m/2)),(0,c.r)(d,d,-K),(0,c.c)(d,d,(0,_.f)(-U/2,-m/2)),(0,c.j)(d,d,(0,_.f)(U,m)),(0,c.m)(this.transforms.dvs,r.displayViewMat3,d)}setSamplingProfile(r){this._texture&&(r.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(r.samplingMode))}bind(r,d){this._texture&&r.bindTexture(this._texture,d)}updateTexture(r){var d;if(!this.stage)return null==(d=this._texture)||d.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?S(r,this.sourceWidth,this.sourceHeight):S(r));const p=this.source;if(p){if(this._texture.resize(this.sourceWidth,this.sourceHeight),(E=p)&&"render"in E)if(p instanceof h.Z){const x=p.getRenderedRasterPixels();this._texture.setData((0,i.pC)(x)?x.renderedRasterPixels:null)}else this._texture.setData(function(E){const r=document.createElement("canvas");return r.width=E.width,r.height=E.height,E.render(r.getContext("2d")),r}(p));else(function(E){return E&&!("render"in E)})(p)&&this._texture.setData(p);this.ready()}else this._texture.setData(null);var E}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},7109:(M,u,t)=>{t.d(u,{c:()=>_});var i=t(56109),c=t(38963),f=t(91099);class _ extends f.Z{get requiresDedicatedFBO(){return this.children.some(v=>"additive"===v.blendFunction)}prepareRenderPasses(v){const D=v.registerRenderPass({name:"bitmap",brushes:[i.U.bitmap],target:()=>this.children,drawPhase:c.jx.MAP});return[...super.prepareRenderPasses(v),D]}}},28644:(M,u,t)=>{t.d(u,{Z:()=>c});var i=t(60305);class c{constructor(_,l,v){this.pixelBlock=_,this.extent=l,this.originalPixelBlock=v}get width(){return(0,i.pC)(this.pixelBlock)?this.pixelBlock.width:0}get height(){return(0,i.pC)(this.pixelBlock)?this.pixelBlock.height:0}render(_){const l=this.pixelBlock;if((0,i.Wi)(l))return;const v=this.filter({pixelBlock:l});if((0,i.Wi)(v.pixelBlock))return;const D=v.pixelBlock.getAsRGBA(),b=_.createImageData(v.pixelBlock.width,v.pixelBlock.height);b.data.set(D),_.putImageData(b,0,0)}getRenderedRasterPixels(){const _=this.filter({pixelBlock:this.pixelBlock});return(0,i.Wi)(_.pixelBlock)?null:{width:_.pixelBlock.width,height:_.pixelBlock.height,renderedRasterPixels:new Uint8Array(_.pixelBlock.getAsRGBA().buffer)}}}},6190:(M,u,t)=>{t.r(u),t.d(u,{default:()=>K});var i=t(61921),c=t(60046),f=t(57711),_=t(40662),l=t(76011),v=t(47765),D=t(60305),b=t(89225),y=t(9077),g=(t(67474),t(57025),t(33870),t(42442)),I=t(82059),h=t(62733),C=t(56703),L=t(87337),w=t(44564),S=t(38953),B=t(12794),E=t(16174),r=t(7109),d=t(70297),p=t(561),x=t(8940),R=t(59989);class U{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let m=class extends((0,d.y)(R.Z)){constructor(){super(...arguments),this._handles=new v.Z,this._bitmapIndex=new Map,this._mapImageContainer=new r.c,this._kmlVisualData=new U,this.allVisiblePoints=new B.JN,this.allVisiblePolylines=new B.JN,this.allVisiblePolygons=new B.JN,this.allVisibleMapImages=new l.Z}hitTest(e,s){if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return Promise.resolve(null);const n=[this._pointsView.hitTest(e,s),this._polylinesView.hitTest(e,s),this._polygonsView.hitTest(e,s)];return Promise.all(n).then(o=>o.filter(P=>(P&&(P.layer=this.layer,P.sourceLayer=this.layer),!!P))[0]||null)}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._handles.add([this.allVisibleMapImages.on("change",e=>{e.added.forEach(s=>this._addMapImage(s)),e.removed.forEach(s=>this._removeMapImage(s))})]),this.container.addChild(this._mapImageContainer),this._polygonsView=new x.Z({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new p.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new x.Z({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new p.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new x.Z({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new p.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.watch("layer.visibleSublayers",e=>{for(const[s,n]of this._kmlVisualData.allSublayers)n.visibility=0;for(const s of e){const n=this._kmlVisualData.allSublayers.get(s.id);n&&(n.visibility=1)}this._refreshCollections()}),this._fetchingPromise=this._fetchService().then(()=>{this._fetchingPromise=null,this.notifyChange("updating")})}detach(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return null!=this._fetchingPromise||this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&(0,_.default)(e.href,{responseType:"image"}).then(({data:s})=>{let n=I.Z.fromJSON(e.extent);(0,L.Q8)(n,this.view.spatialReference)&&(n=(0,L.iV)(n,this.view.spatialReference));const o=new E.eY(s,"standard");o.x=n.xmin,o.y=n.ymax,o.resolution=n.width/s.naturalWidth,o.rotation=e.rotation,this._mapImageContainer.addChild(o),this._bitmapIndex.set(e,o)})}_getViewDependentUrl(e,s){return(0,i.Z)(function*(){const{viewFormat:n,viewBoundScale:o,httpQuery:P}=e;if((0,D.pC)(n)){if((0,D.Wi)(s))throw new Error("Loading this network link requires a view state.");let a;if(yield(0,h.zD)(),(0,D.pC)(o)&&1!==o){const W=new I.Z(s.extent);W.expand(o),a=W}else a=s.extent;a=(0,h.iV)(a,C.Z.WGS84);const T=(0,h.iV)(a,C.Z.WebMercator),A=a.xmin,j=a.xmax,G=a.ymin,O=a.ymax,et=s.size[0]*s.pixelRatio,st=s.size[1]*s.pixelRatio,Y=Math.max(T.width,T.height),$={"[bboxWest]":A.toString(),"[bboxEast]":j.toString(),"[bboxSouth]":G.toString(),"[bboxNorth]":O.toString(),"[lookatLon]":a.center.x.toString(),"[lookatLat]":a.center.y.toString(),"[lookatRange]":Y.toString(),"[lookatTilt]":"0","[lookatHeading]":s.rotation.toString(),"[lookatTerrainLon]":a.center.x.toString(),"[lookatTerrainLat]":a.center.y.toString(),"[lookatTerrainAlt]":"0","[cameraLon]":a.center.x.toString(),"[cameraLat]":a.center.y.toString(),"[cameraAlt]":Y.toString(),"[horizFov]":"60","[vertFov]":"60","[horizPixels]":et.toString(),"[vertPixels]":st.toString(),"[terrainEnabled]":"0","[clientVersion]":f.i8,"[kmlVersion]":"2.2","[clientName]":"ArcGIS API for JavaScript","[language]":"en-US"},Q=W=>{for(const X in W)for(const k in $)W[X]=W[X].replace(k,$[k])},H=(0,b.u0)(n);Q(H);let z={};(0,D.pC)(P)&&(z=(0,b.u0)(P),Q(z));const J=(0,S.en)(e.href);return J.query=F(F(F({},J.query),H),z),`${J.path}?${(0,b.B7)(H)}`}return e.href})()}_fetchService(){var e=this;return(0,i.Z)(function*(){const s=new U;yield e._loadVisualData(e.layer.url,s),e._kmlVisualData=s,e._refreshCollections()})()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e)),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e)),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e)),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e))}_isSublayerVisible(e){const s=this._kmlVisualData.allSublayers.get(e);return!!s.visibility&&(-1===s.parentFolderId||this._isSublayerVisible(s.parentFolderId))}_loadVisualData(e,s){var n=this;return this._fetchParsedKML(e).then(function(){var o=(0,i.Z)(function*(P){for(const a of P.sublayers){s.allSublayers.set(a.id,a);const T=a.points?yield(0,w.Yu)(a.points):[],A=a.polylines?yield(0,w.Yu)(a.polylines):[],j=a.polygons?yield(0,w.Yu)(a.polygons):[],G=a.mapImages||[];if(s.allPoints.push(...T.map(O=>({item:O,sublayerId:a.id}))),s.allPolylines.push(...A.map(O=>({item:O,sublayerId:a.id}))),s.allPolygons.push(...j.map(O=>({item:O,sublayerId:a.id}))),s.allMapImages.push(...G.map(O=>({item:O,sublayerId:a.id}))),a.networkLink){const O=yield n._getViewDependentUrl(a.networkLink,n.view.state);yield n._loadVisualData(O,s)}}});return function(P){return o.apply(this,arguments)}}())}_fetchParsedKML(e){return(0,w.CS)(e,this.view.spatialReference,this.layer.refreshInterval).then(s=>(0,w.Cw)(s.data))}_removeMapImage(e){const s=this._bitmapIndex.get(e);s&&(this._mapImageContainer.removeChild(s),this._bitmapIndex.delete(e))}};(0,c._)([(0,y.Cb)()],m.prototype,"_pointsView",void 0),(0,c._)([(0,y.Cb)()],m.prototype,"_polylinesView",void 0),(0,c._)([(0,y.Cb)()],m.prototype,"_polygonsView",void 0),(0,c._)([(0,y.Cb)()],m.prototype,"_fetchingPromise",void 0),(0,c._)([(0,y.Cb)()],m.prototype,"updating",void 0),m=(0,c._)([(0,g.j)("esri.views.2d.layers.KMLLayerView2D")],m);var K=m},70297:(M,u,t)=>{t.d(u,{y:()=>K});var i=t(60046),c=t(76011),f=t(55208),_=t(97467),l=t(9077),y=(t(67474),t(57025),t(33870),t(42442)),Z=t(29729),N=t(54792);let V=class extends N.wq{};V=(0,i._)([(0,y.j)("esri.views.layers.support.ClipArea")],V);var I,g=V;let h=I=class extends g{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new I({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,i._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"left",void 0),(0,i._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"right",void 0),(0,i._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"top",void 0),(0,i._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],h.prototype,"bottom",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],h.prototype,"version",null),h=I=(0,i._)([(0,y.j)("esri.views.layers.support.ClipRect")],h);var r,C=h,w=(t(73513),t(40485)),S=t(52917),B=t(82059),E=t(70393);const d={base:w.Z,key:"type",typeMap:{extent:B.Z,polygon:E.Z}};let p=r=class extends g{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new r({geometry:this.geometry.clone()})}};(0,i._)([(0,l.Cb)({types:d,json:{read:S.im,write:!0}})],p.prototype,"geometry",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],p.prototype,"version",null),p=r=(0,i._)([(0,y.j)("esri.views.layers.support.Geometry")],p);var x=p;let R=class extends g{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,i._)([(0,l.Cb)({type:[[[Number]]],json:{write:!0}})],R.prototype,"path",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],R.prototype,"version",null),R=(0,i._)([(0,y.j)("esri.views.layers.support.Path")],R);const m=c.Z.ofType({key:"type",base:g,typeMap:{rect:C,path:R,geometry:x}}),K=e=>{let s=class extends e{constructor(){super(...arguments),this.clips=new m,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var n;this.container||(this.container=new Z.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,_.S1)(this,"suspended",o=>{this.container&&(this.container.visible=!o),this.view&&!o&&this.updateRequested&&this.view.requestUpdate()},!0),(0,_.S1)(this,["layer.opacity","container"],()=>{var o,P;this.container&&(this.container.opacity=null!=(o=null==(P=this.layer)?void 0:P.opacity)?o:1)},!0),(0,_.S1)(this,["layer.blendMode"],o=>{this.container&&(this.container.blendMode=o)},!0),(0,_.S1)(this,["layer.effect"],o=>{this.container&&(this.container.effect=o)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(n=this.view)&&n.whenLayerView?this.view.whenLayerView(this.layer).then(o=>{o!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(n){let o=!0;const P=this.layer,a=P.minScale,T=P.maxScale;if(null!=a&&null!=T){let A=!a,j=!T;!A&&n<=a&&(A=!0),!j&&n>=T&&(j=!0),o=A&&j}return o}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(n){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",n),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(n))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,i._)([(0,l.Cb)({type:m,set(n){const o=(0,f.Z)(n,this._get("clips"),m);this._set("clips",o)}})],s.prototype,"clips",void 0),(0,i._)([(0,l.Cb)()],s.prototype,"moving",void 0),(0,i._)([(0,l.Cb)()],s.prototype,"attached",void 0),(0,i._)([(0,l.Cb)()],s.prototype,"container",void 0),(0,i._)([(0,l.Cb)()],s.prototype,"suspended",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],s.prototype,"updateParameters",void 0),(0,i._)([(0,l.Cb)()],s.prototype,"updateRequested",void 0),(0,i._)([(0,l.Cb)()],s.prototype,"updating",null),(0,i._)([(0,l.Cb)()],s.prototype,"view",void 0),s=(0,i._)([(0,y.j)("esri.views.2d.layers.LayerView2D")],s),s}},59989:(M,u,t)=>{t.d(u,{Z:()=>I});var i=t(60046),c=t(64859),f=t(77624),_=t(10882),l=t(21511),v=t(33870),D=t(60305),b=t(73763),y=t(9077),V=(t(67474),t(57025),t(42442));let g=class extends((0,_.p)((0,l.I)((0,b.v)(f.Z.EventedMixin(c.Z))))){constructor(h){super(h),this.layer=null,this.parent=null}initialize(){this.when().catch(h=>{if("layerview:create-error"!==h.name){const C=this.layer&&this.layer.id||"no id",L=this.layer&&this.layer.title||"no title";throw v.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${L}', id: '${C}')`,h),h}})}get fullOpacity(){return(0,D.Pt)(this.get("layer.opacity"),1)*(0,D.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get("layer.visible")}set visible(h){void 0!==h?this._override("visible",h):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const h=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(h.viewNotReady=!0),this.layer&&this.layer.loaded||(h.layerNotLoaded=!0),this.visible||(h.layerInvisible=!0),h}isUpdating(){return!1}};(0,i._)([(0,y.Cb)()],g.prototype,"fullOpacity",null),(0,i._)([(0,y.Cb)()],g.prototype,"layer",void 0),(0,i._)([(0,y.Cb)()],g.prototype,"parent",void 0),(0,i._)([(0,y.Cb)({readOnly:!0})],g.prototype,"suspended",null),(0,i._)([(0,y.Cb)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,i._)([(0,y.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,i._)([(0,y.Cb)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,i._)([(0,y.Cb)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,i._)([(0,y.Cb)()],g.prototype,"visible",null),g=(0,i._)([(0,V.j)("esri.views.layers.LayerView")],g);var I=g}}]);