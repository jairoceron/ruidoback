"use strict";var x=Object.defineProperty,H=Object.defineProperties,z=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,W=(l,n,t)=>n in l?x(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,B=(l,n)=>{for(var t in n||(n={}))G.call(n,t)&&W(l,t,n[t]);if(L)for(var t of L(n))Q.call(n,t)&&W(l,t,n[t]);return l},j=(l,n)=>H(l,z(n));(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[4257],{84257:(l,n,t)=>{t.r(n),t.d(n,{default:()=>w});var P=t(61921),v=t(60046),c=(t(67474),t(60305)),i=(t(9077),t(57025),t(33870),t(42442)),u=t(32699),M=t(39605),D=t(99155),A=t(73331),E=t(5082);class h{constructor(s,a){this.offset=s,this.extent=a}}let y=class extends A.Z{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}update(_,s){var a=this;return(0,P.Z)(function*(){const r=s.schema.processors[0];"heatmap"===r.type&&(0,u.Hg)(a._schema,r)&&(_.mesh=!0,a._schema=r)})()}onTileUpdate(_){for(const s of _.removed)this._tileKeyToFeatureSets.delete(s.key.id)}onTileClear(_){return this._tileKeyToFeatureSets.delete(_.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:_.id,data:{clear:!0}})}onTileMessage(_,s,a){var r=this;return(0,P.Z)(function*(){r._tileKeyToFeatureSets.has(_.key.id)||r._tileKeyToFeatureSets.set(_.key.id,new Map);const e=r._tileKeyToFeatureSets.get(_.key.id);if((0,c.pC)(s.addOrUpdate)&&s.addOrUpdate.hasFeatures&&e.set(s.addOrUpdate.instance,s),s.end){const d=[],C=function(_){const s=_.key,a=new Map,r=256,e=D.I_,d=_.tileInfoView.tileInfo.isWrappable;return a.set((0,E.M)(s,-1,-1,d).id,new h([-e,-e],[e-r,e-r,e,e])),a.set((0,E.M)(s,0,-1,d).id,new h([0,-e],[0,e-r,e,e])),a.set((0,E.M)(s,1,-1,d).id,new h([e,-e],[0,e-r,r,e])),a.set((0,E.M)(s,-1,0,d).id,new h([-e,0],[e-r,0,e,e])),a.set((0,E.M)(s,1,0,d).id,new h([e,0],[0,0,r,e])),a.set((0,E.M)(s,-1,1,d).id,new h([-e,e],[e-r,0,e,r])),a.set((0,E.M)(s,0,1,d).id,new h([0,e],[0,0,e,r])),a.set((0,E.M)(s,1,1,d).id,new h([e,e],[0,0,r,r])),a}(_);r._tileKeyToFeatureSets.forEach((R,m)=>{if(m===_.key.id)R.forEach(K=>(0,c.Po)(K.addOrUpdate,U=>d.push(U)));else if(C.has(m)){const K=C.get(m),[U,k]=K.offset;R.forEach(b=>(0,c.Po)(b.addOrUpdate,V=>{const Z=V.transform(U,k,1,1);d.push(Z)}))}});const I=(0,M.QM)(d,r._schema.mesh,512,512),F=[I.matrix];return r.remoteClient.invoke("tileRenderer.onTileData",{tileKey:_.key.id,intensityInfo:I},j(B({},a),{transferList:F}))}})()}onTileError(_,s,a){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:_.id,error:s},a)}};y=(0,v._)([(0,i.j)("esri.views.2d.layers.features.processors.HeatmapProcessor")],y);var w=y},5082:(l,n,t)=>{function T(c,f,p,O){const i=c.clone(),u=1<<i.level,M=i.col+f,D=i.row+p;return O&&M<0?(i.col=M+u,i.world-=1):M>=u?(i.col=M-u,i.world+=1):i.col=M,i.row=D,i}t.d(n,{M:()=>T}),t(25644)}}]);