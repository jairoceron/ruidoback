"use strict";var Ie=Object.defineProperty,Y=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,q=(N,f,s)=>f in N?Ie(N,f,{enumerable:!0,configurable:!0,writable:!0,value:s}):N[f]=s,U=(N,f)=>{for(var s in f||(f={}))Ne.call(f,s)&&q(N,s,f[s]);if(Y)for(var s of Y(f))xe.call(f,s)&&q(N,s,f[s]);return N};(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[4810],{74810:(N,f,s)=>{s.r(f),s.d(f,{csvLatitudeFieldNames:()=>B,csvLongitudeFieldNames:()=>$,default:()=>ge});var E=s(61921),j=(s(73513),s(40662)),h=s(22795),P=s(67474),Z=s(43267),S=s(89225),R=s(62733),y=s(64124),g=s(89096),b=s(87337),w=s(82535),v=s(82490),H=s(32620),X=s(68310),k=s(44654);const _=/^\s*"([\S\s]*)"\s*$/,ee=/""/g,te=[","," ",";","|","\t"];function ne(o,t){const n={},e=o.length;for(let r=0;r<e;r++)n[o[r]]=t[r];return n}function*A(o,t,n){let e=0;for(;e<=o.length;){const r=o.indexOf(t,e),i=o.substring(e,r>-1?r:void 0);e+=i.length+t.length,n&&!i.trim()||(yield i)}}function L(o){const t=o.includes("\r\n")?"\r\n":"\n";return A(o,t,!0)}function ie(o,t){return A(o,t,!1)}function*Q(o,t,n){let e="",r="",i=0,d=[];e:for(;;){const{value:p,done:c}=o.next();if(c)return;const m=ie(p,n);t:for(;;){const{value:l,done:a}=m.next();if(a)break t;if(e+=r+l,r="",i+=se(l),i%2==0){if(i>0){const F=_.exec(e);if(!F){d=[],e="",i=0;continue e}d.push(F[1].replace(ee,'"'))}else d.push(e);e="",i=0}else r=n}0===i?(yield ne(t,d),d=[]):r="\n"}}function se(o){let t=0,n=0;for(n=o.indexOf('"',n);n>=0;)t++,n=o.indexOf('"',n+1);return t}var le=s(31378),oe=s(25808),ae=s(56703);const ue=(0,le.bU)("esriGeometryPoint"),de=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"],B=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point-y"],$=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point-x"],ce=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,fe=["csv"],pe=[0,0];class me{constructor(t,n){this.x=t,this.y=n}}const M=function(){const o=(0,Z.lt)(),t=new RegExp("^"+o.regexp+"$"),n=new RegExp("["+o.group+"\\s\\xa0]","g"),e=o.factor;return function(r){const i=t.exec(r);if(o.factor=e,!i)return NaN;let d=i[1];if(!i[1]){if(!i[2])return NaN;d=i[2],o.factor*=-1}return d=d.replace(n,"").replace(o.decimal,"."),+d*o.factor}}(),ye="isInteger"in Number?Number.isInteger:o=>"number"==typeof o&&isFinite(o)&&Math.floor(o)===o;class ge{constructor(){this._fieldsIndex=null,this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null,this._fieldsIndex=null}load(t,n={}){var e=this;return(0,E.Z)(function*(){const[r]=yield Promise.all([e._fetch(t.url,n),e._checkProjection(n&&t.parsing&&t.parsing.spatialReference)]),i=e._parse(r,t);if(e._queryEngine=e._createQueryEngine(r,i),i.layerDefinition.extent=e._queryEngine.fullExtent,i.layerDefinition.timeInfo){const{start:d,end:p}=e._queryEngine.timeExtent;i.layerDefinition.timeInfo.timeExtent=[d,p]}return i})()}applyEdits(){return(0,E.Z)(function*(){throw new h.Z("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer")})()}queryFeatures(t={},n={}){return this._queryEngine.executeQuery(t,n.signal)}queryFeatureCount(t={},n={}){return this._queryEngine.executeQueryForCount(t,n.signal)}queryObjectIds(t={},n={}){return this._queryEngine.executeQueryForIds(t,n.signal)}queryExtent(t={},n={}){return this._queryEngine.executeQueryForExtent(t,n.signal)}querySnapping(t,n={}){return this._queryEngine.executeQueryForSnapping(t,n.signal)}_fetch(t,n){return(0,E.Z)(function*(){if(!t)throw new h.Z("csv-source:invalid-source","url not defined");const e=(0,S.mN)(t);return(yield(0,j.default)(e.path,{query:e.query,responseType:"text",signal:n.signal})).data})()}_parse(t,n){const e=n.parsing||{},r={columnDelimiter:e.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:e.latitudeField,longitudeFieldName:e.longitudeField}},i=L(t);let{value:d}=i.next();if(!d)throw new h.Z("csv","CSV is empty",{csv:t});if(d=d.trim(),!e.columnDelimiter){const l=function(o){const t=o.trim();let n=0,e="";for(const r of te){const i=t.split(r).length;i>n&&(n=i,e=r)}return""===e?null:e}(d);if(!l)throw new h.Z("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");r.columnDelimiter=l}const p=d.split(r.columnDelimiter),c=r.layerDefinition={name:(0,S.vt)(n.url,fe)||"csv",drawingInfo:ue,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:e.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:e.spatialReference||{wkid:102100}}};if(!e.latitudeField||!e.longitudeField){const l=this._inferLocationInfo(p);if(!e.longitudeField&&!l.longitudeFieldName||!e.latitudeField&&!l.latitudeFieldName)throw new h.Z("csv","Unable to identify latitudeField and/or longitudeField from CSV");r.locationInfo={longitudeFieldName:e.longitudeField||l.longitudeFieldName,latitudeFieldName:e.latitudeField||l.latitudeFieldName}}const m=this._inferFields(i,r.columnDelimiter,p,r.locationInfo);if(e.fields&&e.fields.length){const l=new Map;for(const a of e.fields)l.set(a.name.toLowerCase(),a);for(const a of m){const F=l.get(a.name.toLowerCase());if(F){const C=a.name;Object.assign(a,F),a.name=C}}}if(c.fields=m,!c.fields.some(l=>"esriFieldTypeOID"===l.type&&(c.objectIdField=l.name,!0))){const l={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};c.objectIdField=l.name,c.fields.unshift(l)}if(this._fieldsIndex=new oe.Z(c.fields),c.timeInfo){const l=c.timeInfo;if(l.startTimeField){const a=this._fieldsIndex.get(l.startTimeField);a?(l.startTimeField=a.name,a.type="esriFieldTypeDate"):l.startTimeField=null}if(l.endTimeField){const a=this._fieldsIndex.get(l.endTimeField);a?(l.endTimeField=a.name,a.type="esriFieldTypeDate"):l.endTimeField=null}if(l.trackIdField){const a=this._fieldsIndex.get(l.trackIdField);l.trackIdField=a?a.name:null}l.startTimeField||l.endTimeField||(c.timeInfo=null)}return r}_inferLocationInfo(t){let n=null,e=null;const r=i=>t.find(d=>d.toLowerCase()===i);return $.some(i=>(n=r(i),!!n)),B.some(i=>(e=r(i),!!e)),{longitudeFieldName:n,latitudeFieldName:e}}_inferFields(t,n,e,r){const i=[],d=Q(t,e,n),p=[];e:for(;p.length<10;){const{value:c,done:m}=d.next();if(m)break e;p.push(c)}for(const c of e)if(c===r.longitudeFieldName||c===r.latitudeFieldName)i.push({name:c,type:"esriFieldTypeDouble",alias:c});else{const m=p.map(F=>F[c]),l=this._inferFieldType(m),a={name:c,type:null,alias:c};switch(l){case"integer":a.type="esriFieldTypeInteger";break;case"double":a.type="esriFieldTypeDouble";break;case"date":a.type="esriFieldTypeDate",a.length=36;break;default:a.type="esriFieldTypeString",a.length=255}i.push(a)}return i}_inferFieldType(t){if(!t.length)return"string";const n=/[^+-.,0-9]/;return t.map(e=>{let r=!1;if(""!==e){if(n.test(e))r=!0;else{let i=M(e);if(!isNaN(i))return/[.,]/.test(e)||!ye(i)||i>214783647||i<-214783648?"double":"integer";if(-1===e.indexOf("E"))r=!0;else{if(i=Number(e),!isNaN(i))return"double";if(-1===e.indexOf(","))r=!0;else{if(e=e.replace(",","."),i=Number(e),!isNaN(i))return"double";r=!0}}}if(r){if(!/^[-]?\d*[.,]?\d*$/.test(e)){const i=new Date(e);return this._isValidDate(i,e)?"date":"string"}return"string"}return"string"}}).reduce((e,r)=>void 0===e||e===r?r:"string"===e||"string"===r?"string":"double"===e||"double"===r?"double":void 0)}_isValidDate(t,n){if(!t||"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))return!1;let e=!0;if((0,P.Z)("chrome")&&/\d+\W*$/.test(n)){const r=n.match(/[a-zA-Z]{2,}/);if(r){let i=!1,d=0;for(;!i&&d<=r.length;)i=!ce.test(r[d]),d++;e=!i}}return e}_createQueryEngine(t,n){const{latitudeFieldName:e,longitudeFieldName:r}=n.locationInfo,{objectIdField:i,fields:d,extent:p,timeInfo:c}=n.layerDefinition;let m=[];const l=[],a=new Set,F=new Set,C=[];for(const{name:u,type:T}of d)"esriFieldTypeDate"===T?a.add(u):de.indexOf(T)>-1&&F.add(u),u!==i&&C.push(u);let W=0;const z=L(t);z.next();const he=Q(z,C,n.columnDelimiter);e:for(;;){const{value:u,done:T}=he.next();if(T)break e;const D=this._parseCoordinateValue(u[e]),x=this._parseCoordinateValue(u[r]);if(null!=x&&null!=D&&!isNaN(D)&&!isNaN(x)){u[e]=D,u[r]=x;for(const I in u)if(I!==e&&I!==r)if(a.has(I)){const O=new Date(u[I]);u[I]=this._isValidDate(O,u[I])?O.getTime():null}else if(F.has(I)){const O=M(u[I]);u[I]=isNaN(O)?null:O}u[i]=W,W++,m.push(new me(x,D)),l.push(u)}}if(!(0,g.fS)({wkid:4326},p.spatialReference))if((0,g.sS)(p.spatialReference))for(const u of m)[u.x,u.y]=(0,b.hG)(u.x,u.y,pe);else m=(0,R.oj)(y.N,m,ae.Z.WGS84,p.spatialReference,null);const J=new H.Z({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),Fe=new k.Z({fields:n.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:c,objectIdField:i,spatialReference:p.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:J}),K=[];for(let u=0;u<m.length;u++){const{x:T,y:D}=m[u],x=l[u];x[i]=u+1,K.push(new w.ZP(new v.Z([],[T,D]),x,null,x[i]))}return J.addMany(K),Fe}_parseCoordinateValue(t){if(null==t||""===t)return null;let n=M(t);return(isNaN(n)||Math.abs(n)>181)&&(n=parseFloat(t)),n}_checkProjection(t){return(0,E.Z)(function*(){try{yield(0,X._W)(g.Zn,t)}catch(n){throw new h.Z("csv-layer","Projection not supported")}})()}}},31378:(N,f,s)=>{s.d(f,{MS:()=>R,Dm:()=>Z,Hq:()=>S,bU:()=>P});var E=s(67474),V=s(85071),j=s(26729),h=s(21984);function P(y){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===y||"esriGeometryMultipoint"===y?h.I4:"esriGeometryPolyline"===y?h.ET:h.lF}}}function Z(y,g){if((0,E.Z)("csp-restrictions"))return()=>U({[g]:null},y);try{let b=`this.${g} = null;`;for(const v in y)b+=`this${v.indexOf(".")?`["${v}"]`:`.${v}`} = ${JSON.stringify(y[v])};`;const w=new Function(b);return()=>new w}catch(b){return()=>U({[g]:null},y)}}function S(y={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,V.d9)(y)}}]}function R(y,g){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:y},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:g,supportsDelete:g,supportsEditing:g,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:g,supportsExceedsLimitStatistics:!0},query:j.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:g,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);