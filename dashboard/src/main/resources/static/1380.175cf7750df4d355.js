"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[1380],{70297:(B,m,t)=>{t.d(m,{y:()=>K});var e=t(60046),P=t(76011),D=t(55208),g=t(97467),i=t(9077),p=(t(67474),t(57025),t(33870),t(42442)),j=t(29729),R=t(54792);let f=class extends R.wq{};f=(0,e._)([(0,p.j)("esri.views.layers.support.ClipArea")],f);var C,o=f;let a=C=class extends o{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new C({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],a.prototype,"left",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],a.prototype,"right",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],a.prototype,"top",void 0),(0,e._)([(0,i.Cb)({type:[Number,String],json:{write:!0}})],a.prototype,"bottom",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],a.prototype,"version",null),a=C=(0,e._)([(0,p.j)("esri.views.layers.support.ClipRect")],a);var n,v=a,L=(t(73513),t(40485)),w=t(52917),V=t(82059),s=t(70393);const r={base:L.Z,key:"type",typeMap:{extent:V.Z,polygon:s.Z}};let h=n=class extends o{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new n({geometry:this.geometry.clone()})}};(0,e._)([(0,i.Cb)({types:r,json:{read:w.im,write:!0}})],h.prototype,"geometry",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],h.prototype,"version",null),h=n=(0,e._)([(0,p.j)("esri.views.layers.support.Geometry")],h);var c=h;let l=class extends o{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,e._)([(0,i.Cb)({type:[[[Number]]],json:{write:!0}})],l.prototype,"path",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],l.prototype,"version",null),l=(0,e._)([(0,p.j)("esri.views.layers.support.Path")],l);const M=P.Z.ofType({key:"type",base:o,typeMap:{rect:v,path:l,geometry:c}}),K=Z=>{let u=class extends Z{constructor(){super(...arguments),this.clips=new M,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var _;this.container||(this.container=new j.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,g.S1)(this,"suspended",d=>{this.container&&(this.container.visible=!d),this.view&&!d&&this.updateRequested&&this.view.requestUpdate()},!0),(0,g.S1)(this,["layer.opacity","container"],()=>{var d,b;this.container&&(this.container.opacity=null!=(d=null==(b=this.layer)?void 0:b.opacity)?d:1)},!0),(0,g.S1)(this,["layer.blendMode"],d=>{this.container&&(this.container.blendMode=d)},!0),(0,g.S1)(this,["layer.effect"],d=>{this.container&&(this.container.effect=d)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(_=this.view)&&_.whenLayerView?this.view.whenLayerView(this.layer).then(d=>{d!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(_){let d=!0;const b=this.layer,A=b.minScale,I=b.maxScale;if(null!=A&&null!=I){let S=!A,W=!I;!S&&_<=A&&(S=!0),!W&&_>=I&&(W=!0),d=S&&W}return d}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(_){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",_),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(_))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return(0,e._)([(0,i.Cb)({type:M,set(_){const d=(0,D.Z)(_,this._get("clips"),M);this._set("clips",d)}})],u.prototype,"clips",void 0),(0,e._)([(0,i.Cb)()],u.prototype,"moving",void 0),(0,e._)([(0,i.Cb)()],u.prototype,"attached",void 0),(0,e._)([(0,i.Cb)()],u.prototype,"container",void 0),(0,e._)([(0,i.Cb)()],u.prototype,"suspended",void 0),(0,e._)([(0,i.Cb)({readOnly:!0})],u.prototype,"updateParameters",void 0),(0,e._)([(0,i.Cb)()],u.prototype,"updateRequested",void 0),(0,e._)([(0,i.Cb)()],u.prototype,"updating",null),(0,e._)([(0,i.Cb)()],u.prototype,"view",void 0),u=(0,e._)([(0,p.j)("esri.views.2d.layers.LayerView2D")],u),u}},41380:(B,m,t)=>{t.r(m),t.d(m,{default:()=>V});var e=t(61921),P=t(60046),D=t(83459),g=t(76011),i=t(60305),E=t(97467),R=(t(9077),t(67474),t(57025),t(33870),t(42442)),f=t(70297),o=t(561),C=t(8940),a=t(59989);const v="sublayers",O="layerView",L=Object.freeze({remove(){},pause(){},resume(){}});let w=class extends((0,f.y)(a.Z)){fetchPopupFeatures(s){var n=this;return(0,e.Z)(function*(){return(yield Promise.all(Array.from(n.graphicsViews(),r=>r.searchFeatures(s).then(h=>h.filter(c=>!!c.popupTemplate))))).flat()})()}*graphicsViews(){(0,i.pC)(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():(0,i.pC)(this._graphicsViews)?yield*this._graphicsViews:yield*[]}hitTest(s,n){var r=this;return(0,e.Z)(function*(){if(r.suspended)return null;const h=Array.from(r.graphicsViews(),function(){var c=(0,e.Z)(function*(l){const y=yield l.hitTest(s,n);if(y){if((0,i.pC)(r._graphicsViewsFeatureCollectionMap)){const M=r._graphicsViewsFeatureCollectionMap.get(l);!y.popupTemplate&&M.popupTemplate&&(y.popupTemplate=M.popupTemplate)}return y}return null});return function(l){return c.apply(this,arguments)}}());return(yield Promise.all(h)).filter(c=>!!c)[0]||null})()}highlight(s){let n;if("number"==typeof s?n=[s]:s instanceof D.Z?n=[s.uid]:Array.isArray(s)&&s.length>0?n="number"==typeof s[0]?s:s.map(r=>r&&r.uid):g.Z.isCollection(s)&&(n=s.map(r=>r&&r.uid).toArray()),n=n.filter(r=>null!=r),!n.length)return L;for(const r of this.graphicsViews())r.addHighlight(n);return{remove:()=>{for(const r of this.graphicsViews())r.removeHighlight(n)}}}update(s){for(const n of this.graphicsViews())n.processUpdate(s)}attach(){const s=this.view,n=()=>this.requestUpdate(),r=this.layer.featureCollections;if((0,i.pC)(r)&&r.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const h of r){const c=new o.Z(this.view.featuresTilingScheme);c.fadeTransitionEnabled=!0;const l=new C.Z({view:s,graphics:h.source,renderer:h.renderer,requestUpdateCallback:n,container:c});this._graphicsViewsFeatureCollectionMap.set(l,h),this.container.addChild(l.container),this.handles.add([(0,E.S1)(h,"visible",y=>l.container.visible=y),(0,E.S1)(l,"updating",()=>this.notifyChange("updating"))],O)}}else(0,i.pC)(this.layer.sublayers)&&this.handles.add((0,E.on)(this.layer,"sublayers","change",()=>this._createGraphicsViews(),()=>this._createGraphicsViews(),()=>this._destroyGraphicsViews()),v)}detach(){this._destroyGraphicsViews(),this.handles.remove(v)}moveStart(){}moveEnd(){}viewChange(){for(const s of this.graphicsViews())s.viewChange()}isUpdating(){for(const s of this.graphicsViews())if(s.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(O);for(const s of this.graphicsViews())s.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),(0,i.Wi)(this.layer.sublayers))return;const s=[],n=this.view,r=()=>this.requestUpdate();for(const h of this.layer.sublayers){const c=new o.Z(this.view.featuresTilingScheme);c.fadeTransitionEnabled=!0;const l=new C.Z({view:n,graphics:h.graphics,requestUpdateCallback:r,container:c});this.handles.add([h.on("graphic-update",l.graphicUpdateHandler),(0,E.S1)(h,"visible",y=>l.container.visible=y),(0,E.S1)(l,"updating",()=>this.notifyChange("updating"))],O),this.container.addChild(l.container),s.push(l)}this._graphicsViews=s}};w=(0,P._)([(0,R.j)("esri.views.2d.layers.MapNotesLayerView2D")],w);var V=w},59989:(B,m,t)=>{t.d(m,{Z:()=>C});var e=t(60046),P=t(64859),D=t(77624),g=t(10882),i=t(21511),E=t(33870),U=t(60305),T=t(73763),p=t(9077),f=(t(67474),t(57025),t(42442));let o=class extends((0,g.p)((0,i.I)((0,T.v)(D.Z.EventedMixin(P.Z))))){constructor(a){super(a),this.layer=null,this.parent=null}initialize(){this.when().catch(a=>{if("layerview:create-error"!==a.name){const v=this.layer&&this.layer.id||"no id",O=this.layer&&this.layer.title||"no title";throw E.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${O}', id: '${v}')`,a),a}})}get fullOpacity(){return(0,U.Pt)(this.get("layer.opacity"),1)*(0,U.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get("layer.visible")}set visible(a){void 0!==a?this._override("visible",a):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const a=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(a.viewNotReady=!0),this.layer&&this.layer.loaded||(a.layerNotLoaded=!0),this.visible||(a.layerInvisible=!0),a}isUpdating(){return!1}};(0,e._)([(0,p.Cb)()],o.prototype,"fullOpacity",null),(0,e._)([(0,p.Cb)()],o.prototype,"layer",void 0),(0,e._)([(0,p.Cb)()],o.prototype,"parent",void 0),(0,e._)([(0,p.Cb)({readOnly:!0})],o.prototype,"suspended",null),(0,e._)([(0,p.Cb)({readOnly:!0})],o.prototype,"suspendInfo",null),(0,e._)([(0,p.Cb)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,e._)([(0,p.Cb)({type:Boolean,readOnly:!0})],o.prototype,"updating",null),(0,e._)([(0,p.Cb)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,e._)([(0,p.Cb)()],o.prototype,"visible",null),o=(0,e._)([(0,f.j)("esri.views.layers.LayerView")],o);var C=o}}]);