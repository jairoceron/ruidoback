"use strict";var pe=Math.pow;(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[2791],{52791:(de,ie,b)=>{b.d(ie,{OE:()=>ae,Gc:()=>le,Qg:()=>se,Rq:()=>Y,gX:()=>q,z2:()=>D,ET:()=>V,Vx:()=>ce}),b(73513);var he=b(60305),j=b(95848),H=b(27640);const p=new Map,O=new class{constructor(a=15e3,n=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=a,this._interval=Math.min(a,n)}decreaseRefCount(a,n){const i=a+"/"+n,f=this._cachedBlocks;if(f.has(i)){const c=f.get(i);return c.refCount--,c.refCount<=0&&(f.delete(i),c.controller&&c.controller.abort()),c.refCount}return 0}getBlock(a,n){const i=a+"/"+n,f=this._cachedBlocks;if(f.has(i)){const c=f.get(i);return c.ts=Date.now(),c.refCount++,f.delete(i),f.set(i,c),c.block}return null}putBlock(a,n,i,f=null){const c=this._cachedBlocks,d=a+"/"+n;if(c.has(d)){const Z=c.get(d);Z.ts=Date.now(),Z.refCount++}else c.set(d,{block:i,ts:Date.now(),refCount:1,controller:f});this.trim(),this.updateTimer()}deleteBlock(a,n){const i=this._cachedBlocks,f=a+"/"+n;i.has(f)&&i.delete(f)}updateMaxSize(a){this._size=a,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const a=this._cachedBlocks;this._timer=setInterval(()=>{const n=Array.from(a),i=Date.now();for(let f=0;f<n.length&&n[f][1].ts<=i-this._duration;f++)a.delete(n[f][0]);0===a.size&&this.clearTimer()},this._interval)}trim(){const a=this._cachedBlocks;if(-1===this._size||this._size>=a.size)return;const n=Array.from(a);for(let i=0;i<n.length-this._size;i++)a.delete(n[i][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function Y(u,a){return null==a?u:`${u}?sliceId=${a}`}function D(u,a){const n={extent:null,rasterInfo:a,cache:new Map};if(p.has(u)){const i=p.get(u);return i.push(n),i.length-1}return p.set(u,[n]),0}function V(u,a){if(p.has(u)){const n=p.get(u);n[a]=null,n.some(i=>null!=i)||p.delete(u)}}function ae(u,a,n){if(!p.has(u))return null==a?O.decreaseRefCount(u,n):0;const i=p.get(u);if(null==i[a])return O.decreaseRefCount(u,n);const f=i[a].cache;if(f.has(n)){const c=f.get(n);if(c.refCount--,0===c.refCount){f.delete(n);for(let d=0;d<i.length;d++)i[d]&&i[d].cache.has(n)&&i[d].cache.delete(n);c.controller&&c.controller.abort()}return c.refCount}return 0}function se(u,a,n){if(!p.has(u))return null==a?O.getBlock(u,n):null;const i=p.get(u);if(null==i[a]){for(let c=0;c<i.length;c++)if(i[c]&&i[c].cache.has(n)){const d=i[c].cache.get(n);return d.refCount++,d.block}return O.getBlock(u,n)}const f=i[a].cache;if(f.has(n)){const c=f.get(n);return c.refCount++,c.block}for(let c=0;c<i.length;c++)if(c!==a&&i[c]&&i[c]&&i[c].cache.has(n)){const d=i[c].cache.get(n);return d.refCount++,f.set(n,d),d.block}return null}function q(u,a,n,i,f=null){if(!p.has(u))return void(null==a&&O.putBlock(u,n,i,f));const c=p.get(u);if(null==c[a])return void O.putBlock(u,n,i,f);const d={refCount:1,block:i,isResolved:!1,isRejected:!1,controller:f};i.then(()=>d.isResolved=!0).catch(()=>d.isRejected=!0),c[a].cache.set(n,d)}function le(u,a,n){if(!p.has(u))return void(null==a&&O.deleteBlock(u,n));const i=p.get(u);null!=i[a]?i[a].cache.delete(n):O.deleteBlock(u,n)}function ce(u,a,n,i,f,c,d=null){const Z=function(u,a){if(!p.has(u))return null;const n=p.get(u);return null==n[a]?null:n[a]}(u,a),A=Z.extent,{cache:F,rasterInfo:J}=Z;if(A&&A.xmin===n.xmin&&A.xmax===n.xmax&&A.ymin===n.ymin&&A.ymax===n.ymax)return;const ee=n.clone().normalize(),{spatialReference:te,transform:ne}=J,re=new Set;for(let e=0;e<ee.length;e++){const t=ee[e];if(t.xmax-t.xmin<=i||t.ymax-t.ymin<=i)continue;let o=(0,j.tB)(t,te,d);(0,he.pC)(ne)&&(o=ne.inverseTransform(o));const x=new H.Z({x:i,y:i,spatialReference:t.spatialReference});if(null==f&&!(f=(0,j.VO)(x,te,t,d)))return;const{pyramidLevel:s,pyramidResolution:r,excessiveReading:h}=(0,j.kr)(f,J,c||"closest");if(h)return;const{storageInfo:l}=J,{origin:g}=l,k={x:Math.max(0,Math.floor((o.xmin-g.x)/r.x)),y:Math.max(0,Math.floor((g.y-o.ymax)/r.y))},C=Math.ceil((o.xmax-o.xmin)/r.x-.1),w=Math.ceil((o.ymax-o.ymin)/r.y-.1),_=s>0?l.pyramidBlockWidth:l.blockWidth,y=s>0?l.pyramidBlockHeight:l.blockHeight,R=1,m=Math.max(0,Math.floor(k.x/_)-R),P=Math.max(0,Math.floor(k.y/y)-R),z=Math.floor((k.x+C-1)/_)+R,M=Math.floor((k.y+w-1)/y)+R;for(let v=P;v<=M;v++)for(let L=m;L<=z;L++)re.add(`${s}/${v}/${L}`)}F.forEach((e,t)=>{if(!re.has(t)){const o=F.get(t);(null==o||o.isResolved||o.isRejected)&&F.delete(t)}}),Z.extent={xmin:n.xmin,ymin:n.ymin,xmax:n.xmax,ymax:n.ymax}}},95848:(de,ie,b)=>{b.d(ie,{vF:()=>re,_D:()=>ce,Qp:()=>ee,P_:()=>J,Hq:()=>F,zD:()=>le,tB:()=>f,nF:()=>n,VO:()=>u,kZ:()=>te,kr:()=>ne});var ue=b(61921),K=(b(73513),b(22795)),j=b(60305),H=b(4820),p=b(62733),O=b(87337),Y=b(82059),D=b(27640);const V=5e-4,X=function(e,t){const o=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||o)},se={3395:20037508.342789244,3410:17334193.943686873,3832:3339584.723798206,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,8858:7396237.374497803,8859:2465412.4581659334,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53025:7276828.3848298555,53031:10384677.558821043,53034:20015086.79602057,53036:7389443.187332862,53037:2463147.729110953,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54025:7311399.09166516,54031:10396310.810074743,54034:20037508.342789244,54050:808820.9223376509,54053:1920897.3915568967,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244,102038:4297258.582585486,102299:5013965.117483125};function le(){return Q.apply(this,arguments)}function Q(){return(Q=(0,ue.Z)(function*(){if((0,p.kR)()||!(0,p.Gb)())return null;yield(0,p.zD)()})).apply(this,arguments)}function ce(e,t,o){if(!X(e.spatialReference,t))return null;if(!(0,p.kR)())throw new K.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");return o?(0,p.rS)(t,e.spatialReference,e):(0,p.rS)(e.spatialReference,t,e)}function u(e,t,o,x=null){if(e.spatialReference.equals(t))return e;const s=X(e.spatialReference,t);if(s&&!(0,p.kR)())throw new K.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");const r=o.center,h=new Y.Z({xmin:r.x-e.x/2,xmax:r.x+e.x/2,ymin:r.y-e.y/2,ymax:r.y+e.y/2,spatialReference:e.spatialReference}),l=s?(0,p.iV)(h,t,x):(0,O.iV)(h,t);return(0,j.Wi)(l)?null:{x:l.xmax-l.xmin,y:l.ymax-l.ymin}}function a(e,t=.01){return(0,H.c9)(e)?t/(0,H.c9)(e):0}function n(e,t,o=null,x=!0){const s=e.spatialReference;if(s.equals(t))return e;let r=(0,O.iV)(e,t);if((0,j.Wi)(r)){if(!(0,p.kR)())throw new K.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");r=(0,p.iV)(e,t,o)}if(x&&t.isGeographic){const[h,l]=Z(s,!0),g=a(s);g&&null!=h&&null!=l&&(Math.abs(e.x-h)<g&&Math.abs(180-r.x)<V?r.x-=360:Math.abs(e.x-l)<g&&Math.abs(180+r.x)<V&&(r.x+=360))}return r}function i(e){const t=d(e[0].spatialReference);if(e.length<2||!(0,j.pC)(t))return e[0];let{xmin:o,xmax:x,ymin:s,ymax:r}=e[0];for(let h=1;h<e.length;h++){const l=e[h];x=l.xmax+t*h,s=Math.min(s,l.ymin),r=Math.max(r,l.ymax)}return new Y.Z({xmin:o,xmax:x,ymin:s,ymax:r,spatialReference:e[0].spatialReference})}function f(e,t,o=null,x=!0){if(e.spatialReference.equals(t))return e;const s=F(e),r=d(e.spatialReference,!0);return(0,j.pC)(r)&&0!==s?i(e.clone().normalize().map(h=>c(h,t,o,x))):c(e,t,o,x)}function c(e,t,o=null,x=!0){const s=e.spatialReference;if(s.equals(t))return e;if(X(s,t)&&!(0,p.kR)())throw new K.Z("rasterprojectionhelper-projectExtent","projection engine is not loaded");let r=(0,O.iV)(e,t);(0,j.Wi)(r)&&(r=(0,p.iV)(e,t,o));let[h,l]=Z(s,!0);if(r&&x&&s.isWebMercator&&t.isGeographic&&null!=h&&null!=l){const k=.001,C=1e3;if(Math.abs(e.xmin-h)<k&&Math.abs(l-e.xmax)>C&&Math.abs(180-r.xmax)<V){r.xmin=-180;const w=[];w.push(new D.Z(e.xmax,e.ymin,s)),w.push(new D.Z(e.xmax,(e.ymin+e.ymax)/2,s)),w.push(new D.Z(e.xmax,e.ymax,s));const _=w.map(y=>n(y,t,o)).filter(y=>!isNaN(null==y?void 0:y.x)).map(y=>y.x);r.xmax=Math.max.apply(null,_)}if(Math.abs(e.xmax-l)<k&&Math.abs(h-e.xmin)>C&&Math.abs(180+r.xmin)<V){r.xmax=180;const w=[];w.push(new D.Z(e.xmin,e.ymin,s)),w.push(new D.Z(e.xmin,(e.ymin+e.ymax)/2,s)),w.push(new D.Z(e.xmin,e.ymax,s));const _=w.map(y=>n(y,t,o)).filter(y=>!isNaN(null==y?void 0:y.x)).map(y=>y.x);r.xmin=Math.min.apply(null,_)}}[h,l]=Z(t,!0);const g=a(t);return g&&null!=h&&null!=l&&(Math.abs(r.xmin-h)<g&&(r.xmin=h),Math.abs(r.xmax-l)<g&&(r.xmax=l)),r}function d(e,t=!1){return e.isWebMercator?2*(t?20037508.342787:20037508.342788905):e.wkid&&e.isGeographic?360:2*se[e.wkid]||null}function Z(e,t=!1){const o=[],x=d(e,t);return(0,j.pC)(x)&&(o.push(-x/2),o.push(x/2)),o}function A(e,t,o,x){let s=(e-t)/o;return s-Math.floor(s)!=0?s=Math.floor(s):x&&(s-=1),s}function F(e,t=!1){const o=d(e.spatialReference);if(!(0,j.pC)(o))return 0;const x=t?0:-o/2;return A(e.xmax,x,o,!0)-A(e.xmin,x,o,!1)}function J(e){const t=e.storageInfo.origin.x,o=d(e.spatialReference,!0);if(!(0,j.pC)(o))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const x=o/2,{nativePixelSize:s,storageInfo:r,extent:h}=e,{maximumPyramidLevel:l,blockWidth:g,pyramidScalingFactor:k}=r;let C=s.x;const w=[],_=(0,j.pC)(e.transform)&&"gcs-shift"===e.transform.type,y=t+x,R=_?o-t:x-t;for(let m=0;m<=l;m++){const P=(h.xmax-t)/C/g,z=P-Math.floor(P)==0?P:Math.ceil(P),M=(o/2-t)/C/g,v=M-Math.floor(M)==0?M:Math.ceil(M),L=Math.floor(y/C/g),G=Math.round(y/C)%g,E=(g-Math.round(R/C)%g)%g;w.push({resolutionX:C,blockWidth:g,datsetColumnCount:z,worldColumnCountFromOrigin:v,leftMargin:G,rightPadding:E,originColumnOffset:L}),C*=k}return{originX:t,halfWorldWidth:x,pyramidsInfo:w,hasGCSSShiftTransform:_}}function ee(e,t,o,x=null,s=null,r=!1,h=[32,32]){if(X(e.spatialReference,t.spatialReference)&&!(0,p.kR)())throw new K.Z("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&o))return null;const{xmin:l,ymin:g,xmax:k,ymax:C}=e,w=e.spatialReference,_=t.spatialReference,y=d(_);r=r||"gcs-shift"===(null==s?void 0:s.type);const R={x:h[0]*o.x,y:h[1]*o.y},m={cols:Math.ceil((k-l)/R.x-.1/h[0])+1,rows:Math.ceil((C-g)/R.y-.1/h[1])+1},P=R.x,z=R.y,M=[];let v,L=!1;for(let N=0;N<m.cols;N++){const T=[];for(let B=0;B<m.rows;B++){let I=n(new D.Z({x:l+P*N,y:C-z*B,spatialReference:w}),_,x);s&&(I=s.inverseTransform(I)),T.push(I),N>0&&r&&I&&v[B]&&(0,j.pC)(y)&&I.x<v[B].x&&(I.x+=y),I?(M.push((I.x-t.xmin)/(t.xmax-t.xmin)),M.push((t.ymax-I.y)/(t.ymax-t.ymin))):(M.push(NaN),M.push(NaN),L=!0)}v=T}const G=function(e,t){const x=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs((e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4-e[2*t.rows+2]),Math.abs(x-e[2*t.rows+3])]}(M,m),E=new Float32Array((m.cols-1)*(m.rows-1)*2*6),U=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),$=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let N=0;N<m.cols-1;N++){for(let T=0;T<m.rows-1;T++){let B=N*m.rows*2+2*T;const I=M[B],fe=M[B+1],ye=M[B+2],Me=M[B+3];B+=2*m.rows;const ge=M[B],_e=M[B+1],xe=M[B+2],me=M[B+3];let W=0,oe=12*(T*(m.cols-1)+N);for(let S=0;S<3;S++)E[oe++]=U[W++]*I+U[W++]*ye+U[W++]*xe;W=0;for(let S=0;S<3;S++)E[oe++]=U[W++]*fe+U[W++]*Me+U[W++]*me;W=0;for(let S=0;S<3;S++)E[oe++]=$[W++]*I+$[W++]*ge+$[W++]*xe;W=0;for(let S=0;S<3;S++)E[oe++]=$[W++]*fe+$[W++]*_e+$[W++]*me}if(L)for(let T=0;T<E.length;T++)isNaN(E[T])&&(E[T]=-1)}return{offsets:M,error:G,coefficients:E,spacing:h,size:[m.cols-1,m.rows-1]}}function te(e){const t=e.clone().normalize();return 1===t.length?t[0]:i(t)}function ne(e,t,o){const{storageInfo:x,pixelSize:s}=t;let r,h=!1;const{pyramidResolutions:l}=x;if((0,j.pC)(l)&&l.length){const _=(e.x+e.y)/2,y=l[l.length-1],R=(y.x+y.y)/2,m=(s.x+s.y)/2;if(_<=m)r=0;else if(_>=R)r=l.length,h=_/R>8;else{let z,M=m;for(let v=1;v<=l.length;v++){if(z=(l[v-1].x+l[v-1].y)/2,_<=z){_===z?r=v:"down"===o?(r=v-1,h=_/M>8):r="up"===o||_-M>z-_||_/M>2?v:v-1;break}M=z}}const P=0===r?s:l[r-1];return{pyramidLevel:r,pyramidResolution:new D.Z({x:P.x,y:P.y,spatialReference:t.spatialReference}),excessiveReading:h}}const g=Math.log(e.x/s.x)/Math.LN2,k=Math.log(e.y/s.y)/Math.LN2,C=t.storageInfo.maximumPyramidLevel||0;r="down"===o?Math.floor(Math.min(g,k)):"up"===o?Math.ceil(Math.max(g,k)):Math.round((g+k)/2),r<0?r=0:r>C&&(h=r>C+3,r=C);const w=pe(2,r);return{pyramidLevel:r,pyramidResolution:new D.Z({x:w*t.nativePixelSize.x,y:w*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:h}}function re(e,t,o=512,x=!0){const{extent:s,spatialReference:r,pixelSize:h}=e,l=u(new D.Z({x:h.x,y:h.y,spatialReference:r}),t,s);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const g=(l.x+l.y)/2,k=(0,H.c9)(t),C=g*k*96*39.37,w=t.isGeographic?256/o*295828763.7958547:256/o*591657527.591555;let _="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const y=f(s,t);_||x&&(t.isGeographic||t.isWebMercator)&&(_=y.xmin*y.xmax<0);let R,m=C;const P=1.001;if(_){m=w;const G=t.isGeographic?1341104507446289e-21:.29858214164761665,E=G*(96*k*39.37);R=u(new D.Z({x:G,y:G,spatialReference:{wkid:t.isGeographic?4326:3857}}),r,y),R.x*=m/E,R.y*=m/E}else{R={x:h.x,y:h.y};const G=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let E=0;for(;m<w*(P/2)&&E<G;)E++,m*=2,R.x*=2,R.y*=2;Math.max(m,w)/Math.min(m,w)<=P&&(m=w)}const z=[m],M=[{x:R.x,y:R.y}],L=Math.min(70.5310735,C)/P;for(;m>=L;)m/=2,R.x/=2,R.y/=2,z.push(m),M.push({x:R.x,y:R.y});return{projectedPixelSize:l,scales:z,srcResolutions:M,isCustomTilingScheme:!_}}}}]);