"use strict";var ae=Object.defineProperty,le=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,ne=Math.pow,ie=(N,j,e)=>j in N?ae(N,j,{enumerable:!0,configurable:!0,writable:!0,value:e}):N[j]=e,$=(N,j)=>{for(var e in j||(j={}))de.call(j,e)&&ie(N,e,j[e]);if(oe)for(var e of oe(j))ce.call(j,e)&&ie(N,e,j[e]);return N},Q=(N,j)=>le(N,ue(j));(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[8592],{98573:(N,j,e)=>{e.d(j,{A:()=>A,B:()=>f,C:()=>T,D:()=>w,E:()=>F,F:()=>W,G:()=>z,H:()=>R,I:()=>H,J:()=>V,K:()=>q,a:()=>I,b:()=>b,c:()=>P,d:()=>_,e:()=>m,f:()=>a,g:()=>G,h:()=>y,i:()=>g,j:()=>p,k:()=>o,l:()=>d,m:()=>h,n:()=>v,o:()=>i,p:()=>D,q:()=>L,r:()=>l,s:()=>u,t:()=>s,u:()=>K,v:()=>B,w:()=>c,x:()=>x,y:()=>O,z:()=>M});var r=e(46536),E=e(64124);function m(C){return r.G.extendedSpatialReferenceInfo(C)}function P(C,U,S){return r.G.clip(E.N,C,U,S)}function I(C,U,S){return r.G.cut(E.N,C,U,S)}function b(C,U,S){return r.G.contains(E.N,C,U,S)}function _(C,U,S){return r.G.crosses(E.N,C,U,S)}function a(C,U,S,Z){return r.G.distance(E.N,C,U,S,Z)}function y(C,U,S){return r.G.equals(E.N,C,U,S)}function g(C,U,S){return r.G.intersects(E.N,C,U,S)}function s(C,U,S){return r.G.touches(E.N,C,U,S)}function c(C,U,S){return r.G.within(E.N,C,U,S)}function p(C,U,S){return r.G.disjoint(E.N,C,U,S)}function i(C,U,S){return r.G.overlaps(E.N,C,U,S)}function l(C,U,S,Z){return r.G.relate(E.N,C,U,S,Z)}function o(C,U){return r.G.isSimple(E.N,C,U)}function u(C,U){return r.G.simplify(E.N,C,U)}function d(C,U,S=!1){return r.G.convexHull(E.N,C,U,S)}function h(C,U,S){return r.G.difference(E.N,C,U,S)}function v(C,U,S){return r.G.symmetricDifference(E.N,C,U,S)}function D(C,U,S){return r.G.intersect(E.N,C,U,S)}function K(C,U,S=null){return r.G.union(E.N,C,U,S)}function L(C,U,S,Z,J,Y,k){return r.G.offset(E.N,C,U,S,Z,J,Y,k)}function B(C,U,S,Z,J=!1){return r.G.buffer(E.N,C,U,S,Z,J)}function x(C,U,S,Z,J,Y,k){return r.G.geodesicBuffer(E.N,C,U,S,Z,J,Y,k)}function O(C,U,S,Z=!0){return r.G.nearestCoordinate(E.N,C,U,S,Z)}function M(C,U,S){return r.G.nearestVertex(E.N,C,U,S)}function A(C,U,S,Z,J){return r.G.nearestVertices(E.N,C,U,S,Z,J)}function f(C,U,S,Z){if(null==U||null==Z)throw new Error("Illegal Argument Exception");const J=r.G.rotate(U,S,Z);return J.spatialReference=C,J}function T(C,U,S){if(null==U||null==S)throw new Error("Illegal Argument Exception");const Z=r.G.flipHorizontal(U,S);return Z.spatialReference=C,Z}function w(C,U,S){if(null==U||null==S)throw new Error("Illegal Argument Exception");const Z=r.G.flipVertical(U,S);return Z.spatialReference=C,Z}function F(C,U,S,Z,J){return r.G.generalize(E.N,C,U,S,Z,J)}function W(C,U,S,Z){return r.G.densify(E.N,C,U,S,Z)}function z(C,U,S,Z,J=0){return r.G.geodesicDensify(E.N,C,U,S,Z,J)}function R(C,U,S){return r.G.planarArea(E.N,C,U,S)}function H(C,U,S){return r.G.planarLength(E.N,C,U,S)}function V(C,U,S,Z){return r.G.geodesicArea(E.N,C,U,S,Z)}function q(C,U,S,Z){return r.G.geodesicLength(E.N,C,U,S,Z)}var G=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:m,clip:P,cut:I,contains:b,crosses:_,distance:a,equals:y,intersects:g,touches:s,within:c,disjoint:p,overlaps:i,relate:l,isSimple:o,simplify:u,convexHull:d,difference:h,symmetricDifference:v,intersect:D,union:K,offset:L,buffer:B,geodesicBuffer:x,nearestCoordinate:O,nearestVertex:M,nearestVertices:A,rotate:f,flipHorizontal:T,flipVertical:w,generalize:F,densify:W,geodesicDensify:z,planarArea:R,planarLength:H,geodesicArea:V,geodesicLength:q})},78522:(N,j,e)=>{function r(){return new Float32Array(3)}function m(o,u,d){const h=new Float32Array(3);return h[0]=o,h[1]=u,h[2]=d,h}function I(){return r()}function b(){return m(1,1,1)}function _(){return m(1,0,0)}function a(){return m(0,1,0)}function y(){return m(0,0,1)}e.d(j,{c:()=>r,f:()=>m});const g=I(),s=b(),c=_(),p=a(),i=y();Object.freeze({__proto__:null,create:r,clone:function(o){const u=new Float32Array(3);return u[0]=o[0],u[1]=o[1],u[2]=o[2],u},fromValues:m,createView:function(o,u){return new Float32Array(o,u,3)},zeros:I,ones:b,unitX:_,unitY:a,unitZ:y,ZEROS:g,ONES:s,UNIT_X:c,UNIT_Y:p,UNIT_Z:i})},87283:(N,j,e)=>{e.d(j,{Z:()=>E});var r=e(60305);class E{constructor(P){this.size=0,this._start=0,this.maxSize=P,this._buffer=new Array(P)}get entries(){return this._buffer}enqueue(P){if(this.size===this.maxSize){const I=this._buffer[this._start];return this._buffer[this._start]=P,this._start=(this._start+1)%this.maxSize,I}return this._buffer[(this._start+this.size++)%this.maxSize]=P,null}dequeue(){if(0===this.size)return null;const P=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,P}peek(){return 0===this.size?null:this._buffer[this._start]}find(P){if(0===this.size)return null;for(const I of this._buffer)if((0,r.pC)(I)&&P(I))return I;return null}clear(P){let I=this.dequeue();for(;(0,r.pC)(I);)P&&P(I),I=this.dequeue()}}},43267:(N,j,e)=>{e.d(j,{lt:()=>g,WU:()=>I,Qc:()=>s});var r=e(9171),E=e(9017);const m={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function P(o){o||(o=(0,E.Kd)());let u=o in m;if(!u){const D=o.split("-");D.length>1&&D[0]in m&&(o=D[0],u=!0),u||(o="en")}const[d,h,v="#,##0.###"]=m[o];return{decimal:d,group:h,pattern:v}}function I(o,u){const d=P((u=$({},u)).locale);u.customs=d;const h=u.pattern||d.pattern;return isNaN(o)||Math.abs(o)===1/0?null:function(o,u,d){const h=(d=d||{}).customs.group,v=d.customs.decimal,D=u.split(";"),K=D[0];if(-1!==(u=D[o<0?1:0]||"-"+K).indexOf("%"))o*=100;else if(-1!==u.indexOf("\u2030"))o*=1e3;else{if(-1!==u.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==u.indexOf("E"))throw new Error("exponential notation not supported")}const L=b,B=K.match(L);if(!B)throw new Error("unable to find a number expression in pattern: "+u);return!1===d.fractional&&(d.places=0),u.replace(L,function(o,u,d){!0===(d=d||{}).places&&(d.places=0),d.places===1/0&&(d.places=6);const h=u.split("."),v="string"==typeof d.places&&d.places.indexOf(",");let D=d.places;v?D=d.places.substring(v+1):D>=0||(D=(h[1]||[]).length),d.round<0||(o=Number(o.toFixed(Number(D))));const K=String(Math.abs(o)).split("."),L=K[1]||"";if(h[1]||d.places){v&&(d.places=d.places.substring(0,v));const T=void 0!==d.places?d.places:h[1]&&h[1].lastIndexOf("0")+1;T>L.length&&(K[1]=L.padEnd(Number(T),"0")),D<L.length&&(K[1]=L.substr(0,Number(D)))}else K[1]&&K.pop();const B=h[0].replace(",","");let x=B.indexOf("0");-1!==x&&(x=B.length-x,x>K[0].length&&(K[0]=K[0].padStart(x,"0")),-1===B.indexOf("#")&&(K[0]=K[0].substr(K[0].length-x)));let O,M,A=h[0].lastIndexOf(",");if(-1!==A){O=h[0].length-A-1;const T=h[0].substr(0,A);A=T.lastIndexOf(","),-1!==A&&(M=T.length-A-1)}const f=[];for(let T=K[0];T;){const w=T.length-O;f.push(w>0?T.substr(w):T),T=w>0?T.slice(0,w):"",M&&(O=M,M=void 0)}return K[0]=f.reverse().join(d.group||","),K.join(d.decimal||".")}(o,B[0],{decimal:v,group:h,places:d.places,round:d.round}))}(o,h,u)}const b=/[#0,]*[#0](?:\.0*#*)?/;function g(o){const u=P((o=o||{}).locale),d=o.pattern||u.pattern,h=u.group,v=u.decimal;let D=1;if(-1!==d.indexOf("%"))D/=100;else if(-1!==d.indexOf("\u2030"))D/=1e3;else if(-1!==d.indexOf("\xa4"))throw new Error("currency notation not supported");const K=d.split(";");return 1===K.length&&K.push("-"+K[0]),{regexp:i(K,function(B){return(B="(?:"+(0,r.Qs)(B,".")+")").replace(b,function(x){const O={signed:!1,separator:o.strict?h:[h,""],fractional:o.fractional,decimal:v,exponent:!1},M=x.split(".");let A=o.places;1===M.length&&1!==D&&(M[1]="###"),1===M.length||0===A?O.fractional=!1:(void 0===A&&(A=o.pattern?M[1].lastIndexOf("0")+1:1/0),A&&null==o.fractional&&(O.fractional=!0),!o.places&&A<M[1].length&&(A+=","+M[1].length),O.places=A);const f=M[0].split(",");return f.length>1&&(O.groupSize=f.pop().length,f.length>1&&(O.groupSize2=f.pop().length)),"("+function(o){"places"in(o=o||{})||(o.places=1/0),"string"!=typeof o.decimal&&(o.decimal="."),"fractional"in o&&!/^0/.test(String(o.places))||(o.fractional=[!0,!1]),"exponent"in o||(o.exponent=[!0,!1]),"eSigned"in o||(o.eSigned=[!0,!1]);const u=p(o),d=i(o.fractional,function(v){let D="";return v&&0!==o.places&&(D="\\"+o.decimal,o.places===1/0?D="(?:"+D+"\\d+)?":D+="\\d{"+o.places+"}"),D},!0);let h=u+d;return d&&(h="(?:(?:"+h+")|(?:"+d+"))"),h+i(o.exponent,function(v){return v?"([eE]"+p({signed:o.eSigned})+")":""})}(O)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:h,decimal:v,factor:D}}function s(o,u){const d=g(u),h=new RegExp("^"+d.regexp+"$").exec(o);if(!h)return NaN;let v=h[1];if(!h[1]){if(!h[2])return NaN;v=h[2],d.factor*=-1}return v=v.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,"."),Number(v)*d.factor}function p(o){return"signed"in(o=o||{})||(o.signed=[!0,!1]),"separator"in o?"groupSize"in o||(o.groupSize=3):o.separator="",i(o.signed,function(u){return u?"[-+]":""},!0)+i(o.separator,function(u){if(!u)return"(?:\\d+)";" "===(u=(0,r.Qs)(u))?u="\\s":"\xa0"===u&&(u="\\s\\xa0");const d=o.groupSize,h=o.groupSize2;if(h){const v="(?:0|[1-9]\\d{0,"+(h-1)+"}(?:["+u+"]\\d{"+h+"})*["+u+"]\\d{"+d+"})";return d-h>0?"(?:"+v+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":v}return"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+u+"]\\d{"+d+"})*)"},!0)}const i=function(o,u,d){if(!(o instanceof Array))return u(o);const h=[];for(let v=0;v<o.length;v++)h.push(u(o[v]));return l(h.join("|"),d)},l=function(o,u){return"("+(u?"?:":"")+o+")"}},499:(N,j,e)=>{e.r(j),e.d(j,{hydratedAdapter:()=>b});var r=e(82059),E=e(99388),m=e(27640),P=e(70393),I=e(27876);const b={convertToGEGeometry:function(p,i){if(null==i)return null;let l="cache"in i?i.cache._geVersion:void 0;return null==l&&(l=p.convertJSONToGeometry(i),"cache"in i&&(i.cache._geVersion=l)),l},exportPoint:function(p,i,l){const o=p.hasZ(i),u=p.hasM(i),d=new m.Z({x:p.getPointX(i),y:p.getPointY(i),spatialReference:l});return o&&(d.z=p.getPointZ(i)),u&&(d.m=p.getPointM(i)),d.cache._geVersion=i,d},exportPolygon:function(p,i,l){const o=new P.Z({rings:p.exportPaths(i),hasZ:p.hasZ(i),hasM:p.hasM(i),spatialReference:l});return o.cache._geVersion=i,o},exportPolyline:function(p,i,l){const o=new I.Z({paths:p.exportPaths(i),hasZ:p.hasZ(i),hasM:p.hasM(i),spatialReference:l});return o.cache._geVersion=i,o},exportMultipoint:function(p,i,l){const o=new E.Z({hasZ:p.hasZ(i),hasM:p.hasM(i),points:p.exportPoints(i),spatialReference:l});return o.cache._geVersion=i,o},exportExtent:function(p,i,l){const o=p.hasZ(i),u=p.hasM(i),d=new r.Z({xmin:p.getXMin(i),ymin:p.getYMin(i),xmax:p.getXMax(i),ymax:p.getYMax(i),spatialReference:l});if(o){const h=p.getZExtent(i);d.zmin=h.vmin,d.zmax=h.vmax}if(u){const h=p.getMExtent(i);d.mmin=h.vmin,d.mmax=h.vmax}return d.cache._geVersion=i,d}}},41260:(N,j,e)=>{e.d(j,{d:()=>E});var r=e(22791);function E(_,a,y){var g;const s=_.byteLength/(4*a),c=new Uint32Array(_,0,s*a);let p=new Uint32Array(s);const i=null!=(g=null==y?void 0:y.minReduction)?g:0,l=(null==y?void 0:y.originalIndices)||null,o=l?l.length:0,u=(null==y?void 0:y.componentOffsets)||null;let d=0;if(u)for(let f=0;f<u.length-1;f++){const T=u[f+1]-u[f];T>d&&(d=T)}else d=s;const h=Math.floor(1.1*d)+1;(null==b||b.length<2*h)&&(b=new Uint32Array((0,r.Sf)(2*h)));for(let f=0;f<2*h;f++)b[f]=0;let v=0;const D=!!u&&!!l,K=D?o:s,L=D?new Uint32Array(o):null,B=1.96;let x=0!==i?Math.ceil(4*B*B/(i*i)*i*(1-i)):K,O=1,M=u?u[1]:K;for(let f=0;f<K;f++){if(f===x){const R=1-v/f;if(R+B*Math.sqrt(R*(1-R)/f)<i)return null;x*=2}if(f===M){for(let R=0;R<2*h;R++)b[R]=0;if(l)for(let R=u[O-1];R<u[O];R++)L[R]=p[l[R]];M=u[++O]}const T=D?l[f]:f,w=T*a,F=I(c,w,a);let W=F%h,z=v;for(;0!==b[2*W+1];){if(b[2*W]===F){const R=b[2*W+1]-1;if(m(c,w,R*a,a)){z=p[R];break}}W++,W>=h&&(W-=h)}z===v&&(b[2*W]=F,b[2*W+1]=T+1,v++),p[T]=z}if(0!==i&&1-v/s<i)return null;if(D){for(let f=u[O-1];f<L.length;f++)L[f]=p[l[f]];p=L}const A=new Uint32Array(a*v);v=0;for(let f=0;f<K;f++)p[f]===v&&(P(c,(D?l[f]:f)*a,A,v*a,a),v++);if(l&&!D){const f=new Uint32Array(o);for(let T=0;T<f.length;T++)f[T]=p[l[T]];p=f}return{buffer:A.buffer,indices:p,uniqueCount:v}}function m(_,a,y,g){for(let s=0;s<g;s++)if(_[a+s]!==_[y+s])return!1;return!0}function P(_,a,y,g,s){for(let c=0;c<s;c++)y[g+c]=_[a+c]}function I(_,a,y){let g=0;for(let s=0;s<y;s++)g=_[a+s]+g|0,g=g+(g<<11)+(g>>>2)|0;return g>>>0}let b=null},53289:(N,j,e)=>{e.d(j,{yZ:()=>m});var r=e(4820);function m(_,a){const y=a||_.extent,g=_.width,s=(0,r.c9)(y&&y.spatialReference);return y&&g?y.width/g*s*r.hd*96:0}},58382:(N,j,e)=>{e.r(j),e.d(j,{default:()=>q});var r=e(61921),E=e(60046),m=e(40662),P=e(78053),I=e(22795),b=e(10882),_=e(64023),a=e(60305),y=e(71781),g=e(12523),s=e(9077),p=(e(67474),e(57025)),l=(e(33870),e(67424)),o=e(42442),u=e(43190),d=e(57722),h=e(82059),v=e(53289),D=e(21611),K=e(82164),L=e(69106),B=e(39380),x=e(64469),O=e(6331),M=e(24065),A=e(52043),f=e(44660),T=e(55130),w=e(96108),F=e(89420),W=e(99737),z=e(57104),R=e(95590),H=e(98722);let V=class extends((0,x.h)((0,F.n)((0,T.M)((0,w.x)((0,L.O)((0,B.Y)((0,M.q)((0,A.I)((0,y.R)((0,f.Q)((0,K.V)((0,O.N)((0,b.p)(D.Z)))))))))))))){constructor(...G){super(...G),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(G,C){return"string"==typeof G?$({url:G},C):G}load(G){const C=(0,a.pC)(G)?G.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},G).catch(g.r9).then(()=>this._fetchService(C))),Promise.resolve(this)}readImageFormat(G,C){const U=C.supportedImageFormatTypes;return U&&U.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(G,C,U,S){if(!this.loaded||!G)return;const Z=G.slice().reverse().flatten(({sublayers:X})=>X&&X.toArray().reverse()).toArray();let J=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const X=(0,d.M9)(S.origin);if(3===X){const te=this.createSublayersForOrigin("service").sublayers;J=(0,H.QV)(Z,te,2)}else if(X>3){const te=this.createSublayersForOrigin("portal-item");J=(0,H.QV)(Z,te.sublayers,(0,d.M9)(te.origin))}}const Y=[],k=$({writeSublayerStructure:J},S);let ee=J;Z.forEach(X=>{const te=X.write({},k);Y.push(te),ee=ee||"user"===X.originOf("visible")}),Y.some(X=>Object.keys(X).length>1)&&(C.layers=Y),ee&&(C.visibleLayers=Z.filter(X=>X.visible).map(X=>X.id))}createExportImageParameters(G,C,U,S){const Z=S&&S.pixelRatio||1;G&&this.version>=10&&(G=G.clone().shiftCentralMeridian());const J=new z.R({layer:this,floors:null==S?void 0:S.floors,scale:(0,v.yZ)({extent:G,width:C})*Z}),Y=J.toJSON();J.destroy();const k=!S||!S.rotation||this.version<10.3?{}:{rotation:-S.rotation},ee=G&&G.spatialReference,X=ee.wkid||JSON.stringify(ee.toJSON());Y.dpi*=Z;const te={};if(null!=S&&S.timeExtent){const{start:re,end:se}=S.timeExtent.toJSON();te.time=re&&se&&re===se?""+re:`${null==re?"null":re},${null==se?"null":se}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(te.time="null,null");return $($($({bbox:G&&G.xmin+","+G.ymin+","+G.xmax+","+G.ymax,bboxSR:X,imageSR:X,size:C+","+U},Y),k),te)}fetchImage(G,C,U,S){var Z=this;return(0,r.Z)(function*(){var J;const Y={responseType:"image",signal:null!=(J=null==S?void 0:S.signal)?J:null,query:Q($($(Q($($({},Z.parsedUrl.query),Z.createExportImageParameters(G,C,U,S)),{f:"image"}),Z.refreshParameters),Z.customParameters),{token:Z.apiKey})},k=Z.parsedUrl.path+"/export";return null==Y.query.dynamicLayers||Z.capabilities.exportMap.supportsDynamicLayers?(0,m.default)(k,Y).then(ee=>ee.data).catch(ee=>{throw(0,g.D_)(ee)?ee:new I.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${k}`,{error:ee})}):Promise.reject(new I.Z("mapimagelayer:dynamiclayer-not-supported",`service ${Z.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:Y.query}))})()}fetchRecomputedExtents(G={}){var C=this;return(0,r.Z)(function*(){const U=Q($({},G),{query:Q($({returnUpdates:!0,f:"json"},C.customParameters),{token:C.apiKey})}),{data:S}=yield(0,m.default)(C.url,U),{extent:Z,fullExtent:J,timeExtent:Y}=S,k=Z||J;return{fullExtent:k&&h.Z.fromJSON(k),timeExtent:Y&&P.Z.fromJSON({start:Y[0],end:Y[1]})}})()}loadAll(){return(0,_.GZ)(this,G=>{G(this.allSublayers)})}_fetchService(G){var C=this;return(0,r.Z)(function*(){if(C.sourceJSON)return void C.read(C.sourceJSON,{origin:"service",url:C.parsedUrl});const{data:U,ssl:S}=yield(0,m.default)(C.parsedUrl.path,{query:Q($($({f:"json"},C.parsedUrl.query),C.customParameters),{token:C.apiKey}),signal:G});S&&(C.url=C.url.replace(/^http:/i,"https:")),C.sourceJSON=U,C.read(U,{origin:"service",url:C.parsedUrl})})()}};(0,E._)([(0,s.Cb)({type:Boolean})],V.prototype,"datesInUnknownTimezone",void 0),(0,E._)([(0,s.Cb)()],V.prototype,"dpi",void 0),(0,E._)([(0,s.Cb)()],V.prototype,"gdbVersion",void 0),(0,E._)([(0,s.Cb)()],V.prototype,"imageFormat",void 0),(0,E._)([(0,l.r)("imageFormat",["supportedImageFormatTypes"])],V.prototype,"readImageFormat",null),(0,E._)([(0,s.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],V.prototype,"imageMaxHeight",void 0),(0,E._)([(0,s.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],V.prototype,"imageMaxWidth",void 0),(0,E._)([(0,s.Cb)()],V.prototype,"imageTransparency",void 0),(0,E._)([(0,s.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],V.prototype,"isReference",void 0),(0,E._)([(0,s.Cb)({json:{read:!1,write:!1}})],V.prototype,"labelsVisible",void 0),(0,E._)([(0,s.Cb)({type:["ArcGISMapServiceLayer"]})],V.prototype,"operationalLayerType",void 0),(0,E._)([(0,s.Cb)({json:{read:!1,write:!1}})],V.prototype,"popupEnabled",void 0),(0,E._)([(0,s.Cb)()],V.prototype,"sourceJSON",void 0),(0,E._)([(0,s.Cb)({json:{write:{ignoreOrigin:!0}}})],V.prototype,"sublayers",void 0),(0,E._)([(0,u.c)("sublayers",{layers:{type:[R.Z]},visibleLayers:{type:[p.z8]}})],V.prototype,"writeSublayers",null),(0,E._)([(0,s.Cb)({type:["show","hide","hide-children"]})],V.prototype,"listMode",void 0),(0,E._)([(0,s.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],V.prototype,"type",void 0),(0,E._)([(0,s.Cb)(W.HQ)],V.prototype,"url",void 0),V=(0,E._)([(0,o.j)("esri.layers.MapImageLayer")],V);var q=V},5575:(N,j,e)=>{e.r(j),e.d(j,{default:()=>A});var r=e(60046),m=(e(73513),e(40662)),P=e(22795),I=e(71781),b=e(9171),_=e(89225),a=e(9077),c=(e(67474),e(57025),e(33870),e(67424)),p=e(42442),i=e(43190),l=e(21611),o=e(64469),u=e(24065),d=e(52043),h=e(44660),v=e(55130),D=e(56742),K=e(31818),L=e(54139),B=e(82059),x=e(56703),O=e(27640);let M=class extends((0,o.h)((0,h.Q)((0,v.M)((0,u.q)((0,d.I)((0,I.R)(l.Z))))))){constructor(...f){super(...f),this.copyright="",this.fullExtent=new B.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,x.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=x.Z.WebMercator,this.subDomains=null,this.tileInfo=new K.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new O.Z({x:-20037508.342787,y:20037508.342787,spatialReference:x.Z.WebMercator}),spatialReference:x.Z.WebMercator,lods:[new D.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new D.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new D.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new D.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new D.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new D.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new D.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new D.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new D.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new D.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new D.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new D.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new D.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new D.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new D.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new D.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new D.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new D.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new D.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new D.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new D.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new D.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new D.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new D.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(f,T){return"string"==typeof f?$({urlTemplate:f},T):f}load(f){const T=this.loadFromPortal({supportedTypes:["WMTS"]},f).then(()=>{let w="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const F=new _.R9(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===F.authority.indexOf("{subDomain}")||(w="is missing 'subDomains' property")}else w="spatialReference must match tileInfo.spatialReference";else w="is missing the required 'urlTemplate' property value";if(w)throw new P.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${w}`)});return this.addResolvingPromise(T),Promise.resolve(this)}get levelValues(){const f=[];if(!this.tileInfo)return null;for(const T of this.tileInfo.lods)f[T.level]=T.levelValue||T.level;return f}readSpatialReference(f,T){return f||T.fullExtent&&T.fullExtent.spatialReference&&x.Z.fromJSON(T.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const f=[],{urlTemplate:T,subDomains:w}=this,F=new _.R9(T),W=F.scheme?F.scheme+"://":"//",z=W+F.authority+"/";if(-1===F.authority.indexOf("{subDomain}"))f.push(z);else if(w&&w.length>0&&F.authority.split(".").length>1)for(const R of w)f.push(W+F.authority.replace(/\{subDomain\}/gi,R)+"/");return f.map(R=>("/"!==R.charAt(R.length-1)&&(R+="/"),R))}get urlPath(){if(!this.urlTemplate)return null;const f=this.urlTemplate,T=new _.R9(f);return f.substring(((T.scheme?T.scheme+"://":"//")+T.authority+"/").length)}readUrlTemplate(f,T){return f||T.templateUrl}writeUrlTemplate(f,T){f&&(0,_.oC)(f)&&(f="https:"+f),f&&(f=f.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),f=(0,_.Fv)(f)),T.templateUrl=f}fetchTile(f,T,w,F={}){const{signal:W}=F,z=this.getTileUrl(f,T,w),R={responseType:"image",signal:W,query:$({},this.refreshParameters)};return(0,m.default)(z,R).then(H=>H.data)}getTileUrl(f,T,w){const F=this.levelValues[f];return this.tileServers[T%this.tileServers.length]+(0,b.gx)(this.urlPath,{level:F,z:F,col:w,x:w,row:T,y:T})}};(0,r._)([(0,a.Cb)({type:String,value:"",json:{write:!0}})],M.prototype,"copyright",void 0),(0,r._)([(0,a.Cb)({type:B.Z,json:{write:!0}})],M.prototype,"fullExtent",void 0),(0,r._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],M.prototype,"legendEnabled",void 0),(0,r._)([(0,a.Cb)({type:["show","hide"]})],M.prototype,"listMode",void 0),(0,r._)([(0,a.Cb)()],M.prototype,"levelValues",null),(0,r._)([(0,a.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],M.prototype,"isReference",void 0),(0,r._)([(0,a.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],M.prototype,"operationalLayerType",void 0),(0,r._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],M.prototype,"popupEnabled",void 0),(0,r._)([(0,a.Cb)({type:x.Z})],M.prototype,"spatialReference",void 0),(0,r._)([(0,c.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],M.prototype,"readSpatialReference",null),(0,r._)([(0,a.Cb)({type:[String],json:{write:!0}})],M.prototype,"subDomains",void 0),(0,r._)([(0,a.Cb)({type:K.Z,json:{write:!0}})],M.prototype,"tileInfo",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],M.prototype,"tileServers",null),(0,r._)([(0,a.Cb)({json:{read:!1}})],M.prototype,"type",void 0),(0,r._)([(0,a.Cb)()],M.prototype,"urlPath",null),(0,r._)([(0,a.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],M.prototype,"urlTemplate",void 0),(0,r._)([(0,c.r)("urlTemplate",["urlTemplate","templateUrl"])],M.prototype,"readUrlTemplate",null),(0,r._)([(0,i.c)("urlTemplate",{templateUrl:{type:String}})],M.prototype,"writeUrlTemplate",null),(0,r._)([(0,a.Cb)({type:L.Z,json:{write:!0}})],M.prototype,"wmtsInfo",void 0),M=(0,r._)([(0,p.j)("esri.layers.WebTileLayer")],M);var A=M},33820:(N,j,e)=>{e.d(j,{S:()=>E,X:()=>r});const r=1;function E(m,P){let I=0;for(const _ of P){var b;const a=null==(b=_.attributes)?void 0:b[m];"number"==typeof a&&isFinite(a)&&(I=Math.max(I,a))}return I}},99303:(N,j,e)=>{e.d(j,{av:()=>b,d1:()=>a,b:()=>o,O0:()=>g,og:()=>p});var r=e(61921),E=e(89096),m=e(76009);class P{constructor(){this.code=null,this.description=null}}class I{constructor(h){this.error=new P,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=h}}function b(d){return new I(d)}class _{constructor(h){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=h}}function a(d){return new _(d)}const y=new Set;function g(d,h,v,D,K=!1,L){y.clear();for(const B in v){const x=d.get(B);if(!x)continue;const O=v[B],M=s(x,O);if(M!==O&&L&&L.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:x,originalValue:O,sanitizedValue:M}}),y.add(x.name),x&&(K||x.editable)){const A=(0,m.Qc)(x,M);if(A)return b((0,m.vP)(A,x,M));h[x.name]=M}}if(D)for(const B of D)if(!y.has(B.name))return b(`missing required field "${B.name}"`);return null}function s(d,h){let v=h;return"string"==typeof h&&(0,m.H7)(d)?v=parseFloat(h):null!=h&&(0,m.qN)(d)&&"string"!=typeof h&&(v=String(h)),(0,m.Pz)(v)}let c;function p(d,h){if(!d||!(0,E.JY)(h))return d;if("rings"in d||"paths"in d){if(!c)throw new TypeError("geometry engine not loaded");return c.simplify(h,d)}return d}function i(){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(function*(){return c||(c=yield Promise.all([e.e(6536),e.e(8592),e.e(7889)]).then(e.bind(e,47889)),c)})).apply(this,arguments)}function o(d,h){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)(function*(d,h){!(0,E.JY)(d)||"esriGeometryPolygon"!==h&&"esriGeometryPolyline"!==h||(yield i())})).apply(this,arguments)}},226:(N,j,e)=>{e.d(j,{Z:()=>c});var r=e(60046),m=(e(73513),e(9077)),_=(e(67474),e(57025),e(33870),e(67424)),a=e(42442),y=e(15938),g=e(10256),s=e(56703);const c=p=>{let i=class extends p{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(l,o){return null!=o.minLOD&&null!=o.maxLOD?l:0}readMaxScale(l,o){return null!=o.minLOD&&null!=o.maxLOD?l:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(l,o){return o.capabilities&&o.capabilities.indexOf("Tilemap")>-1?new g.y({layer:this}):null}};return(0,r._)([(0,m.Cb)({json:{read:{source:"copyrightText"}}})],i.prototype,"copyright",void 0),(0,r._)([(0,m.Cb)()],i.prototype,"minScale",void 0),(0,r._)([(0,_.r)("service","minScale")],i.prototype,"readMinScale",null),(0,r._)([(0,m.Cb)()],i.prototype,"maxScale",void 0),(0,r._)([(0,_.r)("service","maxScale")],i.prototype,"readMaxScale",null),(0,r._)([(0,m.Cb)({type:s.Z})],i.prototype,"spatialReference",void 0),(0,r._)([(0,m.Cb)({readOnly:!0})],i.prototype,"supportsBlankTile",null),(0,r._)([(0,m.Cb)(y.h)],i.prototype,"tileInfo",void 0),(0,r._)([(0,m.Cb)()],i.prototype,"tilemapCache",void 0),(0,r._)([(0,_.r)("service","tilemapCache",["capabilities"])],i.prototype,"readTilemapCache",null),(0,r._)([(0,m.Cb)()],i.prototype,"version",void 0),i=(0,r._)([(0,a.j)("esri.layers.mixins.ArcGISCachedService")],i),i}},57104:(N,j,e)=>{e.d(j,{R:()=>i});var r=e(60046),E=e(64859),m=e(10882),P=e(60305),I=e(9077),y=(e(67474),e(57025),e(33870),e(42442)),g=e(99737),s=e(98722),c=e(19453);const p={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let i=class extends((0,m.p)(E.Z)){constructor(l){super(l),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const l=this.visibleSublayers.map(o=>{const u=(0,c.ff)(this.floors,o);return o.toExportImageJSON(u)});return l.length?JSON.stringify(l):null}get hasDynamicLayers(){return this.layer&&(0,s.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(l){this._get("layer")!==l&&(this._set("layer",l),this.handles.remove("layer"),l&&this.handles.add([l.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),l.on("sublayer-update",o=>this.notifyChange(p[o.propertyName]))],"layer"))}get layers(){const l=this.visibleSublayers;return l?l.length?"show:"+l.map(o=>o.id).join(","):"show:-1":null}get layerDefs(){var l;const o=!(null==(l=this.floors)||!l.length),u=this.visibleSublayers.filter(d=>null!=d.definitionExpression||o&&null!=d.floorInfo);return u.length?JSON.stringify(u.reduce((d,h)=>{const v=(0,c.ff)(this.floors,h),D=(0,P.pC)(v)?(0,c.Hp)(v,h):h.definitionExpression;return d[h.id]=D,d},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const l=this.layer;return l&&(l.commitProperty("dpi"),l.commitProperty("imageFormat"),l.commitProperty("imageTransparency"),l.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const l=[];if(!this.layer)return l;const o=this.layer.sublayers,u=h=>{const v=this.scale;h.visible&&(0===v||(0===h.minScale||v<=h.minScale)&&(0===h.maxScale||v>=h.maxScale))&&(h.sublayers?h.sublayers.forEach(u):l.unshift(h))};o&&o.forEach(u);const d=this._get("visibleSublayers");return!d||d.length!==l.length||d.some((h,v)=>l[v]!==h)?l:d}toJSON(){const l=this.layer;let o={dpi:l.dpi,format:l.imageFormat,transparent:l.imageTransparency,gdbVersion:l.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?o.dynamicLayers=this.dynamicLayers:o=Q($({},o),{layers:this.layers,layerDefs:this.layerDefs}),o}};(0,r._)([(0,I.Cb)({readOnly:!0})],i.prototype,"dynamicLayers",null),(0,r._)([(0,I.Cb)()],i.prototype,"floors",void 0),(0,r._)([(0,I.Cb)({readOnly:!0})],i.prototype,"hasDynamicLayers",null),(0,r._)([(0,I.Cb)()],i.prototype,"layer",null),(0,r._)([(0,I.Cb)({readOnly:!0})],i.prototype,"layers",null),(0,r._)([(0,I.Cb)({readOnly:!0})],i.prototype,"layerDefs",null),(0,r._)([(0,I.Cb)({type:Number})],i.prototype,"scale",void 0),(0,r._)([(0,I.Cb)(g.qG)],i.prototype,"timeExtent",void 0),(0,r._)([(0,I.Cb)({readOnly:!0})],i.prototype,"version",null),(0,r._)([(0,I.Cb)({readOnly:!0})],i.prototype,"visibleSublayers",null),i=(0,r._)([(0,y.j)("esri.layers.mixins.ExportImageParameters")],i)},31068:(N,j,e)=>{e.d(j,{j:()=>g});var r=e(60046),E=e(64859),m=e(10882),P=e(9077),a=(e(67474),e(57025),e(33870),e(42442));const y={visible:"visibleSublayers"};let g=class extends((0,m.p)(E.Z)){constructor(s){super(s),this.scale=0}set layer(s){this._get("layer")!==s&&(this._set("layer",s),this.handles.remove("layer"),s&&this.handles.add([s.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),s.on("wms-sublayer-update",c=>this.notifyChange(y[c.propertyName]))],"layer"))}get layers(){const{visibleSublayers:s}=this;return s.filter(c=>c.name).map(c=>c.name).join(",")}get version(){this.commitProperty("layers");const s=this.layer;return s&&s.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:s,scale:c}=this,p=null==s?void 0:s.sublayers,i=[],l=o=>{const{minScale:u,maxScale:d,sublayers:h,visible:v}=o;v&&(0===c||(0===u||c<=u)&&(0===d||c>=d))&&(h?h.forEach(l):i.unshift(o))};return null==p||p.forEach(l),i}toJSON(){const{layer:s,layers:c}=this,{imageFormat:p,imageTransparency:i,version:l}=s;return{format:p,request:"GetMap",service:"WMS",styles:"",transparent:i,version:l,layers:c}}};(0,r._)([(0,P.Cb)()],g.prototype,"layer",null),(0,r._)([(0,P.Cb)({readOnly:!0})],g.prototype,"layers",null),(0,r._)([(0,P.Cb)({type:Number})],g.prototype,"scale",void 0),(0,r._)([(0,P.Cb)({readOnly:!0})],g.prototype,"version",null),(0,r._)([(0,P.Cb)({readOnly:!0})],g.prototype,"visibleSublayers",null),g=(0,r._)([(0,a.j)("esri.layers.support.ExportWMSImageParameters")],g)},37427:(N,j,e)=>{e.d(j,{W:()=>y});var r=e(61921),E=e(57711),m=e(40662),P=e(60305),I=e(12523),b=e(71221),_=e(93112),a=e(45608);class y{constructor(s,c,p,i){this.parsedUrl=s,this.portalItem=c,this.apiKey=p,this.signal=i,this.rootDocument=null;const l=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);l&&(this.urlParts={root:l[1],layerId:parseInt(l[2],10)})}fetch(){var s=this;return(0,r.Z)(function*(){var c;if(!s.urlParts)return null;const p=null!=(c=s.portalItem)?c:yield s.portalItemFromServiceItemId();if((0,P.Wi)(p))return s.loadFromUrl();const i=yield s.findAndLoadRelatedPortalItem(p);return(0,P.Wi)(i)?null:s.loadFeatureLayerFromPortalItem(i)})()}fetchPortalItem(){var s=this;return(0,r.Z)(function*(){var c;if(!s.urlParts)return null;const p=null!=(c=s.portalItem)?c:yield s.portalItemFromServiceItemId();return(0,P.Wi)(p)?null:s.findAndLoadRelatedPortalItem(p)})()}fetchRootDocument(){var s=this;return(0,r.Z)(function*(){if((0,P.pC)(s.rootDocument))return s.rootDocument;if((0,P.Wi)(s.urlParts))return s.rootDocument={},{};const c={query:{f:"json",token:s.apiKey},responseType:"json",signal:s.signal},p=`${s.urlParts.root}/SceneServer`;try{const i=yield(0,m.default)(p,c);s.rootDocument=i.data}catch(i){s.rootDocument={}}return s.rootDocument})()}fetchServiceOwningPortalUrl(){var s=this;return(0,r.Z)(function*(){var c;const p=null==(c=E.id)?void 0:c.findServerInfo(s.parsedUrl.path);if(null!=p&&p.owningSystemUrl)return p.owningSystemUrl;const i=s.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const l=(yield(0,m.default)(i,{query:{f:"json"},responseType:"json",signal:s.signal})).data.owningSystemUrl;if(l)return l}catch(l){(0,I.r9)(l)}return null})()}findAndLoadRelatedPortalItem(s){var c=this;return(0,r.Z)(function*(){try{return(yield s.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:c.signal})).find(p=>"Feature Service"===p.type)||null}catch(p){return(0,I.r9)(p),null}})()}loadFeatureLayerFromPortalItem(s){var c=this;return(0,r.Z)(function*(){yield s.load({signal:c.signal});const p=yield c.findMatchingAssociatedSublayerUrl(s.url);return new b.default({url:p,portalItem:s}).load({signal:c.signal})})()}loadFromUrl(){var s=this;return(0,r.Z)(function*(){const c=yield s.findMatchingAssociatedSublayerUrl(`${s.urlParts.root}/FeatureServer`);return new b.default({url:c}).load({signal:s.signal})})()}findMatchingAssociatedSublayerUrl(s){var c=this;return(0,r.Z)(function*(){const p=s.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),i={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:c.signal},l=c.urlParts.layerId,o=c.fetchRootDocument(),u=(0,m.default)(p,i),[d,h]=yield Promise.all([u,o]),v=h&&h.layers,D=d.data&&d.data.layers;if(!Array.isArray(D))throw new Error("expected layers array");if(Array.isArray(v)){for(let K=0;K<Math.min(v.length,D.length);K++)if(v[K].id===l)return`${p}/${D[K].id}`}else if(l<D.length)return`${p}/${D[l].id}`;throw new Error("could not find matching associated sublayer")})()}portalItemFromServiceItemId(){var s=this;return(0,r.Z)(function*(){const c=(yield s.fetchRootDocument()).serviceItemId;if(!c)return null;const p=new a.default({id:c,apiKey:s.apiKey}),i=yield s.fetchServiceOwningPortalUrl();(0,P.pC)(i)&&(p.portal=new _.Z({url:i}));try{return p.load({signal:s.signal})}catch(l){return(0,I.r9)(l),null}})()}}},5322:(N,j,e)=>{e.d(j,{H3:()=>d,QI:()=>c,U4:()=>y,Yh:()=>i});var r=e(60046),E=e(54792),m=e(9077),_=(e(67474),e(57025),e(33870),e(13637)),a=e(42442);let y=class extends E.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,r._)([(0,m.Cb)({type:Number})],y.prototype,"nodesPerPage",void 0),(0,r._)([(0,m.Cb)({type:Number})],y.prototype,"rootIndex",void 0),(0,r._)([(0,m.Cb)({type:String})],y.prototype,"lodSelectionMetricType",void 0),y=(0,r._)([(0,a.j)("esri.layer.support.I3SNodePageDefinition")],y);let g=class extends E.wq{constructor(){super(...arguments),this.factor=1}};(0,r._)([(0,m.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],g.prototype,"id",void 0),(0,r._)([(0,m.Cb)({type:Number})],g.prototype,"factor",void 0),g=(0,r._)([(0,a.j)("esri.layer.support.I3SMaterialTexture")],g);let s=class extends E.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,r._)([(0,m.Cb)({type:[Number]})],s.prototype,"baseColorFactor",void 0),(0,r._)([(0,m.Cb)({type:g})],s.prototype,"baseColorTexture",void 0),(0,r._)([(0,m.Cb)({type:g})],s.prototype,"metallicRoughnessTexture",void 0),(0,r._)([(0,m.Cb)({type:Number})],s.prototype,"metallicFactor",void 0),(0,r._)([(0,m.Cb)({type:Number})],s.prototype,"roughnessFactor",void 0),s=(0,r._)([(0,a.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],s);let c=class extends E.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,r._)([(0,_.J)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,r._)([(0,m.Cb)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,r._)([(0,m.Cb)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,r._)([(0,_.J)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,r._)([(0,m.Cb)({type:g})],c.prototype,"normalTexture",void 0),(0,r._)([(0,m.Cb)({type:g})],c.prototype,"occlusionTexture",void 0),(0,r._)([(0,m.Cb)({type:g})],c.prototype,"emissiveTexture",void 0),(0,r._)([(0,m.Cb)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,r._)([(0,m.Cb)({type:s})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,r._)([(0,a.j)("esri.layer.support.I3SMaterialDefinition")],c);let p=class extends E.wq{};(0,r._)([(0,m.Cb)({type:String,json:{read:{source:["name","index"],reader:(h,v)=>null!=h?h:`${v.index}`}}})],p.prototype,"name",void 0),(0,r._)([(0,_.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],p.prototype,"format",void 0),p=(0,r._)([(0,a.j)("esri.layer.support.I3STextureFormat")],p);let i=class extends E.wq{constructor(){super(...arguments),this.atlas=!1}};(0,r._)([(0,m.Cb)({type:[p]})],i.prototype,"formats",void 0),(0,r._)([(0,m.Cb)({type:Boolean})],i.prototype,"atlas",void 0),i=(0,r._)([(0,a.j)("esri.layer.support.I3STextureSetDefinition")],i);let l=class extends E.wq{};(0,r._)([(0,_.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],l.prototype,"type",void 0),(0,r._)([(0,m.Cb)({type:Number})],l.prototype,"component",void 0),l=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryAttribute")],l);let o=class extends E.wq{};(0,r._)([(0,_.J)({draco:"draco"})],o.prototype,"encoding",void 0),(0,r._)([(0,m.Cb)({type:[String]})],o.prototype,"attributes",void 0),o=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryCompressedAttributes")],o);let u=class extends E.wq{constructor(){super(...arguments),this.offset=0}};(0,r._)([(0,m.Cb)({type:Number})],u.prototype,"offset",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"position",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"normal",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"uv0",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"color",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"uvRegion",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"featureId",void 0),(0,r._)([(0,m.Cb)({type:l})],u.prototype,"faceRange",void 0),(0,r._)([(0,m.Cb)({type:o})],u.prototype,"compressedAttributes",void 0),u=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryBuffer")],u);let d=class extends E.wq{};(0,r._)([(0,_.J)({triangle:"triangle"})],d.prototype,"topology",void 0),(0,r._)([(0,m.Cb)()],d.prototype,"geometryBuffers",void 0),d=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryDefinition")],d)},10256:(N,j,e)=>{e.d(j,{y:()=>x});var L,r=e(61921),E=e(60046),m=e(40662),P=e(64859),I=e(22795),b=e(47765),_=e(33870),a=e(88955),y=e(33828),g=e(12523),s=e(61993),c=e(89225),p=e(97467),i=e(9077),o=(e(67474),e(59559)),u=e(42442),d=e(52690),h=e(85071);class v{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(M,A){if("unknown"!==this._allAvailability)return this._allAvailability;const f=(M-this.location.top)*this.location.width+(A-this.location.left),w=f>>3,F=this._tileAvailabilityBitSet;return w<0||w>F.length?"unknown":F[w]&1<<f%8?"available":"unavailable"}_updateFromData(M){let T=!0,w=!0;const F=Math.ceil(this.location.width*this.location.height/8),W=new Uint8Array(F);let z=0;for(let R=0;R<M.length;R++){const H=R%8;M[R]?(w=!1,W[z]|=1<<H):T=!1,7===H&&++z}w?this._allAvailability="unavailable":T?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=W,this.byteSize+=W.length)}static fromDefinition(M,A){const f=M.service.request||m.default,{row:T,col:w,width:F,height:W}=M,z={query:{f:"json"}};return A=A?$($({},z),A):z,f(function(O){let M;if("vector-tile"===O.service.type)M=`${O.service.url}/tilemap/${O.level}/${O.row}/${O.col}/${O.width}/${O.height}`;else{const f=O.service.tileServers;M=`${f&&f.length?f[O.row%f.length]:O.service.url}/tilemap/${O.level}/${O.row}/${O.col}/${O.width}/${O.height}`}const A=O.service.query;return A&&(M=`${M}?${A}`),M}(M),A).then(R=>R.data).catch(R=>{if(R&&R.details&&422===R.details.httpStatus)return{location:{top:T,left:w,width:F,height:W},valid:!0,data:(0,d.a9)(F*W,0)};throw R}).then(R=>{if(R.location&&(R.location.top!==T||R.location.left!==w||R.location.width!==F||R.location.height!==W))throw new I.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:R,definition:{top:T,left:w,width:F,height:W}});return v.fromJSON(R)})}static fromJSON(M){v.validateJSON(M);const A=new v;return A.location=Object.freeze((0,h.d9)(M.location)),A._updateFromData(M.data),Object.freeze(A)}static validateJSON(M){if(!M||!M.location)throw new I.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===M.valid)throw new I.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!M.data)throw new I.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(M.data))throw new I.Z("tilemap:data-mismatch","Data must be an array of numbers");if(M.data.length!==M.location.width*M.location.height)throw new I.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function D(O){return`${O.level}/${O.row}/${O.col}/${O.width}/${O.height}`}const B=_.Z.getLogger("esri.layers.support.TilemapCache");let x=L=class extends P.Z{constructor(O){super(O),this._handles=new b.Z,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=m.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new a.Z(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],()=>this._initializeTilemapDefinition()),(0,p.S1)(this,"layer.tileInfo.lods",O=>this._initializeAvailableLevels(O),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(O){return O<=2?(B.error("Minimum levels for Tilemap is 3, but got ",O),3):O}get size(){return 1<<this.levels}fetchTilemap(O,M,A,f){if(!this._availableLevels[O])return Promise.reject(new I.Z("tilemap-cache:level-unavailable",`Level ${O} is unavailable in the service`));const T=this._tmpTilemapDefinition,w=this._tilemapFromCache(O,M,A,T);if(w)return Promise.resolve(w);const F=f&&f.signal;return f=Q($({},f),{signal:null}),new Promise((W,z)=>{(0,g.fu)(F,()=>z((0,g.zE)()));const R=D(T);let H=this._pendingTilemapRequests[R];if(!H){H=v.fromDefinition(T,f).then(q=>(this._tilemapCache.put(R,q,q.byteSize),q));const V=()=>delete this._pendingTilemapRequests[R];this._pendingTilemapRequests[R]=H,H.then(V,V)}H.then(W,z)})}getAvailability(O,M,A){if(!this._availableLevels[O])return"unavailable";const f=this._tilemapFromCache(O,M,A,this._tmpTilemapDefinition);return f?f.getAvailability(M,A):"unknown"}getAvailabilityUpsample(O,M,A,f){f.level=O,f.row=M,f.col=A;const T=this.layer.tileInfo;for(T.updateTileInfo(f);;){const w=this.getAvailability(f.level,f.row,f.col);if("unavailable"!==w)return w;if(!T.upsampleTile(f))return"unavailable"}}fetchAvailability(O,M,A,f){return this._availableLevels[O]?this.fetchTilemap(O,M,A,f).catch(T=>T).then(T=>{if(T instanceof v){const w=T.getAvailability(M,A);return"unavailable"===w?Promise.reject(new I.Z("tile-map:tile-unavailable","Tile is not available",{level:O,row:M,col:A})):w}if((0,g.D_)(T))throw T;return"unknown"}):Promise.reject(new I.Z("tilemap-cache:level-unavailable",`Level ${O} is unavailable in the service`))}fetchAvailabilityUpsample(O,M,A,f,T){f.level=O,f.row=M,f.col=A;const w=this.layer.tileInfo;w.updateTileInfo(f);const F=this.fetchAvailability(O,M,A,T).catch(W=>{if((0,g.D_)(W))throw W;if(w.upsampleTile(f))return this.fetchAvailabilityUpsample(f.level,f.row,f.col,f);throw W});return this._fetchAvailabilityUpsamplePrefetch(f.id,O,M,A,T,F),F}_fetchAvailabilityUpsamplePrefetch(O,M,A,f,T,w){var F=this;return(0,r.Z)(function*(){if(!F._prefetchingEnabled)return;const W=`prefetch-${O}`;if(F._handles.has(W))return;const z=(0,g.yi)();w.then(()=>z.abort(),()=>z.abort());let R=!1;if(F._handles.add({remove(){R||(R=!0,z.abort())}},W),yield(0,s.MU)(10,z.signal).catch(()=>{}),R||(R=!0,F._handles.remove(W)),(0,g.Hc)(z))return;const V={id:O,level:M,row:A,col:f},q=Q($({},T),{signal:z.signal}),G=F.layer.tileInfo;for(let C=0;L._prefetches.length<L._maxPrefetch&&G.upsampleTile(V);++C){const U=F.fetchAvailability(V.level,V.row,V.col,q);L._prefetches.push(U);const S=()=>{L._prefetches.removeUnordered(U)};U.then(S,S)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const O=this.layer.parsedUrl,M=O.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:O.path,query:M?(0,c.B7)(M):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(O,M,A,f){f.level=O,f.row=M-M%this.size,f.col=A-A%this.size;const T=D(f);return this._tilemapCache.get(T)}_initializeAvailableLevels(O){this._availableLevels={},O&&O.forEach(M=>this._availableLevels[M.level]=!0)}get test(){const O=this;return{get prefetchingEnabled(){return O._prefetchingEnabled},set prefetchingEnabled(M){O._prefetchingEnabled=M},hasTilemap:(M,A,f)=>!!O._tilemapFromCache(M,A,f,O._tmpTilemapDefinition)}}};x._maxPrefetch=4,x._prefetches=new y.Z({initialSize:L._maxPrefetch}),(0,E._)([(0,i.Cb)({constructOnly:!0,type:Number})],x.prototype,"levels",void 0),(0,E._)([(0,o.p)("levels")],x.prototype,"castLevels",null),(0,E._)([(0,i.Cb)({readOnly:!0,type:Number})],x.prototype,"size",null),(0,E._)([(0,i.Cb)({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0),(0,E._)([(0,i.Cb)({constructOnly:!0})],x.prototype,"layer",void 0),(0,E._)([(0,i.Cb)({constructOnly:!0})],x.prototype,"request",void 0),x=L=(0,E._)([(0,u.j)("esri.layers.support.TilemapCache")],x)},54139:(N,j,e)=>{e.d(j,{Z:()=>s});var y,r=e(60046),E=e(54792),m=e(85071),P=e(9077),a=(e(57025),e(67474),e(33870),e(42442));let g=y=class extends E.wq{constructor(c){super(c)}clone(){return new y({customLayerParameters:(0,m.d9)(this.customLayerParameters),customParameters:(0,m.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,r._)([(0,P.Cb)({json:{type:Object,write:!0}})],g.prototype,"customLayerParameters",void 0),(0,r._)([(0,P.Cb)({json:{type:Object,write:!0}})],g.prototype,"customParameters",void 0),(0,r._)([(0,P.Cb)({type:String,json:{write:!0}})],g.prototype,"layerIdentifier",void 0),(0,r._)([(0,P.Cb)({type:String,json:{write:!0}})],g.prototype,"tileMatrixSet",void 0),(0,r._)([(0,P.Cb)({type:String,json:{write:!0}})],g.prototype,"url",void 0),g=y=(0,r._)([(0,a.j)("esri.layer.support.WMTSLayerInfo")],g);var s=g},31460:(N,j,e)=>{e.d(j,{C:()=>r});const r={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},44564:(N,j,e)=>{e.d(j,{lm:()=>K,CS:()=>l,Yu:()=>v,Cw:()=>i,j5:()=>o});var r=e(61921),E=e(4380),m=e(57711),P=e(38886),I=e(40662),b=e(85071),_=e(89225),a=e(56703),y=e(53781),g=e(25481),s=e(38750),c=e(51201);const p={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function i(L){const B=L.folders||[],x=B.slice(),O=new Map,M=new Map,A=new Map,f=new Map,T=new Map,w={esriGeometryPoint:M,esriGeometryPolyline:A,esriGeometryPolygon:f};(L.featureCollection&&L.featureCollection.layers||[]).forEach(W=>{const z=(0,b.d9)(W);z.featureSet.features=[];const R=W.featureSet.geometryType;O.set(R,z);const H=W.layerDefinition.objectIdField;"esriGeometryPoint"===R?u(M,H,W.featureSet.features):"esriGeometryPolyline"===R?u(A,H,W.featureSet.features):"esriGeometryPolygon"===R&&u(f,H,W.featureSet.features)}),L.groundOverlays&&L.groundOverlays.forEach(W=>{T.set(W.id,W)}),B.forEach(W=>{W.networkLinkIds.forEach(z=>{const R=function(L,B,x){const O=function(L,B){let x;return B.some(O=>O.id===L&&(x=O,!0)),x}(L,x);return O&&(O.parentFolderId=B,O.networkLink=O),O}(z,W.id,L.networkLinks);R&&x.push(R)})}),x.forEach(W=>{W.featureInfos&&(W.points=(0,b.d9)(O.get("esriGeometryPoint")),W.polylines=(0,b.d9)(O.get("esriGeometryPolyline")),W.polygons=(0,b.d9)(O.get("esriGeometryPolygon")),W.mapImages=[],W.featureInfos.map(z=>{switch(z.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const R=w[z.type].get(z.id);R&&W[p[z.type]].featureSet.features.push(R);break}case"GroundOverlay":{const R=T.get(z.id);R&&W.mapImages.push(R);break}}}),W.fullExtent=K([W]))});const F=K(x);return{folders:B,sublayers:x,extent:F}}function l(L,B,x,O){const M=m.id&&m.id.findCredential(L);return L=(0,_.fl)(L,{token:M&&M.token}),(0,I.default)(E.Z.kmlServiceUrl,{query:{url:L,model:"simple",folders:"",refresh:0!==x||void 0,outSR:JSON.stringify(B)},responseType:"json",signal:O})}function o(L,B,x=null,O=[]){const M=[],A={},f=B.sublayers,T=B.folders.map(w=>w.id);return f.forEach(w=>{const F=new L;if(x?F.read(w,x):F.read(w),O.length&&T.indexOf(F.id)>-1&&(F.visible=-1!==O.indexOf(F.id)),A[w.id]=F,null!=w.parentFolderId&&-1!==w.parentFolderId){const W=A[w.parentFolderId];W.sublayers||(W.sublayers=[]),W.sublayers.unshift(F)}else M.unshift(F)}),M}function u(L,B,x){x.forEach(O=>{L.set(O.attributes[B],O)})}function v(L){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(function*(L){const B=c.default.fromJSON(L.featureSet).features,O=(0,s.im)(L.layerDefinition.drawingInfo.renderer),M=P.Z.fromJSON(L.popupInfo),A=[];for(const f of B){const T=yield O.getSymbolAsync(f);f.symbol=T,f.popupTemplate=M,f.visible=!0,A.push(f)}return A})).apply(this,arguments)}function K(L){const B=(0,y.Ue)(y.Gv),x=(0,y.Ue)(y.Gv);for(const O of L){if(O.polygons&&O.polygons.featureSet&&O.polygons.featureSet.features)for(const M of O.polygons.featureSet.features)(0,g.Yg)(B,M.geometry),(0,y.TC)(x,B);if(O.polylines&&O.polylines.featureSet&&O.polylines.featureSet.features)for(const M of O.polylines.featureSet.features)(0,g.Yg)(B,M.geometry),(0,y.TC)(x,B);if(O.points&&O.points.featureSet&&O.points.featureSet.features)for(const M of O.points.featureSet.features)(0,g.Yg)(B,M.geometry),(0,y.TC)(x,B);if(O.mapImages)for(const M of O.mapImages)(0,g.Yg)(B,M.extent),(0,y.TC)(x,B)}return(0,y.fS)(x,y.Gv)?null:{xmin:x[0],ymin:x[1],zmin:x[2],xmax:x[3],ymax:x[4],zmax:x[5],spatialReference:a.Z.WGS84}}},15938:(N,j,e)=>{e.d(j,{d:()=>m,h:()=>E});var r=e(31818);const E={type:r.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:m}}}}};function m(P,I,b,_){if(!P)return null;const{minScale:a,maxScale:y,minLOD:g,maxLOD:s}=I;if(null!=g&&null!=s)return r.Z.fromJSON(_&&_.ignoreMinMaxLOD?P:Q($({},P),{lods:P.lods.filter(({level:c})=>null!=c&&c>=g&&c<=s)}));if(0!==a&&0!==y){const c=l=>Math.round(1e4*l)/1e4,p=a?c(a):1/0,i=y?c(y):-1/0;return r.Z.fromJSON(Q($({},P),{lods:P.lods.filter(l=>{const o=c(l.scale);return o<=p&&o>=i})}))}return r.Z.fromJSON(P)}},80266:(N,j,e)=>{e.d(j,{Z:()=>d});var p,r=e(60046),E=e(85071),m=e(9077),P=e(57025),_=(e(67474),e(33870),e(13637)),a=e(42442),y=e(52581),g=e(86053),s=e(68322),c=e(54792);let i=p=class extends c.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new p({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,E.d9)(this.color)})}};(0,r._)([(0,m.Cb)({type:String,json:{write:!0}})],i.prototype,"description",void 0),(0,r._)([(0,m.Cb)({type:String,json:{write:!0}})],i.prototype,"label",void 0),(0,r._)([(0,m.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],i.prototype,"minValue",void 0),(0,r._)([(0,m.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],i.prototype,"maxValue",void 0),(0,r._)([(0,m.Cb)({type:s.Z,json:{type:[P.z8],write:!0}})],i.prototype,"color",void 0),i=p=(0,r._)([(0,a.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],i);var o,l=i;let u=o=class extends y.Z{constructor(h){super(h),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new o(Q($({},this.cloneProperties()),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,E.d9)(this.colorClassBreakInfos),legendOptions:(0,E.d9)(this.legendOptions)}))}};(0,r._)([(0,_.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],u.prototype,"type",void 0),(0,r._)([(0,m.Cb)({json:{write:!0},type:String})],u.prototype,"field",void 0),(0,r._)([(0,m.Cb)({type:g.Z,json:{write:!0}})],u.prototype,"legendOptions",void 0),(0,r._)([(0,m.Cb)({type:y.Z.fieldTransformTypeKebabDict.apiValues,json:{type:y.Z.fieldTransformTypeKebabDict.jsonValues,read:y.Z.fieldTransformTypeKebabDict.read,write:y.Z.fieldTransformTypeKebabDict.write}})],u.prototype,"fieldTransformType",void 0),(0,r._)([(0,m.Cb)({type:[l],json:{write:!0}})],u.prototype,"colorClassBreakInfos",void 0),u=o=(0,r._)([(0,a.j)("esri.renderers.PointCloudClassBreaksRenderer")],u);var d=u},52581:(N,j,e)=>{e.d(j,{Z:()=>O});var g,r=e(60046),E=e(9836),m=e(54792),P=e(85071),I=e(9077),y=(e(57025),e(67474),e(33870),e(42442));let s=g=class extends m.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new g({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,r._)([(0,I.Cb)({type:String,json:{write:!0}})],s.prototype,"field",void 0),(0,r._)([(0,I.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],s.prototype,"minValue",void 0),(0,r._)([(0,I.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],s.prototype,"maxValue",void 0),s=g=(0,r._)([(0,y.j)("esri.renderers.support.pointCloud.ColorModulation")],s);var c=s;const p=new E.Xn({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let i=class extends m.wq{};(0,r._)([(0,I.Cb)({type:p.apiValues,readOnly:!0,nonNullable:!0,json:{type:p.jsonValues,read:!1,write:p.write}})],i.prototype,"type",void 0),i=(0,r._)([(0,y.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],i);var u,l=i,o=e(13637);let d=u=class extends l{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new u({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,r._)([(0,o.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],d.prototype,"type",void 0),(0,r._)([(0,I.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],d.prototype,"size",void 0),(0,r._)([(0,I.Cb)({type:Boolean,json:{write:!0}})],d.prototype,"useRealWorldSymbolSizes",void 0),d=u=(0,r._)([(0,y.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],d);var v,h=d;let D=v=class extends l{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new v({scaleFactor:this.scaleFactor})}};(0,r._)([(0,o.J)({pointCloudSplatAlgorithm:"splat"})],D.prototype,"type",void 0),(0,r._)([(0,I.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],D.prototype,"scaleFactor",void 0),D=v=(0,r._)([(0,y.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],D);const L={key:"type",base:l,typeMap:{"fixed-size":h,splat:D}},B=(0,E.wY)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let x=class extends m.wq{constructor(M){super(M),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,P.d9)(this.pointSizeAlgorithm),colorModulation:(0,P.d9)(this.colorModulation),pointsPerInch:(0,P.d9)(this.pointsPerInch)}}};(0,r._)([(0,I.Cb)({type:B.apiValues,readOnly:!0,nonNullable:!0,json:{type:B.jsonValues,read:!1,write:B.write}})],x.prototype,"type",void 0),(0,r._)([(0,I.Cb)({types:L,json:{write:!0}})],x.prototype,"pointSizeAlgorithm",void 0),(0,r._)([(0,I.Cb)({type:c,json:{write:!0}})],x.prototype,"colorModulation",void 0),(0,r._)([(0,I.Cb)({json:{write:!0},nonNullable:!0,type:Number})],x.prototype,"pointsPerInch",void 0),x=(0,r._)([(0,y.j)("esri.renderers.PointCloudRenderer")],x),(x||(x={})).fieldTransformTypeKebabDict=new E.Xn({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});var O=x},54121:(N,j,e)=>{e.d(j,{Z:()=>i});var c,r=e(60046),E=e(85071),m=e(9077),_=(e(57025),e(67474),e(33870),e(13637)),a=e(42442),y=e(52581),g=e(86053),s=e(68362);let p=c=class extends y.Z{constructor(l){super(l),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new c(Q($({},this.cloneProperties()),{field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),stops:(0,E.d9)(this.stops),legendOptions:(0,E.d9)(this.legendOptions)}))}};(0,r._)([(0,_.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],p.prototype,"type",void 0),(0,r._)([(0,m.Cb)({json:{write:!0},type:String})],p.prototype,"field",void 0),(0,r._)([(0,m.Cb)({type:g.Z,json:{write:!0}})],p.prototype,"legendOptions",void 0),(0,r._)([(0,m.Cb)({type:y.Z.fieldTransformTypeKebabDict.apiValues,json:{type:y.Z.fieldTransformTypeKebabDict.jsonValues,read:y.Z.fieldTransformTypeKebabDict.read,write:y.Z.fieldTransformTypeKebabDict.write}})],p.prototype,"fieldTransformType",void 0),(0,r._)([(0,m.Cb)({type:[s.Z],json:{write:!0}})],p.prototype,"stops",void 0),p=c=(0,r._)([(0,a.j)("esri.renderers.PointCloudStretchRenderer")],p);var i=p},65474:(N,j,e)=>{e.d(j,{Z:()=>d});var p,r=e(60046),E=e(85071),m=e(9077),P=e(57025),_=(e(67474),e(33870),e(13637)),a=e(42442),y=e(52581),g=e(86053),s=e(68322),c=e(54792);let i=p=class extends c.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new p({description:this.description,label:this.label,values:(0,E.d9)(this.values),color:(0,E.d9)(this.color)})}};(0,r._)([(0,m.Cb)({type:String,json:{write:!0}})],i.prototype,"description",void 0),(0,r._)([(0,m.Cb)({type:String,json:{write:!0}})],i.prototype,"label",void 0),(0,r._)([(0,m.Cb)({type:[String],json:{write:!0}})],i.prototype,"values",void 0),(0,r._)([(0,m.Cb)({type:s.Z,json:{type:[P.z8],write:!0}})],i.prototype,"color",void 0),i=p=(0,r._)([(0,a.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],i);var o,l=i;let u=o=class extends y.Z{constructor(h){super(h),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new o(Q($({},this.cloneProperties()),{field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,E.d9)(this.colorUniqueValueInfos),legendOptions:(0,E.d9)(this.legendOptions)}))}};(0,r._)([(0,_.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],u.prototype,"type",void 0),(0,r._)([(0,m.Cb)({json:{write:!0},type:String})],u.prototype,"field",void 0),(0,r._)([(0,m.Cb)({type:y.Z.fieldTransformTypeKebabDict.apiValues,json:{type:y.Z.fieldTransformTypeKebabDict.jsonValues,read:y.Z.fieldTransformTypeKebabDict.read,write:y.Z.fieldTransformTypeKebabDict.write}})],u.prototype,"fieldTransformType",void 0),(0,r._)([(0,m.Cb)({type:[l],json:{write:!0}})],u.prototype,"colorUniqueValueInfos",void 0),(0,r._)([(0,m.Cb)({type:g.Z,json:{write:!0}})],u.prototype,"legendOptions",void 0),u=o=(0,r._)([(0,a.j)("esri.renderers.PointCloudUniqueValueRenderer")],u);var d=u},39605:(N,j,e)=>{e.d(j,{QM:()=>I,hy:()=>b,uI:()=>m});var r=e(40146),E=e(22791);const m=(()=>{if(!("document"in r.Z))return()=>null;const s=document.createElement("canvas"),c=s.getContext("2d");return s.height=512,s.width=1,i=>{c.clearRect(0,0,1,s.height);const l=c.createLinearGradient(0,0,0,s.height);for(const{ratio:o,color:u}of i.colorStops)l.addColorStop(Math.max(o,.001),`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${u[3]})`);return c.fillStyle=l,c.fillRect(0,0,1,s.height),c.getImageData(0,0,1,s.height).data}})();function I(s,c,p,i){const{blurRadius:l,fieldOffset:o,field:u}=c,d=new Float64Array(p*i),h=function(s){const c=Math.round(3*s),p=2*s*s,i=new Float64Array(2*c+1);for(let l=0;l<=i.length;l++)i[l]=Math.exp(-ne(l-c,2)/p)/Math.sqrt(2*Math.PI)*(s/2);return i}(l),v=Math.round(3*l);let D,K=Number.NEGATIVE_INFINITY;const L=function(s,c){return null!=s?"string"==typeof c?p=>-1*+p.readAttribute(s):p=>+p.readAttribute(s)+c:p=>1}(u,o),B=new Set;for(const x of s){const O=x.getCursor();for(;O.next();){const M=O.getObjectId();if(B.has(M))continue;B.add(M);const A=O.readLegacyPointGeometry(),f=128;if(A.x<-f||A.x>=p+f||A.y<-f||A.y>i+f)continue;const T=+L(O),w=Math.round(A.x)-v,F=Math.round(A.y)-v,W=Math.max(0,w),z=Math.max(0,F),R=Math.min(i,Math.round(A.y)+v),H=Math.min(p,Math.round(A.x)+v);for(let V=z;V<R;V++){const q=h[V-F];for(let G=W;G<H;G++)D=d[V*p+G]+=q*h[G-w]*T,D>K&&(K=D)}}}return{matrix:d.buffer,max:K}}function b(s,c,p,i,l,o){s.canvas.width=s.canvas.height=c,s.clearRect(0,0,c,c);const u=s.getImageData(0,0,c,c);p&&i&&u.data.set(new Uint8ClampedArray(function(s,c,p,i,l){const o=new Uint32Array(s*s),u="buffer"in c?c:new Float64Array(c),d="buffer"in p?new Uint32Array(p.buffer):new Uint32Array(new Uint8Array(p).buffer),h=d.length/(l-i);for(let v=0;v<u.length;v++){const K=Math.floor((u[v]-i)*h);o[v]=d[(0,E.uZ)(K,0,d.length-1)]}return o.buffer}(c,p,i,l,o))),s.putImageData(u,0,0)}},94226:(N,j,e)=>{e.d(j,{t:()=>m});var r=e(61921),E=e(40662);function m(I,b){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(I,b){const{data:_}=yield(0,E.default)(I,$({responseType:"image"},b));return _})).apply(this,arguments)}},72459:(N,j,e)=>{e.d(j,{Z:()=>b});var r=e(79391),E=e(35779),m=e(38005),P=e(60194);class b{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(a,y,g){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===a.type||"esriSFS"===a.type){const[h,v,D]=r.fN.rasterizeSimpleFill(this._rasterizationCanvas,a.style,y);return{size:[v,D],image:new Uint32Array(h.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===a.type||"esriSLS"===a.type){const[h,v,D]=r.fN.rasterizeSimpleLine(a.style,a.cap);return{size:[v,D],image:new Uint32Array(h.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let s,c,p;if("simple-marker"===a.type||"esriSMS"===a.type||"line-marker"===a.type?(s=r.B$.fromSimpleMarker(a),p=(0,m.Fp)(s)):"CIMHatchFill"===a.type?(s=r.B$.fromCIMHatchFill(a),c=new E.Z(s.frame.xmin,-s.frame.ymax,s.frame.xmax-s.frame.xmin,s.frame.ymax-s.frame.ymin)):a.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===a.markerPlacement.type?(s=r.B$.fromCIMInsidePolygon(a),c=new E.Z(s.frame.xmin,-s.frame.ymax,s.frame.xmax-s.frame.xmin,s.frame.ymax-s.frame.ymin)):(s=a,p=(0,m.Fp)(s)),p&&!g){const[h,v,D]=(0,m.RL)(p);return h?{size:[v,D],image:new Uint32Array(h.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[i,l,o,u,d]=r.B$.rasterize(this._rasterizationCanvas,s,c,!g);return i?{size:[l,o],image:new Uint32Array(i.buffer),sdf:!1,simplePattern:!1,anchorX:u,anchorY:d}:null}rasterizeImageResource(a,y,g,s){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=a,this._rasterizationCanvas.height=y;const c=this._rasterizationCanvas.getContext("2d");g instanceof ImageData?c.putImageData(g,0,0):(g.setAttribute("width",`${a}px`),g.setAttribute("height",`${y}px`),c.drawImage(g,0,0,a,y));const p=c.getImageData(0,0,a,y),i=new Uint8Array(p.data);if(s)for(const v of s)if(v&&v.oldColor&&4===v.oldColor.length&&v.newColor&&4===v.newColor.length){const[D,K,L,B]=v.oldColor,[x,O,M,A]=v.newColor;if(D===x&&K===O&&L===M&&B===A)continue;for(let f=0;f<i.length;f+=4)D===i[f]&&K===i[f+1]&&L===i[f+2]&&B===i[f+3]&&(i[f]=x,i[f+1]=O,i[f+2]=M,i[f+3]=A)}let l;for(let v=0;v<i.length;v+=4)l=i[v+3]/255,i[v]=i[v]*l,i[v+1]=i[v+1]*l,i[v+2]=i[v+2]*l;let o=i,u=a,d=y;const h=512;if(u>=h||d>=h){const v=u/d;v>1?(u=h,d=Math.round(h/v)):(d=h,u=Math.round(h*v)),o=new Uint8Array(4*u*d);const D=new Uint8ClampedArray(o.buffer);(0,P.TT)(i,a,y,D,u,d,!1)}return{size:[u,d],image:new Uint32Array(o.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},27806:(N,j,e)=>{e.d(j,{Z:()=>P});var r=e(12523),E=e(10256),m=e(6525);class P{constructor(b){if(b instanceof E.y)this._tilemapCache=b;else{if(!b||!("index"in b))throw new Error("Invalid tilemap!");this._tilemap=b.index}}dataKey(b,_){if(this._tilemapCache){const{level:a,row:y,col:g}=b,s=new m.Z(b);return this._tilemapCache.fetchAvailabilityUpsample(a,y,g,s,_).then(()=>(s.world=b.world,s)).catch(c=>{if((0,r.D_)(c))throw c;return null})}return this._getIndexedDataKey(b)}forEach(b,_,a,y,g){this._callback=g,this._maxLevel=_+b,this._forEach(this._tilemap,_,a,y)}_forEach(b,_,a,y){0!==b&&(this._callback(_,a,y),_!==this._maxLevel&&"object"==typeof b&&(this._forEach(b[0],_+1,2*a,2*y),this._forEach(b[1],_+1,2*a,2*y+1),this._forEach(b[2],_+1,2*a+1,2*y),this._forEach(b[3],_+1,2*a+1,2*y+1)))}_getIndexedDataKey(b){const _=[b];if(b.level<0||b.row<0||b.col<0||b.row>>b.level>0||b.col>>b.level>0)return Promise.resolve(null);let a=b;for(;0!==a.level;)a=new m.Z(a.level-1,a.row>>1,a.col>>1,a.world),_.push(a);let y,g,s=this._tilemap,c=_.pop();if(1===s)return Promise.resolve(c);for(;_.length;)if(y=_.pop(),g=(1&y.col)+((1&y.row)<<1),s){if(0===s[g]){c=null;break}if(1===s[g]){c=y;break}c=y,s=s[g]}return Promise.resolve(c)}}},93820:(N,j,e)=>{e.d(j,{p:()=>p,k:()=>c});var r=e(87283),E=e(77624),P=(e(67474),e(60305)),I=e(5562),b=e(53781),_=e(23521),a=e(32309);function y(i,l){return i<<16|l}function g(i){return(4294901760&i)>>>16}function s(i){return 65535&i}const c={getObjectId:i=>i.getObjectId(),getAttributes:i=>i.readAttributes(),getAttribute:(i,l)=>i.readAttribute(l),cloneWithGeometry:(i,l)=>i,getGeometry:i=>i.readHydratedGeometry(),getCentroid:(i,l)=>i.readCentroid()};class p extends _.J{constructor(l,o,u){super(l,o),this.featureAdapter=c,this.events=new E.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new r.Z(50),this._index=(0,I.r)(9,d=>({minX:this._storage.getXMin(d),minY:this._storage.getYMin(d),maxX:this._storage.getXMax(d),maxY:this._storage.getYMax(d)})),this._storage=o,this.mode=u}get storage(){return this._storage}get storeStatistics(){let l=0,o=0,u=0;return this.forEach(d=>{const h=d.readGeometry();h&&(o+=h.isPoint?1:h.lengths.reduce((v,D)=>v+D,0),u+=h.isPoint?1:h.lengths.length,l+=1)}),{featureCount:l,vertexCount:o,ringCount:u}}hasInstance(l){return this._featureSetsByInstance.has(l)}onTileData(l,o){if((0,P.Wi)(o.addOrUpdate))return o;if(o.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const d=o.addOrUpdate.getCursor();for(;d.next();){const h=d.getDisplayId();this.setComputedAttributes(this._storage,d,h,l.scale)}return o}this._featureSetsByInstance.set(o.addOrUpdate.instance,o.addOrUpdate);const u=o.addOrUpdate.getCursor();for(;u.next();)this._insertFeature(u,l.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),o}search(l){this._rebuildIndex();const o=l.id,u=this._indexSearchCache.find(D=>D.tileId===o);if((0,P.pC)(u))return u.readers;const d=new Map,h=this._searchIndex(l.bounds),v=[];for(const D of h){const K=this._storage.getInstanceId(D),L=g(K),B=s(K);d.has(L)||d.set(L,[]),d.get(L).push(B)}return d.forEach((D,K)=>{const L=this._featureSetsByInstance.get(K);v.push(a.t.from(L,D))}),this._indexSearchCache.enqueue({tileId:o,readers:v}),v}insert(l){const o=l.getCursor(),u=this._storage;for(;o.next();){var d;const h=y(o.instance,o.getIndex()),v=o.getObjectId(),D=null!=(d=this._objectIdToDisplayId.get(v))?d:this._storage.createDisplayId();o.setDisplayId(D),u.setInstanceId(D,h),this._objectIdToDisplayId.set(v,D)}this._featureSetsByInstance.set(l.instance,l),this._spatialIndexInvalid=!0}remove(l){const o=this._objectIdToDisplayId.get(l);if(!o)return;const u=this._storage.getInstanceId(o),d=s(u),h=g(u),v=this._featureSetsByInstance.get(h);this._objectIdToDisplayId.delete(l),this._storage.releaseDisplayId(o),v.removeAtIndex(d),v.isEmpty&&this._featureSetsByInstance.delete(h),this._spatialIndexInvalid=!0}forEach(l){this._objectIdToDisplayId.forEach(o=>{const u=this._storage.getInstanceId(o),d=this._lookupFeature(u);l(d)})}forEachUnsafe(l){this._objectIdToDisplayId.forEach(o=>{const u=this._storage.getInstanceId(o),d=g(u),h=s(u),v=this._getFeatureSet(d);v.setIndex(h),l(v)})}forEachInBounds(l,o){const u=this._searchIndex(l);for(const d of u){const h=this.lookupFeatureByDisplayId(d,this._storage);o((0,P.Wg)(h))}}forEachBounds(l,o,u){this._rebuildIndex();const d=[0,0,0,0];for(const h of l){if(!h.readGeometry())continue;const v=h.getDisplayId();d[0]=this._storage.getXMin(v),d[1]=this._storage.getYMin(v),d[2]=this._storage.getXMax(v),d[3]=this._storage.getYMax(v),o((0,b.JR)(u,d))}}sweepFeatures(l,o,u){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((d,h)=>{l.has(d)||(o.releaseDisplayId(d),u&&u.unsetAttributeData(d),this._objectIdToDisplayId.delete(h))}),this.events.emit("changed")}sweepFeatureSets(l){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((o,u)=>{l.has(u)||this._featureSetsByInstance.delete(u)})}lookupObjectId(l,o){const u=this.lookupFeatureByDisplayId(l,o);return(0,P.Wi)(u)?null:u.getObjectId()}lookupDisplayId(l){return this._objectIdToDisplayId.get(l)}lookupFeatureByDisplayId(l,o){const u=o.getInstanceId(l);return this._lookupFeature(u)}lookupByDisplayIdUnsafe(l){const o=this._storage.getInstanceId(l),u=g(o),d=s(o),h=this._getFeatureSet(u);return h?(h.setIndex(d),h):null}_insertFeature(l,o){const u=this._storage,d=l.getObjectId(),h=y(l.instance,l.getIndex());u.getInstanceId(l.getDisplayId());let v=this._objectIdToDisplayId.get(d);v||(v=u.createDisplayId(),this._objectIdToDisplayId.set(d,v),this._spatialIndexInvalid=!0),l.setDisplayId(v),u.setInstanceId(v,h),this.setComputedAttributes(u,l,v,o)}_searchIndex(l){return this._rebuildIndex(),this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const l=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(o=>{const u=o.getCursor();for(;u.next();){const d=u.getDisplayId();this._storage.setBounds(d,u)&&l.push(d)}}):this._objectIdToDisplayId.forEach(o=>{const u=this._storage.getInstanceId(o);this._storage.setBounds(o,this._lookupFeature(u))&&l.push(o)}),this._index.clear(),this._index.load(l),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(l){const o=g(l),u=s(l),d=this._getFeatureSet(o);if(!d)return null;const h=d.getCursor();return h.setIndex(u),h}_getFeatureSet(l){return this._featureSetsByInstance.get(l)}}},23521:(N,j,e)=>{e.d(j,{J:()=>y});var r=e(61921),E=e(67474),m=e(60305),P=e(32699),I=e(8982),b=e(33870);const a=e.e(6765).then(e.bind(e,96765));class y{constructor(s,c){this._canCacheExpressionValue=!1,this._sourceInfo=s,this._bitsets={computed:c.getBitset(c.createBitset())}}invalidate(){this._bitsets.computed.clear()}updateSchema(s,c){var p=this;return(0,r.Z)(function*(){const i=(0,P.Hg)(p._schema,c);if(p._schema=c,!c||(0,m.Wi)(i)||!(0,P.uD)(i,"attributes"))return;(0,E.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",i),p._bitsets.computed.clear(),s.targets[c.name]=!0;const l=c.attributes,o=[],u=[];for(const d in l){const h=l[d];switch(h.type){case"field":break;case"expression":o.push(p._createArcadeComputedField(h));break;case"label-expression":o.push(p._createLabelArcadeComputedField(h));break;case"statistic":u.push(h)}}p._computedFields=yield Promise.all(o),p._canCacheExpressionValue=!p._computedFields.some(d=>"expression"===d.type&&d.expression.referencesScale()),p._statisticFields=u})()}setComputedAttributes(s,c,p,i){const l=this._bitsets.computed;if(!this._canCacheExpressionValue||!l.has(p)){l.set(p);for(const o of this._computedFields){const u=this._evaluateField(c,o,i);switch(o.resultType){case"numeric":s.setComputedNumericAtIndex(p,o.fieldIndex,u);break;case"string":s.setComputedStringAtIndex(p,o.fieldIndex,u)}}}}_createArcadeComputedField(s){var c=this;return(0,r.Z)(function*(){const p=c._sourceInfo.spatialReference,i=c._sourceInfo.fieldsIndex;return Q($({},s),{expression:yield(0,I.Yi)(s.valueExpression,p,i)})})()}_createLabelArcadeComputedField(s){var c=this;return(0,r.Z)(function*(){const p=c._sourceInfo.spatialReference,i=c._sourceInfo.fieldsIndex,{createLabelFunction:l}=yield a,o=yield l(s.label,i,p);return Q($({},s),{builder:o})})()}_evaluateField(s,c,p){switch(c.type){case"label-expression":{const i=s.readArcadeFeature();return c.builder.evaluate(i)||""}case"expression":{const{expression:i}=c;return function(g,s,c){g.referencesGeometry();const p=s.readArcadeFeature();try{return g.evaluate(Q($({},c),{$feature:p}))}catch(i){return b.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",i),null}}(i,s,{$view:{scale:p}})}}}}},73331:(N,j,e)=>{e.d(j,{Z:()=>y});var r=e(60046),E=e(10882),m=e(9077),_=(e(67474),e(57025),e(33870),e(42442));let a=class extends E.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const g=this.get("tileStore.tileScheme.spatialReference");return g&&g.toJSON()||null}};(0,r._)([(0,m.Cb)({readOnly:!0})],a.prototype,"supportsTileUpdates",null),(0,r._)([(0,m.Cb)({constructOnly:!0})],a.prototype,"remoteClient",void 0),(0,r._)([(0,m.Cb)({constructOnly:!0})],a.prototype,"service",void 0),(0,r._)([(0,m.Cb)()],a.prototype,"spatialReference",null),(0,r._)([(0,m.Cb)({constructOnly:!0})],a.prototype,"tileInfo",void 0),(0,r._)([(0,m.Cb)({constructOnly:!0})],a.prototype,"tileStore",void 0),a=(0,r._)([(0,_.j)("esri.views.2d.layers.features.processors.BaseProcessor")],a);var y=a},32309:(N,j,e)=>{e.d(j,{t:()=>E});var r=e(46337);class E extends r.s{constructor(P,I){super(r.s.createInstance()),this._currentIndex=-1,this._reader=P,this._indices=I}static from(P,I){return new E(P.copy(),I)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const P=new E(this._reader.copy(),this._indices);return P._currentIndex=this._currentIndex,P}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(P){this._reader.setArcadeSpatialReference(P)}attachStorage(P){this._reader.attachStorage(P)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(P){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(P,I){return this._reader.setComputedNumericAtIndex(I,0)}getComputedString(P){return this._reader.getComputedStringAtIndex(0)}setComputedString(P,I){return this._reader.setComputedStringAtIndex(0,I)}getComputedNumericAtIndex(P){return this._reader.getComputedNumericAtIndex(P)}setComputedNumericAtIndex(P,I){this._reader.setComputedNumericAtIndex(P,I)}getComputedStringAtIndex(P){return this._reader.getComputedStringAtIndex(P)}setComputedStringAtIndex(P,I){return this._reader.setComputedStringAtIndex(P,I)}transform(P,I,b,_){const a=this.copy();return a._reader=this._reader.transform(P,I,b,_),a}readAttribute(P,I=!1){return this._reader.readAttribute(P,I)}readAttributes(){return this._reader.readAttributes()}joinAttributes(P){return this._reader.joinAttributes(P)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(P){return this.readAttribute(P,!0)}hasField(P){return this._reader.hasField(P)}setField(P,I){return this._reader.setField(P,I)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(P){return this._reader.setDisplayId(P)}getGroupId(){return this._reader.getGroupId()}setGroupId(P){return this._reader.setGroupId(P)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(P){return this._reader.setIndex(P)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(P,I){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},94584:(N,j,e)=>{e.d(j,{Z:()=>y});var r=e(60046),E=e(10882),m=e(9077),_=(e(67474),e(57025),e(33870),e(42442));let a=class extends E.r{constructor(g){super(g),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(g){const s=this.createTile(g);return s.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(g.id,s),s}forceAttributeTextureUpload(){}forEachTile(g){this.tiles.forEach(g)}releaseTile(g){this.tiles.delete(g.key.id),this.disposeTile(g)}isUpdating(){let g=!0;return this.tiles.forEach(s=>{g=g&&s.isReady}),!g}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,r._)([(0,m.Cb)()],a.prototype,"layer",void 0),(0,r._)([(0,m.Cb)()],a.prototype,"layerView",void 0),(0,r._)([(0,m.Cb)()],a.prototype,"tileInfoView",void 0),(0,r._)([(0,m.Cb)()],a.prototype,"updating",null),a=(0,r._)([(0,_.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],a);var y=a},561:(N,j,e)=>{e.d(j,{Z:()=>m});var r=e(38963),E=e(88854);class m extends E.Z{renderChildren(I){this.attributeView.bindTextures(I.context,!1),this.children.some(b=>b.hasData)&&(super.renderChildren(I),I.drawPhase===r.jx.MAP&&this._renderChildren(I),this.hasHighlight()&&I.drawPhase===r.jx.HIGHLIGHT&&this._renderHighlight(I))}_renderHighlight(I){const{painter:b}=I,_=b.effects.highlight;_.bind(I),this._renderChildren(I,_.defines),_.draw(I),_.unbind()}}},18609:(N,j,e)=>{e.d(j,{U$:()=>I});var r=e(56626),E=e(41365);class m{constructor(_,a){this.layout=_,this.buffer="number"==typeof a?new ArrayBuffer(a*_.stride):a;for(const y of _.fieldNames){const g=_.fields.get(y);this[y]=new g.constructor(this.buffer,g.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(_,a){const y=this[_];return y&&y.elementCount===a.ElementCount&&y.elementType===a.ElementType?y:null}slice(_,a){return new m(this.layout,this.buffer.slice(_*this.stride,a*this.stride))}copyFrom(_,a,y,g){const s=this.stride;if(s%4==0){const c=new Uint32Array(_.buffer,a*s,g*s/4);new Uint32Array(this.buffer,y*s,g*s/4).set(c)}else{const c=new Uint8Array(_.buffer,a*s,g*s);new Uint8Array(this.buffer,y*s,g*s).set(c)}}}class P{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(_,a){return this.appendField(_,r.Eu,a),this}vec2f64(_,a){return this.appendField(_,r.q6,a),this}vec3f(_,a){return this.appendField(_,r.ct,a),this}vec3f64(_,a){return this.appendField(_,r.fP,a),this}vec4f(_,a){return this.appendField(_,r.ek,a),this}vec4f64(_,a){return this.appendField(_,r.Cd,a),this}mat3f(_,a){return this.appendField(_,r.gK,a),this}mat3f64(_,a){return this.appendField(_,r.ey,a),this}mat4f(_,a){return this.appendField(_,r.bj,a),this}mat4f64(_,a){return this.appendField(_,r.O1,a),this}vec4u8(_,a){return this.appendField(_,r.mc,a),this}f32(_,a){return this.appendField(_,r.ly,a),this}f64(_,a){return this.appendField(_,r.oS,a),this}u8(_,a){return this.appendField(_,r.D_,a),this}u16(_,a){return this.appendField(_,r.av,a),this}i8(_,a){return this.appendField(_,r.Hz,a),this}vec2i8(_,a){return this.appendField(_,r.Vs,a),this}vec2i16(_,a){return this.appendField(_,r.or,a),this}vec2u8(_,a){return this.appendField(_,r.xA,a),this}vec4u16(_,a){return this.appendField(_,r.v6,a),this}u32(_,a){return this.appendField(_,r.Nu,a),this}appendField(_,a,y){const g=a.ElementCount*(0,E.n1)(a.ElementType);this.fields.set(_,{size:g,constructor:a,offset:this.stride,optional:y}),this.stride+=g,this.fieldNames.push(_)}alignTo(_){return this.stride=Math.floor((this.stride+_-1)/_)*_,this}hasField(_){return this.fieldNames.indexOf(_)>=0}createBuffer(_){return new m(this,_)}createView(_){return new m(this,_)}clone(){const _=new P;return _.stride=this.stride,_.fields=new Map,this.fields.forEach((a,y)=>_.fields.set(y,a)),_.fieldNames=this.fieldNames.slice(),_.BufferType=this.BufferType,_}}function I(){return new P}},11173:(N,j,e)=>{e.d(j,{M:()=>_});var r=e(61921),E=e(26436),m=e(27001),P=e(25558),I=e(13006),b=e(48082);function _(y){return a.apply(this,arguments)}function a(){return(a=(0,r.Z)(function*(y){const g=new Image;if(g.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",g.width=5,g.height=5,yield g.decode(),!y.gl)return!0;const s=new m.Z(y,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),c=E.Z.createVertex(y,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new b.Z(y,new Map([["a_pos",0]]),{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:c}),i=new P.$(y,"\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",new Map([["a_pos",0]]));y.useProgram(i);const l=new I.Z(y,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},g);y.bindTexture(l,0),i.setUniform1i("u_texture",0);const o=y.getBoundFramebufferObject(),{x:u,y:d,width:h,height:v}=y.getViewport();y.bindFramebuffer(s),y.setViewport(0,0,1,1),y.bindVAO(p),y.drawArrays(5,0,4);const D=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,D),i.dispose(),p.dispose(!1),c.dispose(),s.dispose(),l.dispose(),y.setViewport(u,d,h,v),y.bindFramebuffer(o),g.src="",255===D[0]})).apply(this,arguments)}}}]);