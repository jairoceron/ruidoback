"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[9111],{79111:(z,m,l)=>{l.r(m),l.d(m,{populateOperationalLayers:()=>v});var L=l(61921),C=l(76011),x=(l(67474),l(12523)),o=l(68325),M=l(45608),F=l(41571);function W(e,r){return G(e,r,"notes","Map Notes")}function V(e,r){return G(e,r,"route","Route Layer")}function G(e,r,a,t){return p.apply(this,arguments)}function p(){return(p=(0,L.Z)(function*(e,r,a,t){if(!e.layerType||"ArcGISFeatureLayer"!==e.layerType||e.url)return!1;if(e.featureCollectionType&&e.featureCollectionType===a)return!0;if(e.itemId){const n=new M.default({id:e.itemId,portal:r});return yield n.load(),"Feature Collection"===n.type&&(0,F._$)(n,t)}return!1})).apply(this,arguments)}var b=l(44240),B=l(79283);function v(e,r,a){return S.apply(this,arguments)}function S(){return(S=(0,L.Z)(function*(e,r,a){if(!r)return;const t=[];for(const y of r){const i=E(y,a);t.push("GroupLayer"===y.layerType?H(i,y,a):i)}const n=yield(0,x.as)(t);for(const y of n)!y.value||a.filter&&!a.filter(y.value)||e.add(y.value)})).apply(this,arguments)}const U={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer"},w={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},O={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},R={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",OGCFeatureLayer:"OGCFeatureLayer",SubtypeGroupLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},Z={ArcGISFeatureLayer:"FeatureLayer"},D={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};function E(e,r){return d.apply(this,arguments)}function d(){return(d=(0,L.Z)(function*(e,r){return K(yield P(e,r),e,r)})).apply(this,arguments)}function K(e,r,a){return f.apply(this,arguments)}function f(){return(f=(0,L.Z)(function*(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&A(r)&&(yield k(t,r,a.context)),yield(0,B.y)(t,a.context),t})).apply(this,arguments)}function P(e,r){return T.apply(this,arguments)}function T(){return(T=(0,L.Z)(function*(e,r){const a=r.context,t=N(a);let n=e.layerType||e.type;!n&&r&&r.defaultLayerType&&(n=r.defaultLayerType);const y=t[n];let i=y?o.T[y]:o.T.UnknownLayer;const u=a&&a.portal;if(h(e)){if(e.itemId){const c=new M.default({id:e.itemId,portal:u});yield c.load();const s=(yield(0,b.selectLayerClassPath)(c)).className||"UnknownLayer";i=o.T[s]}}else"ArcGISFeatureLayer"===n?(yield W(e,u))?i=o.T.MapNotesLayer:(yield V(e,u))?i=o.T.RouteLayer:A(e)&&(i=o.T.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?i=o.T.WMTSLayer:"WFS"===n&&"2.0.0"!==e.wfsInfo.version&&(i=o.T.UnsupportedLayer);return i()})).apply(this,arguments)}function A(e){if("ArcGISFeatureLayer"!==e.layerType||h(e))return!1;const r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function h(e){return"Feature Collection"===e.type}function N(e){let r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=O;break;case"ground":r=w;break;default:r=U}else switch(e.layerContainerType){case"basemap":r=D;break;case"tables":r=Z;break;default:r=R}return r}function H(e,r,a){return I.apply(this,arguments)}function I(){return(I=(0,L.Z)(function*(e,r,a){const t=new C.Z,n=v(t,Array.isArray(r.layers)?r.layers:[],a),y=yield e;if(yield n,"group"===y.type)return y.layers.addMany(t),y})).apply(this,arguments)}function k(e,r,a){return g.apply(this,arguments)}function g(){return(g=(0,L.Z)(function*(e,r,a){const t=o.T.FeatureLayer,n=yield t(),y=r.featureCollection,i=y.showLegend,u=y.layers.map(c=>{const s=new n;return s.read(c,a),null!=i&&s.read({showLegend:i},a),s});e.layers.addMany(u)})).apply(this,arguments)}}}]);